!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.DC=e():t.DC=e()}(this,function(){return webpackJsonpDC([1],{190:function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Banner=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(12),s=i(a),u=n(53),h=i(u),c=n(34),l=function(t){return t&&t.__esModule?t:{default:t}}(c),d=n(35),f=n(482),y=n(510),p=n(511),v=n(512);e.Banner=function(){function t(e){r(this,t),(0,d.BannerPoint)().setBannerInstance(this),this.container=document.getElementById(e),this.boundBox=this.container.getBoundingClientRect(),this.scene=new s.Scene,this.camera=new s.PerspectiveCamera(50,this.boundBox.width/this.boundBox.height,1,1e4),this.group=new s.Group,this.scene.add(this.group),this.globe=new f.China,this.wave=new y.Wave,this.city=new p.City,this.tree=new v.Tree,this.currentBanner=this.globe,this.initRender()}return o(t,[{key:"initRender",value:function(){var t=document.querySelector("#svg_word");t.setAttribute("width",this.boundBox.width),t.setAttribute("height",this.boundBox.height),this.camera.position.copy(this.currentBanner.cameraPosition),this.camera.lookAt(this.currentBanner.scenePosition);var e=new s.WebGLRenderer({antialias:!0});e.setPixelRatio(window.devicePixelRatio),e.setSize(this.boundBox.width,this.boundBox.height),e.setClearColor(514,.3),e.domElement.style.position="absolute",this.container.appendChild(e.domElement),this.render=e}},{key:"hideLoading",value:function(){h.select("#loading").transition().duration(300).style("opacity",0).remove()}},{key:"initScene",value:function(){var t=this;this.wave.initPointMesh();var e=this.globe.initPointMesh(),n=(0,d.BannerPoint)();n.setMeshArray(e.meshArray).setNeedsUpdateArray(e.needsUpdateArray).setMaterialArray(e.materialArray),n.meshArray().forEach(function(e){t.group.add(e)})}},{key:"changeBanner",value:function(t){this.currentBanner!==t&&(this.currentBanner.wordHelper.showGroup(!1),this.currentBanner.cancelPointAnimation(),this.currentBanner=t,this.currentBanner!==this.wave&&(this.wave.canAnimation=!1),this.currentBanner.addPointAnimation())}},{key:"animation",value:function(){var t=this;this.currentBanner.wordHelper.canShow&&this.currentBanner.wordHelper.play(),l.default.update(),this.currentBanner.canAnimation&&this.currentBanner.animation();var e=(0,d.BannerPoint)();this.currentBanner===this.city||this.currentBanner===this.tree?this.group.rotation.set(0,0,0):this.group.rotation.y+=e.getRotationY(),this.camera.lookAt(e.getScenePosition()),e.needsUpdateArray().forEach(function(t){t.verticesNeedUpdate=!0}),this.render.render(this.scene,this.camera),requestAnimationFrame(function(e){t.animation()})}},{key:"confirmSvgPosition",value:function(t){var e=t.wordHelper.type,n=document.getElementById("svg_"+e);if("tree"===e||"city"===e){for(var i=1e4,r=1e4,o=0,a=0,s=this.boundBox.width/2,u=this.boundBox.height/2,h=0,c=t.geometry.vertices.length;h<c;h++){var l=t.geometry.vertices[h],d=l.clone();d.project(this.camera);var f={x:Math.round(d.x*s+s),y:Math.round(-d.y*u+u)};f.x<i&&(i=f.x),f.x>o&&(o=f.x),f.y<r&&(r=f.y),f.y>a&&(a=f.y)}var y=o-i,p=a-r;"city"===e&&(i+=Math.round(.095*y),r-=Math.round(.174*p)),n.style.left=i+"px",n.style.top=r+"px",n.setAttribute("width",y),n.setAttribute("height",p)}if("wave"===e){var i=Math.round(.2*this.boundBox.width),r=Math.round(.025*this.boundBox.height),y=Math.round(.6*this.boundBox.width),p=Math.round(.95*this.boundBox.height);n.style.left=i+"px",n.style.top=r+"px",n.setAttribute("width",y),n.setAttribute("height",p)}}}]),t}()},34:function(t,e,n){"use strict";(function(n){var i,r,o=("function"==typeof Symbol&&Symbol.iterator,function(){this._tweens={},this._tweensAddedDuringUpdate={}});o.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(t=void 0!==t?t:a.now();n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var r=this._tweens[n[i]];r&&!1===r.update(t)&&(r._isPlaying=!1,e||delete this._tweens[n[i]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var a=new o;a.Group=o,a._nextId=0,a.nextId=function(){return a._nextId++},"undefined"==typeof window&&void 0!==n?a.now=function(){var t=n.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?a.now=window.performance.now.bind(window.performance):void 0!==Date.now?a.now=Date.now:a.now=function(){return(new Date).getTime()},a.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=a.Easing.Linear.None,this._interpolationFunction=a.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||a,this._id=a.nextId()},a.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=t,void 0!==e&&(this._duration=e),this},start:function(t){this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?a.now()+parseFloat(t):t:a.now(),this._startTime+=this._delayTime;for(var e in this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array==!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,n,i;if(t<this._startTime)return!0;!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=n>1?1:n,i=this._easingFunction(n);for(e in this._valuesEnd)if(void 0!==this._valuesStart[e]){var r=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,i):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?r+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[e]=r+(o-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1===n){if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(e in this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var a=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=a}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,u=this._chainedTweens.length;s<u;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},a.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-a.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*a.Easing.Bounce.In(2*t):.5*a.Easing.Bounce.Out(2*t-1)+.5}}},a.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=a.Interpolation.Utils.Linear;return e<0?o(t[0],t[1],i):e>1?o(t[n],t[n-1],n-i):o(t[r],t[r+1>n?n:r+1],i-r)},Bezier:function(t,e){for(var n=0,i=t.length-1,r=Math.pow,o=a.Interpolation.Utils.Bernstein,s=0;s<=i;s++)n+=r(1-e,i-s)*r(e,s)*t[s]*o(i,s);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=a.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),o(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):o(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=a.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;i>1;i--)n*=i;return t[e]=n,n}}(),CatmullRom:function(t,e,n,i,r){var o=.5*(n-t),a=.5*(i-e),s=r*r;return(2*e-2*n+o+a)*(r*s)+(-3*e+3*n-2*o-a)*s+o*r+e}}},function(n){i=[],void 0!==(r=function(){return a}.apply(e,i))&&(t.exports=r)}()}).call(e,n(481))},35:function(t,e,n){"use strict";function i(){return{getGeometry:function(){return a},setGeometry:function(t){return a=t,this},meshArray:function(){return s},setMeshArray:function(t){return s=t,this},needsUpdateArray:function(){return u},setNeedsUpdateArray:function(t){return u=t,c=t[0].vertices.length,l=t[1].vertices.length,d=c+l,this},landCount:function(){return c},chinaCount:function(){return l},totalCount:function(){return d},materialArray:function(){return h},setMaterialArray:function(t){return h=t,this},getRotationY:function(){return f},setRotationY:function(t){f=t},getScenePosition:function(){return y},setScenePosition:function(t){y=t},getBannerInstance:function(){return p},setBannerInstance:function(t){p=t}}}Object.defineProperty(e,"__esModule",{value:!0}),e.BannerPoint=i;var r=n(12),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),a=(n(36),new o.Geometry),s=new Array,u=new Array,h=new Array,c=0,l=0,d=0,f=.01,y=new o.Vector3(0,0,0),p=null},36:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.Word=function(){function t(e){i(this,t),e=e||new Object,this.type=e.type||"globe",this.current_frame=0,this.total_frames=e.total_frames||50,this.canShow=!1,this.addAnimationFuncArray=[],this.removeAnimationFuncArray=[]}return r(t,[{key:"showGroup",value:function(t){if(t){if(this.group.style.display="block","globe"!==this.type){var e=document.getElementById("svg_"+this.type);e.style.display="block"}}else this.hideIcon(),this.group.style.display="none",this.hideElement(),this.current_frame=0,this.wordStringList.forEach(function(t){t.loaded=!1}),this.dataStringList.forEach(function(t){t.loaded=!1}),this.englishStringList.forEach(function(t){t.loaded=!1});this.canShow=t}},{key:"hideElement",value:function(){this.path_word.setAttribute("d",""),this.path_line.style.strokeDasharray=this.pathLineLength,this.path_line.style.strokeDashoffset=this.pathLineLength,this.circle.style.display="none",this.path_data.setAttribute("d",""),this.path_english.setAttribute("d","")}},{key:"initElement",value:function(){this.group=document.querySelector("#"+this.type),this.path_word=document.querySelector("#path_word_"+this.type),this.path_line=document.querySelector("#path_line_"+this.type),this.circle=document.querySelector("#circle_"+this.type),this.path_data=document.querySelector("#path_data_"+this.type),this.path_english=document.querySelector("#path_english_"+this.type)}},{key:"initWord",value:function(){this.wordStringList=new Array;var t=this.path_word.getAttribute("d");t=t.replace(/z/g,"Z");for(var e=t.split("Z"),n=0,i=e.length;n<i-1;n++){var r=e[n]+"Z";this.wordStringList.push({str:r,loaded:!1})}this.path_word.setAttribute("d","")}},{key:"initLine",value:function(){this.pathLineLength=this.path_line.getTotalLength(),this.path_line.style.strokeDasharray=this.pathLineLength,this.path_line.style.strokeDashoffset=this.pathLineLength,this.circle.style.display="none"}},{key:"initLetter",value:function(){this.dataStringList=new Array,this.englishStringList=new Array;var t=this.path_data.getAttribute("d");t=t.replace(/z/g,"Z");for(var e=t.split("Z"),n=0,i=e.length;n<i-1;n++){var r=e.slice(n,n+1).join("Z")+"Z";this.dataStringList.push({str:r,loaded:!1})}t=this.path_english.getAttribute("d"),t=t.replace(/z/g,"Z"),e=t.split("Z");for(var n=0,i=e.length;n<i-1;n++){var r=e.slice(n,n+1).join("Z")+"Z";this.englishStringList.push({str:r,loaded:!1})}this.letterStringLength=this.dataStringList.length+this.englishStringList.length,this.path_data.setAttribute("d",""),this.path_english.setAttribute("d","")}},{key:"initIcon",value:function(){var t=this;if(this.iconLineArray=[],this.iconArray=[],this.rotateArray=[],this.animationArray=[],this.contentArray=[],"wave"===this.type){var e=["path-17w","path-13w","path-9w","path-5w","path-55w","path-1w"];e.forEach(function(e){var n=document.getElementById(e),i=document.getElementById(e+"_copy"),r=i.getAttribute("d"),o=r.split("L")[0],a=i.getTotalLength();t.iconLineArray.push({line:n,line_copy:i,len:a,start:o})}),this.iconArray=[{icon:document.getElementById("wave_ico1"),end:0,x:0},{icon:document.getElementById("wave_ico2"),end:0,x:0},{icon:document.getElementById("wave_ico3"),end:0,x:0},{icon:document.getElementById("wave_ico4"),end:0,x:0},{icon:document.getElementById("wave_ico5"),end:0,x:0},{icon:document.getElementById("wave_ico6"),end:0,x:0}];for(var n=0;n<this.iconArray.length;n++)this.iconArray[n].start=this.iconLineArray[n].len,this.animationArray.push(this.iconArray[n].icon);for(var n=1;n<=6;n++){var i=document.getElementById("content_wave_"+n);this.contentArray.push(i)}}if("tree"===this.type){var e=["path-51t"];e.forEach(function(e){var n=document.getElementById(e),i=document.getElementById(e+"_copy"),r=i.getAttribute("d"),o=r.split("L")[0],a=i.getTotalLength();t.iconLineArray.push({line:n,line_copy:i,len:a,start:o})}),this.iconArray=[{icon:document.getElementById("tree_ico1_inner"),start:350,end:200,x:100},{icon:document.getElementById("tree_ico2_inner"),start:350,end:200,x:400},{icon:document.getElementById("tree_ico3_inner"),start:350,end:200,x:700}],this.animationArray=[document.getElementById("tree_ico1"),document.getElementById("tree_ico2"),document.getElementById("tree_ico3")]}"city"===this.type&&(this.rotateArray=[{id:"city_ico1"},{id:"city_ico2"},{id:"city_ico3"},{id:"city_ico4"}],this.rotateArray.forEach(function(e){var n=document.getElementById(e.id+"_inner"),i=n.getBBox();e.center=" "+(i.x+i.width/2)+" "+(i.y+i.height/2),e.inner=n,e.transform=n.getAttribute("transform"),t.animationArray.push(document.getElementById(e.id))}));var r=document.getElementById("svg_"+this.type);r&&(r.style.display="none")}},{key:"showIconText",value:function(t){if("globe"!==this.type){var e=t?"block":"none",n=0;"wave"===this.type&&(n=6),"tree"===this.type&&(n=3),"city"===this.type&&(n=4);for(var i=1;i<=n;i++)document.getElementById(this.type+"_text"+i).style.display=e}}},{key:"hideIcon",value:function(){var t=this;if("globe"!==this.type){this.iconLineArray.forEach(function(t){t.line.setAttribute("d","")}),this.iconArray.forEach(function(t){t.icon.setAttribute("transform","translate("+t.x+","+t.start+")")}),this.rotateArray.forEach(function(t){t.inner.setAttribute("transform",t.transform)}),this.contentArray.forEach(function(t){t.setAttribute("transform","translate(0 0)")}),this.showIconText(!1),this.animationArray.forEach(function(e,n){var i=t.addAnimationFuncArray[n],r=t.removeAnimationFuncArray[n];e.removeEventListener("mouseenter",i,!1),e.removeEventListener("mouseleave",r,!1)}),this.addAnimationFuncArray=[],this.removeAnimationFuncArray=[];document.getElementById("svg_"+this.type).style.display="none"}}},{key:"init",value:function(){this.initElement(),this.initWord(),this.initLine(),this.initLetter(),this.initIcon()}},{key:"playWord",value:function(t){var e=this.wordStringList.length,n=Math.floor(e*t)-1;if(n>=0&&!1===this.wordStringList[n].loaded){var i=this.path_word.getAttribute("d"),r=i+this.wordStringList[n].str;this.path_word.setAttribute("d",r),this.wordStringList[n].loaded=!0}}},{key:"playLine",value:function(t){this.path_line.style.strokeDashoffset=(1-t)*this.pathLineLength}},{key:"playLetter",value:function(t){var e=Math.floor(this.letterStringLength*t)-1;if(e>=0)if(this.dataStringList[e]){if(!1===this.dataStringList[e].loaded){var n=this.path_data.getAttribute("d"),i=n+this.dataStringList[e].str;this.path_data.setAttribute("d",i),this.dataStringList[e].loaded=!0}}else if(e-=this.dataStringList.length,!1===this.englishStringList[e].loaded){var n=this.path_english.getAttribute("d"),i=n+this.englishStringList[e].str;this.path_english.setAttribute("d",i),this.englishStringList[e].loaded=!0}}},{key:"playIcon",value:function(t){this.iconLineArray.forEach(function(e){var n=e.len*t,i=e.line_copy.getPointAtLength(n),r=e.start+"L"+i.x+","+i.y;e.line.setAttribute("d",r)}),this.iconArray.forEach(function(e){var n=e.start-(e.start-e.end)*t,i="translate("+e.x+","+n+")";e.icon.setAttribute("transform",i)}),this.rotateArray.forEach(function(e){var n=e.inner,i=360*t,r=" rotate("+i+e.center+")";n.setAttribute("transform",e.transform+r)})}},{key:"play",value:function(){var t=this,e=this.current_frame/this.total_frames;e<=1&&(this.current_frame++,this.playWord(e),this.playLine(e),this.playLetter(e),this.playIcon(e),1===e&&(this.circle.style.display="block",this.showIconText(!0),this.animationArray.forEach(function(e){var n=e.getBBox(),i=" "+(n.x+n.width/2)+" "+(n.y+n.height/2),r=function(){t.addAnimation(e,i)},o=function(){t.removeAnimation(e)};t.addAnimationFuncArray.push(r),t.removeAnimationFuncArray.push(o),e.addEventListener("mouseenter",r,!1),e.addEventListener("mouseleave",o,!1)})))}},{key:"addAnimation",value:function(t,e){var n=t.id+"_animate",i=document.getElementById(n);i||(i=document.createElementNS("http://www.w3.org/2000/svg","animateTransform"),i.setAttribute("id",n),i.setAttribute("attributeName","transform"),i.setAttribute("begin","0s"),i.setAttribute("dur","2s"),i.setAttribute("repeatCount","indefinite"),i.setAttribute("type","rotate"),i.setAttribute("from","0"+e),i.setAttribute("to","360"+e),t.appendChild(i))}},{key:"removeAnimation",value:function(t){var e=document.getElementById(t.id+"_animate");e&&t.removeChild(e)}}]),t}()},481:function(t,e,n){"use strict";function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(l===setTimeout)return setTimeout(t,0);if((l===i||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function a(t){if(d===clearTimeout)return clearTimeout(t);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}function s(){v&&y&&(v=!1,y.length?p=y.concat(p):m=-1,p.length&&u())}function u(){if(!v){var t=o(s);v=!0;for(var e=p.length;e;){for(y=p,p=[];++m<e;)y&&y[m].run();m=-1,e=p.length}y=null,v=!1,a(t)}}function h(t,e){this.fun=t,this.array=e}function c(){}var l,d,f=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:i}catch(t){l=i}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(t){d=r}}();var y,p=[],v=!1,m=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new h(t,e)),1!==p.length||v||o(u)},h.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},482:function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.China=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(12),s=i(a),u=n(181),h=i(u),c=n(53),l=i(c),d=n(34),f=i(d),y=n(509),p=n(35),v=n(36);e.China=function(){function t(){r(this,t),this.geometry_land=new s.Geometry,this.geometry_china=new s.Geometry,this.material_land=null,this.material_china=null,this.cameraPosition=new s.Vector3(0,200,600),this.scenePosition=new s.Vector3(0,0,0),this.hasLoadComplete=!1,this.tweenList=[],this.wordHelper=new v.Word({type:"globe"}),this.wordHelper.init()}return o(t,[{key:"loadJson",value:function(t){return new Promise(function(e,n){l.json(t,function(t,n){e(n)})})}},{key:"generatePointsPosition",value:function(t){for(var e=new s.Geometry,n=h.feature(t,t.objects.countries),i=(0,y.geo)(n.features),r=new s.SphereGeometry(230,150,150),o=new s.Spherical,a=0,u=r.vertices.length;a<u;a++){var c=r.vertices[a];o.setFromVector3(c);var l=s.Math.radToDeg(Math.PI/2-o.phi),d=s.Math.radToDeg(o.theta),f=i.search(l,d);if(null!==f){"China"===f.code?this.geometry_china.vertices.push(c):this.geometry_land.vertices.push(c);var v=new s.Vector3;v.x=1200*Math.random()-600,v.y=1200*Math.random()-600,v.z=1200*Math.random()-600,e.vertices.push(v)}}(0,p.BannerPoint)().setGeometry(e)}},{key:"initPointMesh",value:function(){for(var t=(0,p.BannerPoint)().getGeometry(),e=new s.Geometry,n=new s.Geometry,i=this.geometry_land.vertices.length,r=this.geometry_china.vertices.length,o=i+r,a=0;a<o;a++)a<i?e.vertices.push(t.vertices[a]):n.vertices.push(t.vertices[a]);this.material_land=new s.PointsMaterial({size:4,color:251094,transparent:!0,opacity:.4}),this.material_china=new s.PointsMaterial({size:4,color:251094,transparent:!0,opacity:1});var u=this.material_land.clone(),h=this.material_china.clone(),c=new s.Points(e,u),l=new s.Points(n,h),d=new Array,f=new Array,y=new Array;return d.push(e),d.push(n),f.push(c),f.push(l),y.push(u),y.push(h),{needsUpdateArray:d,meshArray:f,materialArray:y}}},{key:"loadPointAnimation",value:function(){for(var t=this,e=0,n=(0,p.BannerPoint)(),i=n.needsUpdateArray(),r=n.totalCount(),o=n.landCount(),a=0;a<r;a++){if(a<o)var s=i[0].vertices[a],u=this.geometry_land.vertices[a];else var h=a-o,s=i[1].vertices[h],u=this.geometry_china.vertices[h];var c=1e3*Math.random()+500;new f.Tween(s).to({x:u.x,y:u.y,z:u.z},1500).easing(f.Easing.Quadratic.InOut).delay(c).onComplete(function(){++e>=r&&(t.wordHelper.showGroup(!0),t.hasLoadComplete=!0)}).start()}}},{key:"addPointAnimation",value:function(){for(var t=this,e=0,n=(0,p.BannerPoint)(),i=n.needsUpdateArray(),r=n.materialArray(),o=n.totalCount(),a=n.landCount(),s=0;s<o;s++){if(s<a)var u=i[0].vertices[s],h=this.geometry_land.vertices[s];else var c=s-a,u=i[1].vertices[c],h=this.geometry_china.vertices[c];var l=500*Math.random()+100,d=new f.Tween(u).to({x:h.x,y:h.y,z:h.z},1500).easing(f.Easing.Quadratic.InOut).delay(l).onComplete(function(){++e>=.8*o&&(n.setRotationY(.01),t.wordHelper.showGroup(!0))});d.start(),this.tweenList.push(d)}for(var y=0;y<r.length;y++){var u=r[y];if(0===y)var h=this.material_land;else var h=this.material_china;var l=500;new f.Tween(u).to({color:h.color,size:h.size,opacity:h.opacity},1e3).easing(f.Easing.Quadratic.InOut).delay(l).start()}var v=n.getScenePosition(),m=this.scenePosition,l=500;new f.Tween(v).to({x:m.x,y:m.y,z:m.z},1e3).easing(f.Easing.Quadratic.InOut).delay(l).start()}},{key:"cancelPointAnimation",value:function(){this.tweenList.length>0&&this.tweenList.forEach(function(t){t.stop()}),this.tweenList=[]}}]),t}()},509:function(t,e,n){"use strict";function i(t){return{search:function(e,n){for(var i=void 0,o=void 0,a=0;a<t.length;a++)if(i=t[a],"Polygon"===i.geometry.type){if(r(i.geometry.coordinates[0],[n,e]))return{code:t[a].id}}else if("MultiPolygon"===i.geometry.type){o=i.geometry.coordinates;for(var s=0;s<o.length;s++)if(r(o[s][0],[n,e]))return{code:t[a].id}}return null}}}Object.defineProperty(e,"__esModule",{value:!0}),e.geo=i;var r=function(t,e){for(var n=e[0],i=e[1],r=!1,o=void 0,a=void 0,s=void 0,u=void 0,h=0,c=t.length-1;h<t.length;c=h++)o=t[h][0],s=t[h][1],a=t[c][0],u=t[c][1],s>i!=u>i&&n<(a-o)*(i-s)/(u-s)+o&&(r=!r);return r}},510:function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Wave=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(12),s=i(a),u=n(35),h=n(34),c=i(h),l=n(36);e.Wave=function(){function t(){r(this,t),this.pointCount=0,this.segmentCount=61,this.geometry=null,this.material=null,this.cameraPosition=new s.Vector3(0,200,600),this.scenePosition=new s.Vector3(0,0,0),this.number=0,this.wordHelper=new l.Word({type:"wave"}),this.wordHelper.init(),this.canAnimation=!1,this.tweenList=[],this.isNotConfirmPosition=!0}return o(t,[{key:"initPointMesh",value:function(){var t=new s.PlaneGeometry(1e4,1e4,this.segmentCount-1,this.segmentCount-1);this.material=new s.PointsMaterial({color:251094,size:12,transparent:!0,opacity:1}),this.geometry=new s.Geometry;for(var e=0,n=t.vertices.length;e<n;e++){var i=t.vertices[e];this.geometry.vertices.push(new s.Vector3(i.x,-600,i.y))}this.pointCount=this.geometry.vertices.length}},{key:"addPointAnimation",value:function(){for(var t=this,e=0,n=(0,u.BannerPoint)(),i=n.needsUpdateArray(),r=n.materialArray(),o=n.totalCount(),a=n.landCount(),s=0;s<o;s++){if(s<a)var h=i[0].vertices[s],l=this.geometry.vertices[s%this.pointCount];else var d=s-a,h=i[1].vertices[d],l=this.geometry.vertices[d%this.pointCount];var f=500*Math.random()+200,y=new c.Tween(h).to({x:l.x,y:l.y,z:l.z},1e3).easing(c.Easing.Quadratic.InOut).delay(f).onComplete(function(){if(++e>=o){if(t.canAnimation=!0,n.setRotationY(-.001),!0===t.isNotConfirmPosition){(0,u.BannerPoint)().getBannerInstance().confirmSvgPosition(t),t.isNotConfirmPosition=!1}t.wordHelper.showGroup(!0)}});y.start(),this.tweenList.push(y)}for(var p=0;p<r.length;p++){var h=r[p],f=1e3;new c.Tween(h).to({color:this.material.color,size:this.material.size,opacity:this.material.opacity},200).easing(c.Easing.Quadratic.InOut).delay(f).start()}var v=n.getScenePosition(),m=this.scenePosition,f=500;new c.Tween(v).to({x:m.x,y:m.y,z:m.z},1e3).easing(c.Easing.Quadratic.InOut).delay(f).start()}},{key:"animation",value:function(){for(var t=this,e=(0,u.BannerPoint)(),n=e.needsUpdateArray(),i=(e.totalCount(),e.landCount()),r=e.chinaCount(),o=0;o<this.segmentCount;o++)for(var a=0;a<this.segmentCount;a++){var s=o*this.segmentCount+a,h=n[0].vertices[s];if(h.y=this.calculatePisition(o,a),s+this.pointCount<i){var c=n[0].vertices[s+this.pointCount];c.y=this.calculatePisition(o,a)}if(s<r){var l=n[1].vertices[s];l.y=this.calculatePisition(o,a)}}this.number=this.number+.1,this.wordHelper.contentArray.forEach(function(e,n){var i=e.getAttribute("transform");void 0!==i&&null!==i||(i="translate(0 0)"),i=i.replace("translate(","").replace(")","");var r=i.split(" ")[0],o=i.split(" ")[1],a=Math.sin(.3*t.number*(n+1)),s=Math.sin(.2*t.number*(n+2)),u=(parseFloat(r),parseFloat(o)+s),h="translate(0 "+u+")";e.setAttribute("transform",h)})}},{key:"calculatePisition",value:function(t,e){return 60*Math.sin(.5*(t+this.number))+80*Math.sin(.5*(e+this.number))-600}},{key:"cancelPointAnimation",value:function(){this.tweenList.length>0&&this.tweenList.forEach(function(t){t.stop()}),this.tweenList=[]}}]),t}()},511:function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.City=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(12),s=i(a),u=n(35),h=n(34),c=i(h),l=n(36);e.City=function(){function t(){r(this,t),this.geometry=null,this.material=null,this.cameraPosition=new s.Vector3(0,200,600),this.scenePosition=new s.Vector3(0,200,0),this.wordHelper=new l.Word({type:"city"}),this.wordHelper.init(),this.points=[],this.pointCount=0,this.tweenList=[],this.isNotConfirmPosition=!0}return o(t,[{key:"loadImage",value:function(t){var e=this,n=new Image;n.onload=function(){var t=document.createElement("canvas");t.width=n.width,t.height=n.height;var i=t.getContext("2d");i.drawImage(n,0,0);for(var r=[],o=i.getImageData(0,0,t.width,t.height),a=0;a<o.width;a+=2)for(var s=0;s<o.height;s+=2){var u=4*(s*o.width+a);o.data[u+3]>0&&o.data[u+1]>0&&r.push({x:a-300,y:180-s})}e.points=r,e.initPointMesh()},n.src=t}},{key:"initPointMesh",value:function(){this.material=new s.PointsMaterial({color:251094,size:3,transparent:!0,opacity:1}),this.geometry=new s.Geometry;for(var t=0,e=this.points.length;t<e;t++){var n=this.points[t];this.geometry.vertices.push(new s.Vector3(n.x-5,n.y+200,220))}this.pointCount=this.geometry.vertices.length}},{key:"addPointAnimation",value:function(){var t=this,e=0,n=(0,u.BannerPoint)(),i=n.needsUpdateArray(),r=n.materialArray(),o=n.totalCount(),a=n.landCount(),s=n.getScenePosition(),h=this.scenePosition,l=500;new c.Tween(s).to({x:h.x,y:h.y,z:h.z},1e3).easing(c.Easing.Quadratic.InOut).delay(l).start();for(var d=0;d<o;d++){if(d<a)var f=i[0].vertices[d],y=this.geometry.vertices[d%this.pointCount];else var p=d-a,f=i[1].vertices[p],y=this.geometry.vertices[p%this.pointCount];var l=500*Math.random()+200,v=new c.Tween(f).to({x:y.x,y:y.y,z:y.z},1e3).easing(c.Easing.Quadratic.InOut).delay(l).onComplete(function(){if(++e>=o){if(!0===t.isNotConfirmPosition){(0,u.BannerPoint)().getBannerInstance().confirmSvgPosition(t),t.isNotConfirmPosition=!1}t.wordHelper.showGroup(!0)}});v.start(),this.tweenList.push(v)}for(var m=0;m<r.length;m++){var f=r[m],l=1e3;new c.Tween(f).to({color:this.material.color,size:this.material.size,opacity:this.material.opacity},200).easing(c.Easing.Quadratic.InOut).delay(l).start()}}},{key:"cancelPointAnimation",value:function(){this.tweenList.length>0&&this.tweenList.forEach(function(t){t.stop()}),this.tweenList=[]}}]),t}()},512:function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Tree=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(12),s=i(a),u=n(35),h=n(34),c=i(h),l=n(36);e.Tree=function(){function t(){r(this,t),this.geometry=null,this.material=null,this.cameraPosition=new s.Vector3(0,200,600),this.scenePosition=new s.Vector3(0,200,0),this.wordHelper=new l.Word({type:"tree"}),this.wordHelper.init(),this.points=[],this.pointCount=0,this.tweenList=[],this.tweenFallList=[],this.tweenRiseList=[],this.isNotConfirmPosition=!0}return o(t,[{key:"loadImage",value:function(t){var e=this,n=new Image;n.onload=function(){var t=document.createElement("canvas");t.width=n.width,t.height=n.height;var i=t.getContext("2d");i.drawImage(n,0,0);for(var r=[],o=i.getImageData(0,0,t.width,t.height),a=0;a<o.width;a+=2)for(var s=0;s<o.height;s+=2){var u=4*(s*o.width+a);o.data[u+3]>0&&r.push({x:a-250,y:184-s})}e.points=r,e.initPointMesh()},n.src=t}},{key:"initPointMesh",value:function(){this.material=new s.PointsMaterial({color:251094,size:3,transparent:!0,opacity:1}),this.geometry=new s.Geometry;for(var t=0,e=this.points.length;t<e;t++){var n=this.points[t];this.geometry.vertices.push(new s.Vector3(n.x+20,n.y+200,125))}this.pointCount=this.geometry.vertices.length}},{key:"addPointAnimation",value:function(){var t=this,e=0,n=(0,u.BannerPoint)(),i=n.needsUpdateArray(),r=n.materialArray(),o=n.totalCount(),a=n.landCount(),s=n.getScenePosition(),h=this.scenePosition,l=500;new c.Tween(s).to({x:h.x,y:h.y,z:h.z},1e3).easing(c.Easing.Quadratic.InOut).delay(l).start();for(var d=0;d<o;d++){if(d<a)var f=i[0].vertices[d],y=this.geometry.vertices[d%this.pointCount];else var p=d-a,f=i[1].vertices[p],y=this.geometry.vertices[p%this.pointCount];var l=500*Math.random()+200,v=new c.Tween(f).to({x:y.x,y:y.y,z:y.z},1e3).easing(c.Easing.Quadratic.InOut).delay(l).onComplete(function(){if(++e>=o){if(!0===t.isNotConfirmPosition){(0,u.BannerPoint)().getBannerInstance().confirmSvgPosition(t),t.isNotConfirmPosition=!1}t.wordHelper.showGroup(!0),t.addPointFall()}});v.start(),this.tweenList.push(v)}for(var m=0;m<r.length;m++){var f=r[m],l=1e3;new c.Tween(f).to({color:this.material.color,size:this.material.size,opacity:this.material.opacity},200).easing(c.Easing.Quadratic.InOut).delay(l).start()}}},{key:"addPointFall",value:function(){for(var t=this,e=0,n=(0,u.BannerPoint)(),i=n.needsUpdateArray(),r=(n.materialArray(),n.totalCount()),o=n.landCount(),a=0;a<r;a++){if(a<o)var s=i[0].vertices[a],h={x:s.x,y:18+10*Math.random(),z:s.z*(1-Math.random())};else var l=a-o,s=i[1].vertices[l],h={x:s.x,y:18+10*Math.random(),z:s.z*(1-Math.random())};var d=1e3*Math.random()+1e3,f=new c.Tween(s).to({x:h.x,y:h.y,z:h.z},1e3).easing(c.Easing.Quadratic.InOut).delay(d).onComplete(function(){++e>=r&&t.addPointRise()});f.start(),this.tweenFallList.push(f)}}},{key:"addPointRise",value:function(){for(var t=(0,u.BannerPoint)(),e=t.needsUpdateArray(),n=(t.materialArray(),t.totalCount()),i=t.landCount(),r=0;r<n;r++){if(r<i)var o=e[0].vertices[r],a=this.geometry.vertices[this.pointCount-1-r%this.pointCount];else var s=r-i,o=e[1].vertices[s],a=this.geometry.vertices[s%this.pointCount];var h=500*Math.random()+500,l=new c.Tween(o).to({x:a.x,y:a.y,z:a.z},1e3).easing(c.Easing.Quadratic.InOut).delay(h);l.start(),this.tweenRiseList.push(l)}}},{key:"cancelPointAnimation",value:function(){this.tweenList.length>0&&this.tweenList.forEach(function(t){t.stop()}),this.tweenList=[],this.tweenFallList.length>0&&this.tweenFallList.forEach(function(t){t.stop()}),this.tweenFallList=[],this.tweenRiseList.length>0&&this.tweenRiseList.forEach(function(t){t.stop()}),this.tweenRiseList=[]}}]),t}()}},[190])});