<!DOCTYPE html>
<html lang="en">

<head>
    <title>three.js webgl - glTF loader</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

    <link rel="stylesheet" href="./css.css" />
    <script src="../js/vue.js"></script>
    <script src="../js/tween.js"></script>
</head>

<body>
    <!-- <div class="image_top"></div> -->

    <div id="addBtn" class="addBtn">
        添加新位置点
    </div>

    <div id="resetBtn" class="resetBtn">
        重置位置
    </div>

    <div class="image_bottom">
        <!--
        <button onclick="startTomove()">
             <img src="files/down.png">-->

        <div class="btn_box pages">
            <div class="shang">&lt;</div>
            span是选项按钮
            <span class="active  tips" onclick="heti();vm.selectindex=1;"></span>
            <span class="tips" onclick="jieti();vm.selectindex=2;"></span>
            <span class="tips" onclick="heti();vm.selectindex=3;"></span>
            <span class="tips" onclick="donghua3();vm.selectindex=4;"></span>
            <span class="tips" onclick="donghua4();vm.selectindex=5;"></span>
            <span class="tips" onclick="donghua5();vm.selectindex=6;"></span>
            <span class="tips" onclick="donghua6();vm.selectindex=7;"></span>
            <div class="xia">&gt;</div>
        </div>
    </div>
    <div class="xan" :style="'background-image:url(files/bg'+selectindex+'.png)'" id="app">
        <div v-if="selectindex==1" class="active">
            <span v-for="(item,index) in list1" :onmousedown="'Anclick(\''+selectindex+'-'+(index+1)+'\')'" class="active">
                <img :src="item" width="50" algin="center" /></span>
        </div>

        <div v-if="selectindex==2" class="active">
            <span v-for="(item,index) in list2" :onmousedown="'Anclick(\''+selectindex+'-'+(index+1)+'\')'" class="active">
                <img :src="item" width="50" algin="center" /></span>
        </div>

        <div v-if="selectindex==3" class="active">
            <span v-for="(item,index) in list3" :onmousedown="'Anclick(\''+selectindex+'-'+(index+1)+'\')'" class="active">
                <img :src="item" width="50" algin="center" /></span>
        </div>

        <div v-if="selectindex==4" class="active">
            <span v-for="(item,index) in list4" :onmousedown="'Anclick(\''+selectindex+'-'+(index+1)+'\')'" class="active">
                <img :src="item" width="50" algin="center" /></span>
        </div>

        <div v-if="selectindex==5" class="active">
            <span v-for="(item,index) in list5" :onmousedown="'Anclick(\''+selectindex+'-'+(index+1)+'\')'" class="active">
                <img :src="item" width="50" algin="center" /></span>
        </div>

        <div v-if="selectindex==6" class="active">
            <span v-for="(item,index) in list6" :onmousedown="'Anclick(\''+selectindex+'-'+(index+1)+'\')'" class="active">
                <img :src="item" width="50" algin="center" /></span>
        </div>

        <div v-if="selectindex==7" class="active">
            <span v-for="(item,index) in list7" :onmousedown="'Anclick(\''+selectindex+'-'+(index+1)+'\')'" class="active">
                <img :src="item" width="50" algin="center" /></span>
        </div>
    </div>
    <script src="../js/three.js"></script>
    <script src="../js/jquery.min.js"></script>
    <script src="../js/controls/TrackballControls.js"></script>
    <script src="../js/loaders/GLTFLoader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.1.1/Tween.min.js"></script>

    <!-- <script src="js/WebGL.js"></script> -->
    <script src="../js/libs/stats.min.js"></script>

    <script>
        var vm = new Vue({
            el: '#app',
            data: function () {
                return {
                    selectindex: 1,
                    list1: [
                        'http://pccdn.weshape3d.com/Art/dishwasher/03/biaozhunlei_active.png',
                        'http://pccdn.weshape3d.com/Art/dishwasher/03/biaozhunlei_active.png'
                    ],
                    list2: [
                        'http://pccdn.weshape3d.com/Art/dishwasher/03/biaozhunlei_active.png',
                        'http://pccdn.weshape3d.com/Art/dishwasher/03/biaozhunlei_active.png',
                        'http://pccdn.weshape3d.com/Art/dishwasher/03/biaozhunlei_active.png',
                        'http://pccdn.weshape3d.com/Art/dishwasher/03/biaozhunlei_active.png'
                    ],
                    list3: ['http://pccdn.weshape3d.com/Art/dishwasher/03/biaozhunlei_active.png'],
                    list4: [
                        'http://pccdn.weshape3d.com/Art/dishwasher/03/biaozhunlei_active.png',
                        'http://pccdn.weshape3d.com/Art/dishwasher/03/biaozhunlei_active.png'
                    ],
                    list5: [
                        'http://pccdn.weshape3d.com/Art/dishwasher/03/biaozhunlei_active.png',
                        'http://pccdn.weshape3d.com/Art/dishwasher/03/biaozhunlei_active.png',
                        'http://pccdn.weshape3d.com/Art/dishwasher/03/biaozhunlei_active.png'
                    ],
                    list6: [
                        'http://pccdn.weshape3d.com/Art/dishwasher/03/biaozhunlei_active.png',
                        'http://pccdn.weshape3d.com/Art/dishwasher/03/biaozhunlei_active.png'
                    ],
                    list7: ['http://pccdn.weshape3d.com/Art/dishwasher/03/biaozhunlei_active.png']
                };
            }
        });

        function Anclick(clickindex) {
            //alert(clickindex);
            switch (clickindex) {
                case '1-1':
                    jieti();
                    break;
                case '1-2':
                    jieti();
                    break;

                case '2-1':
                    jieti();
                    break;
                case '2-2':
                    jieti();
                    break;
                case '2-3':
                    jieti();
                    break;
                case '2-4':
                    jieti();
                    break;

                case '3-1':
                    jieti();
                    break;

                case '4-1':
                    jieti();
                    break;
                case '4-2':
                    jieti();
                    break;

                case '5-1':
                    jieti();
                    break;
                case '5-2':
                    jieti();
                    break;
                case '5-3':
                    jieti();
                    break;

                case '6-1':
                    jieti();
                    break;
                case '6-2':
                    jieti();
                    break;

                case '7-1':
                    jieti();
                    break;
            }
        }

        // if (WEBGL.isWebGLAvailable() === false) {
        //     document.body.appendChild(WEBGL.getWebGLErrorMessage());
        // }

        var container, mixer, controls;
        var camera, scene, renderer, light;
        var group = new THREE.Object3D();
        var startMove = false;
        var times = 0;
        var rotationDirection = -1;
        var opacity = 0.002;
        var clock = new THREE.Clock();
        var animUp = false; // 0-up 1-down
        var currentAction = null;



        var showanimation = [];
        var shoeModel;
        var opcityDir = -1;
        var cameraStartToMove = false;
        var array_count = 0;

        var camPositions = [];
        var ctlTargets = [];
        var currentIndex = -1;
        var intvTime = 2000;

        // 为了方便测试 --  用于添加位置
        var addButton = document.getElementById('addBtn');
        addButton.addEventListener('click', function () {
            var len = camPositions.length;
            camPositions[len] = camera.position.clone();
            ctlTargets[len] = controls.target.clone();
        });

        // 为了方便测试 -- 用于清空重置
        var resetButton = document.getElementById('resetBtn');
        resetButton.addEventListener('click', function () {
            camPositions = [];
        });

        init();
        animate();

        function tweenCamera(index) {
            controls.enable = false;
            var target = controls.target.clone();
            new TWEEN.Tween(target).to({
                    x: ctlTargets[index].x,
                    y: ctlTargets[index].y,
                    z: ctlTargets[index].z
                }, 2000)
                .onUpdate(function () {
                    camera.lookAt(target);
                })
                .onComplete(function () {
                    console.log("finished tween target");
                    controls.target = ctlTargets[index].clone();
                    controls.enable = true;
                })
                .easing(TWEEN.Easing.Linear.None).start();

            new TWEEN.Tween(camera.position).to({
                    x: camPositions[index].x,
                    y: camPositions[index].y,
                    z: camPositions[index].z
                }, 2000)
                .onComplete(function () {
                    // controls.target = ctlTargets[index].clone();
                })
                .easing(TWEEN.Easing.Linear.None).start();
        }

        // 改造了下这个方法
        function cameraMoveState() {
            moveDirection = 1;
            if (array_count < 6) {
                array_count++;
            } else {
                array_count = 0;
            }

            if (camPositions.length > array_count) {
                tweenCamera(array_count);
            }

            // playTween(array_count);
            // cameraStartToMove = true;
        }

        // 改造了下这个方法
        function cameraMoveBackState() {
            moveDirection = -1;
            if (array_count > 0) {
                array_count--;

            } else {
                array_count = 6;
            }

            if (camPositions.length > array_count) {
                tweenCamera(array_count);
            }

            // playTween(array_count);
            // cameraStartToMove = true;

        }

        function playTween(count) {
            console.log("index ", count);
            console.log("pos", shoeModel.position);
            console.log("ros", shoeModel.rotation);
            switch (count) {
                case 0:
                case 1:
                    var coords1 = {
                        x: 0,
                        y: 0
                    };
                    var tween1 = new TWEEN.Tween(coords1)
                        .to({
                            x: 0,
                            y: Math.PI / 6
                        }, 2000)
                        .easing(TWEEN.Easing.Exponential.Out)
                        .onUpdate(function () {
                            shoeModel.rotation.set(0, coords1.y, 0);
                        }).start();
                    break;
                case 2:
                    var coords2 = {
                        x: 0,
                        y: Math.PI / 6
                    };
                    var tween2 = new TWEEN.Tween(coords2)
                        .to({
                            x: 0,
                            y: 0
                        }, 2000)
                        .easing(TWEEN.Easing.Exponential.Out)
                        .onUpdate(function () {
                            shoeModel.rotation.set(coords2.x, coords2.y, 0);
                        }).start();
                    break;
                case 3:
                    var coords3 = {
                        x: 0,
                        y: 0
                    };
                    var tween3 = new TWEEN.Tween(coords3)
                        .to({
                            x: 0,
                            y: -Math.PI / 2
                        }, 2000)
                        .easing(TWEEN.Easing.Exponential.Out)
                        .onUpdate(function () {
                            shoeModel.rotation.set(coords3.x, coords3.y, 0);
                        }).start();
                    var coords4 = {
                        x: 0,
                        y: -0.5
                    };
                    var tween4 = new TWEEN.Tween(coords4)
                        .to({
                            x: 0,
                            y: Math.PI / 2
                        }, 2000)
                        .easing(TWEEN.Easing.Exponential.Out)
                        .onUpdate(function () {
                            shoeModel.position.set(0, -0.5, coords4.y);
                        }).start();

                    break;
                case 4:
                    var coords5 = {
                        x: 0,
                        y: -Math.PI / 2
                    };
                    var tween5 = new TWEEN.Tween(coords5)
                        .to({
                            x: 0,
                            y: 0
                        }, 2000)
                        .easing(TWEEN.Easing.Exponential.Out)
                        .onUpdate(function () {
                            shoeModel.rotation.set(coords5.x, coords5.y, 0);
                        }).start();
                    var coords6 = {
                        x: 0,
                        y: Math.PI / 2
                    };
                    var tween6 = new TWEEN.Tween(coords6)
                        .to({
                            x: 0,
                            y: 0
                        }, 2000)
                        .easing(TWEEN.Easing.Exponential.Out)
                        .onUpdate(function () {
                            shoeModel.position.set(0, -0.5, coords6.y);
                        }).start();
                    break;
                case 5:
                    var coords7 = {
                        x: 0,
                        y: 0
                    };
                    var tween7 = new TWEEN.Tween(coords7)
                        .to({
                            x: Math.PI / 3,
                            y: 0
                        }, 2000)
                        .easing(TWEEN.Easing.Exponential.Out)
                        .onUpdate(function () {
                            shoeModel.rotation.set(coords7.x, 0, 0);
                        }).start();
                    var coords8 = {
                        x: 0,
                        y: 0
                    };
                    var tween8 = new TWEEN.Tween(coords8)
                        .to({
                            x: 0,
                            y: Math.PI / 3
                        }, 2000)
                        .easing(TWEEN.Easing.Exponential.Out)
                        .onUpdate(function () {
                            shoeModel.position.set(0, -0.5, coords8.y);
                        }).start();
                    break;
                case 6:
                    var coords9 = {
                        x: Math.PI / 3,
                        y: 0
                    };
                    var tween9 = new TWEEN.Tween(coords9)
                        .to({
                            x: 0,
                            y: 0
                        }, 2000)
                        .easing(TWEEN.Easing.Exponential.Out)
                        .onUpdate(function () {
                            shoeModel.rotation.set(coords9.x, 0, 0);
                        }).start();
                    var coords10 = {
                        x: 0,
                        y: Math.PI / 3
                    };
                    var tween10 = new TWEEN.Tween(coords10)
                        .to({
                            x: 0,
                            y: 0
                        }, 2000)
                        .easing(TWEEN.Easing.Exponential.Out)
                        .onUpdate(function () {
                            shoeModel.position.set(0, -0.5, coords10.y);
                        }).start();
                    break;
                default:
            }
            console.log(count);
            console.log(shoeModel.position);
            console.log(shoeModel.rotation);
        }

        function startTomove() {
            times++;
            if (times == 2) {
                startMove = true;
                // resetEveryThing();
                opcityDir = -opcityDir;
                // 播放下落动画；
                playDownAnimation();
                times = 0;
            } else {
                startMove = true;
                opcityDir = -opcityDir;
            }

        }

        function resetEveryThing() {
            if (shoeModel) {
                shoeModel.traverse(function (child) {
                    if (child.type == 'Mesh') {
                        child.material.opacity = 1;
                        child.material.transparent = true;
                    }

                })
            }
        }

        function playDownAnimation() {
            if (showanimation[1]) {
                var action = mixer.clipAction(showanimation[1]);
                action.loop = THREE.LoopOnce;
                action.time = 0;
                action.clampWhenFinished = true;
                action.enable = true;
                action.play();
            }
        }


        // 交互动画共3中状态，另外三种为恢复初始状态动画；
        //     var coords1 = { x: 0, y: 0 };
        //     var tween1 = new TWEEN.Tween(coords1)
        //         .to({ x: 0, y: Math.PI/6 }, 2000)
        //         .easing(TWEEN.Easing.Exponential.Out)
        //         .onUpdate(function() {
        //             shoeModel.rotation.set(coords1.x,coords1.y,0);
        //         });
        //
        //     var coords2 = { x: 0, y: 0 };
        //     var tween2 = new TWEEN.Tween(coords2)
        //         .to({ x: 0, y: -Math.PI/6 }, 2000)
        //         .easing(TWEEN.Easing.Exponential.Out)
        //         .onUpdate(function() {
        //             shoeModel.rotation.set(coords2.x,coords2.y,0);
        //         });
        //
        //     var coords3 = { x: 0, y: 0 };
        //     var tween3 = new TWEEN.Tween(coords3)
        //         .to({ x: 0, y: -Math.PI/2 }, 2000)
        //         .easing(TWEEN.Easing.Exponential.Out)
        //         .onUpdate(function() {
        //           shoeModel.rotation.set(coords3.x,coords3.y,0);
        //         });
        //     var coords4 = { x: 0, y: -0.5 };
        //     var tween4 = new TWEEN.Tween(coords4)
        //         .to({ x: 0, y: Math.PI/2 }, 2000)
        //         .easing(TWEEN.Easing.Exponential.Out)
        //         .onUpdate(function() {
        //             shoeModel.position.set(0,-0.5,coords4.y);
        //         });
        //
        //
        //     var coords5 = { x: 0, y: 0 };
        //     var tween5 = new TWEEN.Tween(coords5)
        //         .to({ x: 0, y: Math.PI/2 }, 2000)
        //         .easing(TWEEN.Easing.Exponential.Out)
        //         .onUpdate(function() {
        //             shoeModel.rotation.set(coords5.x,coords5.y,0);
        //         });
        //     var coords6 = { x: 0, y: Math.PI/2 };
        //     var tween6 = new TWEEN.Tween(coords6)
        //         .to({ x: 0, y: 0 }, 2000)
        //         .easing(TWEEN.Easing.Exponential.Out)
        //         .onUpdate(function() {
        //             shoeModel.position.set(0,-0.5,coords6.y);
        //         });
        //
        //     var coords7 = { x: 0, y: 0 };
        //     var tween7 = new TWEEN.Tween(coords7)
        //         .to({ x: Math.PI/3, y: 0 }, 2000)
        //         .easing(TWEEN.Easing.Exponential.Out)
        //         .onUpdate(function() {
        //             shoeModel.rotation.set(coords7.x,0,0);
        //         });
        //     var coords8 = { x: 0, y: 0 };
        //     var tween8 = new TWEEN.Tween(coords8)
        //         .to({ x: 0, y: Math.PI/2 }, 2000)
        //         .easing(TWEEN.Easing.Exponential.Out)
        //         .onUpdate(function() {
        //             shoeModel.position.set(0,-0.5,coords8.y);
        //         });
        //
        //
        //     var coords9 = { x: 0, y: 0 };
        //     var tween9 = new TWEEN.Tween(coords9)
        //         .to({ x: -Math.PI/3, y: 0 }, 2000)
        //         .easing(TWEEN.Easing.Exponential.Out)
        //         .onUpdate(function() {
        //             shoeModel.rotation.set(coords9.x,0,0);
        //         });
        //     var coords10 = { x: 0, y: Math.PI/2 };
        //     var tween10 = new TWEEN.Tween(coords10)
        //         .to({ x: 0, y: 0 }, 2000)
        //         .easing(TWEEN.Easing.Exponential.Out)
        //         .onUpdate(function() {
        //             shoeModel.position.set(0,-0.5,coords10.y);
        //         });


        function jieti() {
            //动画1
            if (currentAction) {
                currentAction.stop();
            }
            if (showanimation[0]) {
                currentAction = mixer.clipAction(showanimation[0]);
                currentAction.loop = THREE.LoopOnce;
                currentAction.time = 0;
                currentAction.clampWhenFinished = true;
                currentAction.enable = true;
                currentAction.play(); //解体
            }

            animUp = !animUp;
        }





        function heti() {
            //动画2
            if (currentAction) {
                currentAction.stop();
            }
            if (showanimation[1]) {
                currentAction = mixer.clipAction(showanimation[1]);
                currentAction.loop = THREE.LoopOnce;
                currentAction.time = 0;
                currentAction.clampWhenFinished = true;
                currentAction.enable = true;
                currentAction.play(); //合体


            }
            animUp = !animUp;
        }






        function donghua3() {
            //动画3
            if (currentAction) {
                currentAction.stop();
            }
            if (showanimation[2]) {
                currentAction = mixer.clipAction(showanimation[2]);
                currentAction.loop = THREE.LoopOnce;
                currentAction.time = 0;
                currentAction.clampWhenFinished = true;
                currentAction.enable = true;
                currentAction.play(); //合体
            }
            animUp = !animUp;
        }

        function donghua4() {
            //动画4
            if (currentAction) {
                currentAction.stop();
            }
            if (showanimation[3]) {
                currentAction = mixer.clipAction(showanimation[3]);
                currentAction.loop = THREE.LoopOnce;
                currentAction.time = 0;
                currentAction.clampWhenFinished = true;
                currentAction.enable = true;
                currentAction.play(); //合体
            }
            animUp = !animUp;
        }

        function donghua5() {
            //动画5
            if (currentAction) {
                currentAction.stop();
            }
            if (showanimation[4]) {
                currentAction = mixer.clipAction(showanimation[4]);
                currentAction.loop = THREE.LoopOnce;
                currentAction.time = 0;
                currentAction.clampWhenFinished = true;
                currentAction.enable = true;
                currentAction.play(); //合体
            }
            animUp = !animUp;
        }

        function donghua6() {
            //动画6
            if (currentAction) {
                currentAction.stop();
            }
            if (showanimation[5]) {
                currentAction = mixer.clipAction(showanimation[5]);
                currentAction.loop = THREE.LoopOnce;
                currentAction.time = 0;
                currentAction.clampWhenFinished = true;
                currentAction.enable = true;
                currentAction.play(); //合体
            }
            animUp = !animUp;
        }
        //      function startTomove() {
        //
        //          if (currentAction) {
        //              currentAction.stop();
        //          }
        //          if (!animUp) {
        //              if (showanimation[0]) {
        //                  currentAction = mixer.clipAction(showanimation[0]);
        //                  currentAction.loop = THREE.LoopOnce;
        //                  currentAction.time = 0;
        //                  currentAction.clampWhenFinished = true
        //                  currentAction.enable = true
        //                  currentAction.play();
        //              }
        //          } else {
        //              if (showanimation[1]) {
        //                  currentAction = mixer.clipAction(showanimation[1]);
        //                  currentAction.loop = THREE.LoopOnce;
        //                  currentAction.time = 0;
        //                  currentAction.clampWhenFinished = true
        //                  currentAction.enable = true
        //                  currentAction.play();
        //              }
        //          }
        //          animUp = !animUp;
        //      }

        function init() {
            container = document.createElement('div');
            document.body.appendChild(container);

            camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.25, 20);
            camera.position.set(0, 0.2, 3.7);

            scene = new THREE.Scene();

            var patha = 'textures/cube/Bridge2/';
            var formata = '.jpg';
            var backtex = new THREE.CubeTextureLoader().load([
                patha + 'house.right' + formata,
                patha + 'house.left' + formata,
                patha + 'house.top' + formata,
                patha + 'house.bottom' + formata,
                patha + 'house.front' + formata,
                patha + 'house.back' + formata
            ]);
            scene.background = backtex;
            scene.add(group);

            var hemiLight = new THREE.HemisphereLight(0xffffff, 0xffffff, 0.6);
            hemiLight.color.setHSL(0.6, 1, 0.6);
            hemiLight.groundColor.setHSL(0.095, 1, 0.75);
            hemiLight.position.set(0, 50, 0);
            scene.add(hemiLight);
            var hemiLightHelper = new THREE.HemisphereLightHelper(hemiLight, 10);
            scene.add(hemiLightHelper);

            var light = new THREE.DirectionalLight(0xffffff, 0.8);
            light.position.set(0, 1, 0);
            scene.add(light);

            var ambientLight = new THREE.AmbientLight(0xcccccc, 0.1);
            scene.add(ambientLight);

            var pointLight = new THREE.PointLight(0xffffff, 0.2);
            camera.add(pointLight);
            group.add(camera);

            var D_light_bg = new THREE.DirectionalLight(0xcccccc);
            D_light_bg.position.set(0, 3, 0);
            scene.add(D_light_bg);

            light = new THREE.HemisphereLight(0xbbbbff, 0x444422);
            light.position.set(0, 1, 0);
            scene.add(light);

            // model
            var loader = new THREE.GLTFLoader();
            loader.load(
                '../models/gltf/box/box.gltf',
                function (gltf) {
                    gltf.scene.scale.set(0.1, 0.1, 0.1);
                    gltf.scene.position.y -= 0.5;
                    gltf.scene.traverse(function (child) {
                        if (child.type == 'Mesh') {
                            child.material.side = THREE.DoubleSide;
                            //设置下透明度，方便看动画结果
                            child.material.opacity = 1;
                            child.material.transparent = true;
                        }
                    });
                    var animations = gltf.animations;

                    if (animations && animations.length) {
                        mixer = new THREE.AnimationMixer(gltf.scene);
                        for (var i = 0; i < animations.length; i++) {
                            showanimation.push(animations[i]);
                        }
                    }
                    shoeModel = gltf.scene;
                    scene.add(gltf.scene);
                    console.log(scene);
                },
                undefined,
                function (e) {
                    console.error(e);
                }
            );

            renderer = new THREE.WebGLRenderer({
                antialias: true
            });
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.gammaOutput = true;
            container.appendChild(renderer.domElement);

            controls = new THREE.TrackballControls(camera);

            // controls = new THREE.OrbitControls(
            //     camera,
            //     renderer.domElement
            // );

            // controls = new THREE.OrbitControls(
            //     camera,
            //     document,
            //     function () {
            //         rotationDirection = 1;
            //     },
            //     function () {
            //         rotationDirection = -1;
            //     }
            // );
            // controls.enableDamping = true;
            // controls.dampingFactor = 0.1;
            // controls.enableZoom = true;
            controls.target.set(-0.00001, 0, 0);
            // controls.update();

            window.addEventListener('resize', onWindowResize, false);
            // stats
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();

            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function onDocumentMouseMove(event) {
            event.preventDefault();
            console.log(event);
        }

        function onDocumentMouseStart(event) {
            event.preventDefault();
            console.log(event);
        }

        function onDocumentMouseEnd(event) {
            event.preventDefault();
            console.log(event);
        }

        //
        var time = 0;

        function animate() {
            requestAnimationFrame(animate);

            TWEEN.update();
            controls.update();
            renderer.render(scene, camera);

            if (mixer) mixer.update(clock.getDelta());

            // for (var m = 0; m < scene.children.length; m++) {
            //     if (scene.children[m].type == 'Scene') {
            //         shoeModel = scene.children[m];
            //     }
            // }
            // if (shoeModel) {
            //     shoeModel.rotation.y += 0.0035 * rotationDirection;
            // }
            if (shoeModel && startMove) {
                time += 1;
                shoeModel.traverse(function (child) {
                    if (child.type == 'Mesh') {
                        child.material.opacity -= opacity * opcityDir;
                        child.material.transparent = true;
                        // console.log(child.material.opacity);
                        if (child.material.opacity < 0.4 || child.material.opacity == 1) {
                            startMove = false;
                            time = 0;
                        }
                    }
                })
                if (time > 230) {
                    var action = mixer.clipAction(showanimation[0]);
                    action.loop = THREE.LoopOnce;
                    action.time = 0;
                    action.clampWhenFinished = true;
                    action.enable = true;
                    action.play();

                }


            }
            // 相机移动方式
        }
        $(function () {
            $('.shang').on('click', function () {
                var dqindex = vm.selectindex;
                //上翻页
                cameraMoveBackState();
                if ($('.tips.active').index() - 1 == 0) {
                    $('.tips').removeClass('active');
                    $($('.tips')[$('.tips').length - 1])
                        .addClass('active')
                        .click();
                } else {
                    $($('.tips')[$('.tips.active').index() - 2])
                        .addClass('active')
                        .click()
                        .siblings()
                        .removeClass('active');
                    vm.selectindex = dqindex - 1;
                }
            });

            $('.xia').on('click', function () {

                cameraMoveState();
                var dqindex = vm.selectindex;
                //下翻页
                if ($('.tips.active').index() == $('.tips').length) {
                    $('.tips').removeClass('active');
                    $($('.tips')[0])
                        .addClass('active')
                        .click();
                    vm.selectindex = 1;
                    console.log(8);
                } else {
                    $($('.tips')[$('.tips.active').index()])
                        .addClass('active')
                        .click()
                        .siblings()
                        .removeClass('active');
                    vm.selectindex = dqindex + 1;
                }
            });

            $('.tips').on('click', function () {
                //单独点击
                $('.tips').removeClass('active');
                $(this).addClass('active');
            });
        });
    </script>
</body>

</html>