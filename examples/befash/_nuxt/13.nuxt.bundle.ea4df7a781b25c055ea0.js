webpackJsonp([13],{609:function(e,t,i){function r(e){i(870)}var a=i(75)(i(721),i(820),r,null,null);e.exports=a.exports},634:function(e,t,i){function r(e){return i(a(e))}function a(e){var t=n[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var n={"./background0.jpg":635,"./background2.jpg":636,"./background3.jpg":637,"./background4.jpg":638};r.keys=function(){return Object.keys(n)},r.resolve=a,e.exports=r,r.id=634},635:function(e,t,i){e.exports=i.p+"img/background0.b0eab6f.jpg"},636:function(e,t,i){e.exports=i.p+"img/background2.06aef60.jpg"},637:function(e,t,i){e.exports=i.p+"img/background3.1891c8e.jpg"},638:function(e,t,i){e.exports=i.p+"img/background4.cb0fbbe.jpg"},646:function(e,t,i){e.exports=i.p+"img/logo.d4a4f45.gif"},668:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator__=__webpack_require__(103),__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator__),__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise__=__webpack_require__(11),__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise__),__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator__=__webpack_require__(102),__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator__),__WEBPACK_IMPORTED_MODULE_3__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_classCallCheck__=__webpack_require__(162),__WEBPACK_IMPORTED_MODULE_3__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_classCallCheck___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_classCallCheck__),__WEBPACK_IMPORTED_MODULE_4__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_createClass__=__webpack_require__(163),__WEBPACK_IMPORTED_MODULE_4__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_createClass___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_createClass__),Editor=function(){function Editor(e,t,i,r){__WEBPACK_IMPORTED_MODULE_3__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_classCallCheck___default()(this,Editor),this.view=e,this.tag=t,this.briefView=r;var a=new THREE.LoadingManager;a.onProgress=function(e,t,r){var a=parseInt(t/r*100)+"%";i&&i(!0,a)},a.onLoad=function(){i&&i(!1,"0%")},this.load=new THREE.CBMLoader(a);var n={};n.type="js",this.drcLoad=new THREE.DRACOLoader("/upload/js/",n,a),this.textureLoad=new THREE.TextureLoader(a),this.raycaster=new THREE.Raycaster,this.mouse=new THREE.Vector2,this.ModelsChild=[],this.testModels=[],this.models=[],this.material={},this.globalMaterial=[],this.selectedMaterial=[],this.waitLoad=[],this.spotLight=[],this.spotLight1=[],this.exposure=[],this.materials={},this.ambient=[],this.currentMaterial={},this.motes={},this.num=45,this.preGlobalMaterial={},this.bgController=[],this.isEnv=!1,this.curEnv=0,this.envMaps=[],this.mobile=!1,this.envMapIntensity=0,this.isSkyBox=!1,this.isOnclick=!1,this.isOpen=!0,this.urls=[["room/posx.jpg","room/negx.jpg","room/posy.jpg","room/negy.jpg","room/posz.jpg","room/negz.jpg"],["Bridge2/posx.jpg","Bridge2/negx.jpg","Bridge2/posy.jpg","Bridge2/negy.jpg","Bridge2/posz.jpg","Bridge2/negz.jpg"],["skybox/px.jpg","skybox/nx.jpg","skybox/py.jpg","skybox/ny.jpg","skybox/pz.jpg","skybox/nz.jpg"],["Castle/px.jpg","Castle/nx.jpg","Castle/py.jpg","Castle/ny.jpg","Castle/pz.jpg","Castle/nz.jpg"]],this._meshList=[],this.init(),window.addEventListener("resize",function(){this.renderer.setSize(this.view.offsetWidth,this.view.offsetHeight),this.camera.aspect=this.view.offsetWidth/this.view.offsetHeight,this.camera.updateProjectionMatrix(),this.render()}.bind(this)),this.view.addEventListener("mousedown",this.onMouseDown.bind(this),!1),this.view.addEventListener("click",this.onClick.bind(this),!1),this.view.addEventListener("mousemove",this.onMouseMove.bind(this),!1)}return __WEBPACK_IMPORTED_MODULE_4__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_createClass___default()(Editor,[{key:"init",value:function(){this.initScene(),this.initCamera(),this.initRender(),this.initLight(),this.initControls(),this.initPatternManager(),this.view.appendChild(this.renderer.domElement),this.render()}},{key:"initScene",value:function(){this.scene=new THREE.Scene,this.group=new THREE.Group,this.scene.background=(new THREE.Color).setHSL(.6,0,1),this.scene.fog=new THREE.Fog(this.scene.background,1,5e3),this.scene.add(this.group)}},{key:"initCamera",value:function(){this.camera=new THREE.PerspectiveCamera(60,this.view.offsetWidth/this.view.offsetHeight,.01,800),this.camera.position.z=1,this.camera.position.y=0,this.camera.lookAt({x:0,y:0,z:0}),this.camera.up.x=this.camera.up.z=0,this.camera.up.y=1}},{key:"initPatternManager",value:function(){var e=this;this.homePatternManager=new THREE.HomePatternManger(this.view,this.group,this.raycaster,this.controls,function(){return e.camera},this.render.bind(this))}},{key:"initRender",value:function(){this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(16777215),this.renderer.setSize(this.view.offsetWidth,this.view.offsetHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,this.renderer.shadowMapSoft=!0,this.renderer.setPixelRatio(window.devicePixelRatio)}},{key:"initControls",value:function(){this.controls=new THREE.OrbitControls(this.camera,this.view,this.group),this.controls.enableDamping=!0,1==this.mobile?(this.controls.rotateSpeed=.005,this.controls.dampingFactor=2.5):(this.controls.rotateSpeed=.2,this.controls.dampingFactor=.07),this.controls.minDistance=.3,this.controls.maxDistance=20,this.controls.maxPolarAngle=1.5,this.controls.addEventListener("change",this.render.bind(this)),this.controls.addEventListener("start",this.inertiaStart.bind(this)),this.controls.addEventListener("end",this.inertiaEnd.bind(this))}},{key:"saveCamera",value:function(e){this.camera.position.x=e[0],this.camera.position.y=e[1],this.camera.position.z=e[2],this.controls.update()}},{key:"onClick",value:function(e){if(this.isOnclick){this.mouse.x=(e.clientX-380)/this.view.offsetWidth*2-1,this.mouse.y=-e.clientY/this.view.offsetHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var t=this.raycaster.intersectObjects(this.homePatternManager.get_meshList());if(t.length>0){if(this.currentClickMesh&&(this.isOpen?(this.currentClickMesh.material.emissive.setHex(6881537),this.currentClickMesh.material.color.set(this.currentClickMesh.currentColor)):this.currentClickMesh.material.emissive.setHex(0)),this.currentClickMesh=t[0].object,this.isOpen?(this.currentClickMesh.currentColor=this.currentClickMesh.material.color.getHex(),this.currentClickMesh.material.emissive.setHex(0),this.currentClickMesh.material.color.set(5363808)):this.currentClickMesh.material.emissive.setHex(16711680),this.currentClickMesh.brief||this.currentClickMesh.households){var i=this.currentClickMesh.brief?JSON.parse(this.currentClickMesh.brief):"";this.briefView(i,this.currentClickMesh.households,this.currentClickMesh.name)}}else this.currentClickMesh&&(this.isOpen?(this.currentClickMesh.material.emissive.setHex(6881537),this.currentClickMesh.material.color.set(this.currentClickMesh.currentColor)):this.currentClickMesh.material.emissive.setHex(0)),this.currentClickMesh=null;this.render()}}},{key:"onMouseDown",value:function(){this.isOnclick=!0}},{key:"onMouseMove",value:function(e){this.mouse.x=(e.clientX-380)/this.view.offsetWidth*2-1,this.mouse.y=-e.clientY/this.view.offsetHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var t=this.raycaster.intersectObjects(this.homePatternManager.get_meshList());t.length>0&&t[0].object!=this.currentClickMesh?(this.currentMesh&&this.currentMesh!=this.currentClickMesh&&this.currentMesh.material.emissive.setHex(this.currentMesh.currentHex),this.currentMesh=t[0].object,this.tag(this.currentMesh.name,e),this.currentMesh.currentHex=this.currentMesh.material.emissive.getHex(),this.currentMesh.material.emissive.setHex(16711680)):(this.currentMesh&&this.currentMesh!=this.currentClickMesh&&this.currentMesh.material.emissive.setHex(this.currentMesh.currentHex),this.currentMesh=null),this.isOnclick=!1,this.render()}},{key:"initLight",value:function(){this.hemiLight=new THREE.HemisphereLight(16777215,16777215,.29),this.hemiLight.color.setHSL(.6,1,.6),this.hemiLight.groundColor.setHSL(.095,1,.75),this.hemiLight.position.set(0,50,0),this.scene.add(this.hemiLight),this.dirLight=new THREE.DirectionalLight(16777215,.73),this.dirLight.color.setHSL(.1,1,.95),this.dirLight.position.set(0,1,1),this.dirLight.position.multiplyScalar(30),this.scene.add(this.dirLight),this.dirLight1=new THREE.DirectionalLight(16777215,.75),this.dirLight1.color.setHSL(.1,1,.95),this.dirLight1.position.set(0,1,-1),this.dirLight1.position.multiplyScalar(30),this.scene.add(this.dirLight1),this.dirLight.shadow.mapSize.width=2048,this.dirLight.shadow.mapSize.height=2048,this.dirLight.shadow.bias=-1e-4,this.ambient=new THREE.AmbientLight(16777215,.2),this.scene.add(this.ambient)}},{key:"openHot",value:function(e){if(this.isOpen=e,e){for(var t=0;t<this.models.length;t++)if(this.models[t][0]){if(this.models[t][0].hotLevel)switch(this.models[t][0].hotLevel){case 1:this.models[t][0].material.color.set(16774645),this.models[t][0].material.emissive.set(6881537);break;case 2:this.models[t][0].material.color.set(16742520),this.models[t][0].material.emissive.set(6881537);break;case 3:this.models[t][0].material.color.set(16711680),this.models[t][0].material.emissive.set(6881537)}if(this.models[t][0].childComponent)for(var i=0;i<this.models[t][0].childComponent.length;i++)if(this.models[t][0].childComponent[i]&&this.models[t][0].childComponent[i].hotLevel)switch(this.models[t][0].childComponent[i].hotLevel){case 1:this.models[t][0].childComponent[i].material.color.set(16774645),this.models[t][0].childComponent[i].material.emissive.set(6881537);break;case 2:this.models[t][0].childComponent[i].material.color.set(16742520),this.models[t][0].childComponent[i].material.emissive.set(6881537);break;case 3:this.models[t][0].childComponent[i].material.color.set(16711680),this.models[t][0].childComponent[i].material.emissive.set(6881537)}}}else for(var r=0;r<this.models.length;r++)if(this.models[r][0]&&(this.models[r][0].hotLevel&&(this.models[r][0].material.color.set(16777215),this.models[r][0].material.emissive.set(0)),this.models[r][0].childComponent))for(var a=0;a<this.models[r][0].childComponent.length;a++)this.models[r][0].childComponent[a]&&this.models[r][0].childComponent[a].hotLevel&&(this.models[r][0].childComponent[a].material.color.set(16777215),this.models[r][0].childComponent[a].material.emissive.set(0));this.render()}},{key:"initModel",value:function(){function e(e,i,r,a,n){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,r,a,n){var s,o,_,l,d,c=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.models[t]=[],s=void 0,!/(.drc|.bf)$/.test(r.toLowerCase())){e.next=9;break}return e.next=5,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){c.drcLoad.load(r,function(t){e(t)})});case 5:o=e.sent,s=new THREE.Mesh(o,new THREE.MeshPhongMaterial),e.next=12;break;case 9:return e.next=11,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){c.load.load(r,function(t){e(t)})});case 11:s=e.sent;case 12:s.isMesh?(s.castShadow=!0,s.receiveShadow=!0):s.traverse(function(e){e.geometry&&(e.geometry.attributes.uv2=e.geometry.attributes.uv),e.castShadow=!0,e.receiveShadow=!0,c.testModels.push(e),e.isMesh&&c.ModelsChild.push(e)}),s.brief=n.brief,s.name=n.name,s.households=n.households,s.hotLevel=n.hotLevel,e.t0=s.hotLevel,e.next=1===e.t0?20:2===e.t0?23:3===e.t0?26:29;break;case 20:return s.material.color.set(16774645),s.material.emissive.set(6881537),e.abrupt("break",29);case 23:return s.material.color.set(16742520),s.material.emissive.set(6881537),e.abrupt("break",29);case 26:return s.material.color.set(16711680),s.material.emissive.set(6881537),e.abrupt("break",29);case 29:if(this.models[t][i]=s,void 0===this.selectedMaterial[t]){e.next=44;break}e.t1=s.hotLevel,e.next=1===e.t1?34:2===e.t1?37:3===e.t1?40:43;break;case 34:return this.material[t][this.selectedMaterial[t]].color.set(16774645),this.material[t][this.selectedMaterial[t]].emissive.set(6881537),e.abrupt("break",43);case 37:return this.material[t][this.selectedMaterial[t]].color.set(16742520),this.material[t][this.selectedMaterial[t]].emissive.set(6881537),e.abrupt("break",43);case 40:return this.material[t][this.selectedMaterial[t]].color.set(16711680),this.material[t][this.selectedMaterial[t]].emissive.set(6881537),e.abrupt("break",43);case 43:this.setMaterial(t,this.material[t][this.selectedMaterial[t]]);case 44:if(s.traverse(function(e){e.isMesh&&c.homePatternManager.pushMeshList(e)}),!a){e.next=55;break}this.models[t][i].childComponent=[],_=void 0,l=__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(r){var n,s;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/(.drc|.bf)$/.test(a[r].model.toLowerCase())){e.next=7;break}return e.next=3,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){c.drcLoad.load("/upload/"+a[r].model,function(t){e(t)})});case 3:n=e.sent,_=new THREE.Mesh(n,new THREE.MeshPhongMaterial({color:0})),e.next=10;break;case 7:return e.next=9,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){c.load.load("/upload/"+a[r].model,function(t){e(t)})});case 9:_=e.sent;case 10:if(_.isMesh?(_.castShadow=!0,_.receiveShadow=!0):_.traverse(function(e){e.geometry&&(e.geometry.attributes.uv2=e.geometry.attributes.uv),e.castShadow=!0,e.receiveShadow=!0}),_.brief=a[r].brief,_.name=a[r].name,_.households=a[r].households,_.hotLevel=a[r].hotLevel,s=c.currentMaterial[_.tag],!a[r].fabric){e.next=20;break}return e.next=19,c.getMaterial(JSON.parse(a[r].fabric.material),a[r].repeat||1);case 19:s=e.sent;case 20:if(!s){e.next=34;break}e.t0=_.hotLevel,e.next=1===e.t0?24:2===e.t0?27:3===e.t0?30:33;break;case 24:return s.color.set(16774645),s.emissive.set(6881537),e.abrupt("break",33);case 27:return s.color.set(16742520),s.emissive.set(6881537),e.abrupt("break",33);case 30:return s.color.set(16711680),s.emissive.set(6881537),e.abrupt("break",33);case 33:_.isMesh?(_.material=s,_.material.needsUpdate=!0):_.traverse(function(e){e.isMesh&&(e.material=s,e.material.needsUpdate=!0)});case 34:c.group.add(_),c.models[t][i].childComponent.push(_);case 36:case"end":return e.stop()}},e,c)}),d=0;case 50:if(!(d<a.length)){e.next=55;break}return e.delegateYield(l(d),"t2",52);case 52:d++,e.next=50;break;case 55:this.group.add(s),this.render();case 57:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadModel",value:function(){function e(e,i,r,a,n,s){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,r,a,n,s){var o,_,l,d,c,h,u,m,b,p=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.models[t]||(this.models[t]=[]),!this.models[t][i]){e.next=6;break}for(o=0;o<this.models[t].length;o++)if(this.models[t][o]&&(this.models[t][o].visible=o===i,this.models[t][o].childComponent))for(_=0;_<this.models[t][o].childComponent.length;_++)this.models[t][o].childComponent[_].visible=o===i;this.render(),e.next=39;break;case 6:if(l=void 0,!/(.drc|.bf)$/.test(r.toLowerCase())){e.next=14;break}return e.next=10,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){p.drcLoad.load(r,function(t){e(t)})});case 10:d=e.sent,l=new THREE.Mesh(d,new THREE.MeshPhongMaterial),e.next=17;break;case 14:return e.next=16,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){p.load.load(r,function(t){e(t)})});case 16:l=e.sent;case 17:for(l.isMesh?(l.castShadow=!0,l.receiveShadow=!0):l.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,e.geometry&&(e.geometry.attributes.uv2=e.geometry.attributes.uv),p.testModels.push(e),e.isMesh&&p.ModelsChild.push(e)}),c=0;c<this.models[t].length;c++)if(this.models[t][c]&&(this.models[t][c].visible=!1,this.models[t][c].childComponent))for(h=0;h<this.models[t][c].childComponent.length;h++)this.models[t][c].childComponent[h].visible=c===i,this.models[t][c].childComponent[h].tag;if(l.brief=n.brief,l.name=n.name,l.households=n.households,l.hotLevel=n.hotLevel,this.models[t][i]=l,s&&this.loadPattern(t,i,s),void 0!==this.selectedMaterial[t]&&this.setMaterial(t,this.material[t][this.selectedMaterial[t]]),this.group.add(l),l.traverse(function(e){e.isMesh&&p.homePatternManager.pushMeshList(e)}),!a){e.next=38;break}this.models[t][i].childComponent=[],u=void 0,m=__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(r){var n,s;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/(.drc|.bf)$/.test(a[r].model.toLowerCase())){e.next=7;break}return e.next=3,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){p.drcLoad.load("/upload/"+a[r].model,function(t){e(t)})});case 3:n=e.sent,u=new THREE.Mesh(n,new THREE.MeshPhongMaterial),e.next=10;break;case 7:return e.next=9,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){p.load.load("/upload/"+a[r].model,function(t){e(t)})});case 9:u=e.sent;case 10:if(u.isMesh?(u.castShadow=!0,u.receiveShadow=!0):u.traverse(function(e){e.geometry&&(e.geometry.attributes.uv2=e.geometry.attributes.uv),e.castShadow=!0,e.receiveShadow=!0}),u.brief=a[r].brief,u.name=a[r].name,u.households=a[r].households,u.hotLevel=a[r].hotLevel,s=void 0,!a[r].fabric){e.next=20;break}return e.next=19,p.getMaterial(JSON.parse(a[r].fabric.material),a[r].repeat||1);case 19:s=e.sent;case 20:s&&(u.isMesh?(u.material=s,u.material.needsUpdate=!0):u.traverse(function(e){e.isMesh&&(e.material=s,e.material.needsUpdate=!0)})),p.group.add(u),p.models[t][i].childComponent.push(u);case 23:case"end":return e.stop()}},e,p)}),b=0;case 33:if(!(b<a.length)){e.next=38;break}return e.delegateYield(m(b),"t0",35);case 35:b++,e.next=33;break;case 38:this.render();case 39:case"end":return e.stop()}},e,this)}));return e}()},{key:"initGroupMaterial",value:function(){function e(e,i,r,a){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,r,a){var n,s,o,_=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMaterial(r,a);case 2:for(this.material[t+i]=e.sent,this.currentMaterial[i]=this.material[t+i],this.changeGroupFabricRepeat(t,i,a),n=0;n<this.models.length;n++)if(this.models[n])for(s=0;s<this.models[n].length;s++)if(this.models[n][s]&&this.models[n][s].tag===i&&(this.models[n][s].isMesh?this.models[n][s].material=this.material[t+i]:this.models[n][s].traverse(function(e){e.isMesh&&(e.material=_.material[t+i])})),this.models[n][s]&&this.models[n][s].childComponent)for(o=0;o<this.models[n][s].childComponent.length;o++)this.models[n][s].childComponent[o].tag===i&&(this.models[n][s].childComponent[o].isMesh?this.models[n][s].childComponent[o].material=this.material[t+i]:this.models[n][s].childComponent[o].traverse(function(e){e.isMesh&&(e.material=_.material[t+i])}));this.material[t+i].repeat=a,this.render();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadGroupMaterial",value:function(){function e(e,i,r,a){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,r,a){var n,s,o,_=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.material[t+i]){e.next=4;break}return e.next=3,this.getMaterial(r,a);case 3:this.material[t+i]=e.sent;case 4:for(this.currentMaterial[i]=this.material[t+i],this.material[t+i].repeat!==a&&this.changeGroupFabricRepeat(t,i,a),n=0;n<this.models.length;n++)if(this.models[n])for(s=0;s<this.models[n].length;s++)if(this.models[n][s]&&this.models[n][s].tag===i&&(this.models[n][s].isMesh?this.models[n][s].material=this.material[t+i]:this.models[n][s].traverse(function(e){e.isMesh&&(e.material=_.material[t+i])})),this.models[n][s]&&this.models[n][s].childComponent)for(o=0;o<this.models[n][s].childComponent.length;o++)this.models[n][s].childComponent[o].tag===i&&(this.models[n][s].childComponent[o].isMesh?this.models[n][s].childComponent[o].material=this.material[t+i]:this.models[n][s].childComponent[o].traverse(function(e){e.isMesh&&(e.material=_.material[t+i])}));this.material[t+i].repeat=a,this.render();case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"initMaterial",value:function(){function e(e,i,r,a){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,r,a){return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.material[t]=[],e.next=3,this.getMaterial(r,a);case 3:if(this.material[t][i]=e.sent,this.material[t][i].repeat=a,!this.models[t][i]){e.next=18;break}e.t0=this.models[t][i].hotLevel,e.next=1===e.t0?9:2===e.t0?12:3===e.t0?15:18;break;case 9:return this.material[t][i].color.set(16774645),this.material[t][i].emissive.set(6881537),e.abrupt("break",18);case 12:return this.material[t][i].color.set(16742520),this.material[t][i].emissive.set(6881537),e.abrupt("break",18);case 15:return this.material[t][i].color.set(16711680),this.material[t][i].emissive.set(6881537),e.abrupt("break",18);case 18:this.setMaterial(t,this.material[t][i]),this.selectedMaterial[t]=i,this.render();case 21:case"end":return e.stop()}},e,this)}));return e}()},{key:"initEnv",value:function(){function e(e,i){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i){return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnv=t,!t){e.next=7;break}if(this.curEnv=i,this.envMaps[i]){e.next=7;break}return e.next=6,this.loadEnvMap(this.urls[i]);case 6:this.envMaps[i]=e.sent;case 7:this.render();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadMaterial",value:function(){function e(e,i,r,a){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,r,a){var n,s,o;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(clearInterval(this.changeOpacity),this.changeOpacity=null,n=r.opacity,this.material[t]||(this.material[t]=[]),!this.material[t][i]){e.next=8;break}(this.material[t][i].repeat||a)&&this.changeRepeat(t,i,a),e.next=11;break;case 8:return e.next=10,this.getMaterial(r,a);case 10:this.material[t][i]=e.sent;case 11:this.material[t][i].repeat=a,this.selectedMaterial[t]||this.setMaterial(t,this.material[t][i]),void 0!==this.selectedMaterial[t]&&i!==this.selectedMaterial[t]?(this.setMaterial(t,this.material[t][i]),s=this.material[t][i].transparent,this.material[t][i].transparent=!0,this.material[t][i].opacity=.8,o=this,this.changeOpacity=setInterval(function(){o.material[t][i].opacity+=.1,o.material[t][i].opacity>=1&&(o.material[t][i].transparent=s,o.material[t][i].opacity=n,clearInterval(o.changeOpacity),o.changeOpacity=null),o.render()},150)):this.material[t][i].opacity=n,this.selectedMaterial[t]=i,this.render();case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadGlobalMaterial",value:function(){function e(e,i,r){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,r){var a,n,s,o;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.globalMaterial[t]){e.next=5;break}(this.globalMaterial[t].repeat||r)&&this.changeGlobalRepeat(t,r),this.setGlobalMaterial(this.globalMaterial[t]),e.next=9;break;case 5:return e.next=7,this.getMaterial(JSON.parse(i),r);case 7:this.globalMaterial[t]=e.sent,this.setGlobalMaterial(this.globalMaterial[t]);case 9:this.preGlobalMaterial!==this.globalMaterial[t]&&(a=this.globalMaterial[t].transparent,n=this.globalMaterial[t].opacity,this.globalMaterial[t].transparent=!0,this.globalMaterial[t].opacity=.8,s=this,o=setInterval(function(){s.globalMaterial[t].opacity+=.1,s.globalMaterial[t].opacity>=1&&(s.globalMaterial[t].transparent=a,s.globalMaterial[t].opaciyt=n,clearInterval(o),o=null),s.render()},150),this.globalMaterial[t].repeat=r,this.preGlobalMaterial=this.globalMaterial[t],this.currentMaterial=this.globalMaterial[t],this.render());case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"getMaterial",value:function(){function e(e,i){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i){var r,a;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={side:THREE.DoubleSide},e.t0=__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.keys(t);case 2:if((e.t1=e.t0()).done){e.next=18;break}if(a=e.t1.value,!t.hasOwnProperty(a)||!t[a]||"#000"===t[a]){e.next=16;break}if(!a.includes("map")&&!a.includes("Map")){e.next=15;break}if(!a.includes("aoMapIntensity")){e.next=10;break}r[a]=t[a],e.next=13;break;case 10:return e.next=12,this.loadTexture(t[a],i);case 12:r[a]=e.sent;case 13:e.next=16;break;case 15:r[a]=t[a];case 16:e.next=2;break;case 18:return this.isEnv&&(r.envMap=this.envMaps[this.curEnv],r.envMapIntensity=this.envMapIntensity),e.abrupt("return",new THREE.MeshPhysicalMaterial(r));case 20:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateMaterialColor",value:function(e,t,i,r){this.material[e][t]&&"#000"!==r&&(this.material[e][t][i]=new THREE.Color(r)),this.render()}},{key:"updateMaterialNumber",value:function(e,t,i,r){this.material[e][t]&&(this.material[e][t][i]=r),this.render()}},{key:"loadEnvMap",value:function(e){var t=this;return this.loader=(new THREE.CubeTextureLoader).setPath("/upload/"),new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(i,r){t.loader.load(e,function(e){i(e)})})}},{key:"loadTexture",value:function(e,t){var i=this;return new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(r,a){i.textureLoad.load("/upload/"+e,function(e){e.wrapS=e.wrapT=THREE.RepeatWrapping,e.repeat.set(t,t),r(e)})})}},{key:"inspectMobile",value:function(){this.mobile=!0}},{key:"changeRepeat",value:function(e,t,i){if(this.material[e]&&this.material[e][t]&&this.material[e][t].repeat!==i){var r=this.material[e][t];r.map&&r.map.repeat.set(i,i),r.normalMap&&r.normalMap.repeat.set(i,i),r.specularMap&&r.specularMap.repeat.set(i,i),r.lightMap&&r.lightMap.repeat.set(i,i),r.needsUpdate=!0,this.render()}}},{key:"changeChildFabricRepeat",value:function(e,t,i,r){if(this.models[e]&&this.models[e][t]&&this.models[e][t].childComponent&&this.models[e][t].childComponent[i]){var a=this.models[e][t].childComponent[i].material;a.map&&a.map.repeat.set(r,r),a.normalMap&&a.normalMap.repeat.set(r,r),a.specularMap&&a.specularMap.repeat.set(r,r),a.lightMap&&a.lightMap.repeat.set(r,r),a.needsUpdate=!0,this.render()}}},{key:"changeBloom",value:function(e,t){this.bloomPass[e]=t,this.render()}},{key:"changeShadow",value:function(e){this.dirLight.castShadow=e,this.render()}},{key:"changeposition",value:function(e,t,i,r){switch(e){case 1:this.spotLight.position.set(t,i,r);break;case 2:this.hemisphereLight.position.set(t,i,r);break;case 3:this.pointLight.position.set(t,i,r)}this.render()}},{key:"changeLightBias",value:function(e){this.dirLight.shadow.bias=e,this.render()}},{key:"initBulindindBg",value:function(){function e(){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(){var t,i=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){i.textureLoad.load(__webpack_require__(680),function(t){e(t)})});case 2:t=e.sent,this.scene.background=t;case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"initEnv",value:function(){function e(e,i){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i){return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnv=t,!t){e.next=7;break}if(this.curEnv=i,this.envMaps[i]){e.next=7;break}return e.next=6,this.loadEnvMap(this.urls[i]);case 6:this.envMaps[i]=e.sent;case 7:this.render();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeBackground",value:function(){function e(e){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t){var i=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=t){e.next=9;break}if(this.isSkyBox=!0,this.envMaps[this.curEnv]){e.next=6;break}return e.next=5,this.loadEnvMap(this.urls[this.curEnv]);case 5:this.envMaps[this.curEnv]=e.sent;case 6:this.scene.background=this.envMaps[this.curEnv],e.next=15;break;case 9:if(this.isSkyBox=!1,this.bgController[t]){e.next=14;break}return e.next=13,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,r){i.textureLoad.load(__webpack_require__(634)("./background"+t+".jpg"),function(t){e(t)})});case 13:this.bgController[t]=e.sent;case 14:this.scene.background=this.bgController[t];case 15:this.render();case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeEnvMaps",value:function(){function e(e,i){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i){return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnv=t,!t){e.next=8;break}if(this.curEnv=i,this.envMaps[i]){e.next=7;break}return e.next=6,this.loadEnvMap(this.urls[i]);case 6:this.envMaps[i]=e.sent;case 7:this.isSkyBox&&(this.scene.background=this.envMaps[this.curEnv]);case 8:this.updateModels(),this.render();case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeEnvMapIntensity",value:function(e){this.envMapIntensity=e,this.updateModels()}},{key:"updateModels",value:function(){if(this.isEnv)for(var e in this.material)for(var t=0;t<this.material[e].length;t++)this.material[e][t].envMap=this.envMaps[this.curEnv],this.material[e][t].envMapIntensity=this.envMapIntensity,this.material[e][t].needsUpdate=!0;else for(var i in this.material)for(var r=0;r<this.material[i].length;r++)this.material[i][r].envMap=null,this.material[i][r].envMapIntensity=0,this.material[i][r].needsUpdate=!0;for(var a=0;a<this.models.length;a++)this.selectedMaterial[a]&&this.material[a][this.selectedMaterial[a]]&&this.setMaterial(a,this.material[a][this.selectedMaterial[a]]);this.render()}},{key:"changeExposure",value:function(e){this.renderer.toneMappingExposure=Math.pow(e,.1),this.render()}},{key:"changeClothesLight",value:function(e,t){switch(e){case"spot":this.dirLight.intensity=t;break;case"hemisphere":this.hemiLight.intensity=t;break;case"point":this.dirLight1.intensity=t;break;case"ambient":this.ambient.intensity=t;break;case"spotLight1":this.spotLight1.intensity=t}this.render()}},{key:"changeGroupFabricRepeat",value:function(e,t,i){if(this.material[e+t]&&this.material[e+t].repeat!==i){var r=this.material[e+t];r.map&&r.map.repeat.set(i,i),r.normalMap&&r.normalMap.repeat.set(i,i),r.specularMap&&r.specularMap.repeat.set(i,i),r.lightMap&&r.lightMap.repeat.set(i,i),r.needsUpdate=!0,this.render()}}},{key:"shadowSwitch",value:function(e,t){for(var i=0;i<this.testModels.length;i++)this.models[e]&&this.models[e][0]===this.testModels[i]&&(this.testModels[i+1].castShadow=t);this.render()}},{key:"changeGlobalRepeat",value:function(e,t){if(this.globalMaterial[e]&&this.globalMaterial[e].repeat!==t){var i=this.globalMaterial[e];i.map&&i.map.repeat.set(t,t),i.normalMap&&i.normalMap.repeat.set(t,t),i.specularMap&&i.specularMap.repeat.set(t,t),i.lightMap&&i.lightMap.repeat.set(t,t),i.needsUpdate=!0,this.render()}}},{key:"setMaterial",value:function(e,t){if(this.models[e])for(var i=0;i<this.models[e].length;i++)this.models[e][i]&&(this.models[e][i].isMesh?(this.models[e][i].material=t,this.models[e][i].material.needsUpdate=!0):this.models[e][i].traverse(function(e){e.isMesh&&(e.material=t,e.material.needsUpdate=!0)}))}},{key:"setGlobalMaterial",value:function(e){if(this.models.length>0)for(var t=0;t<this.models.length;t++)this.models[t]&&this.models[t].length&&this.setMaterial(t,e)}},{key:"loadPattern",value:function(e,t,i){i&&(i=JSON.parse(i),this.patternManager.drawDefault(this.models[e][t],this.models[e][t].children[i.mesh],new THREE.Vector3(i.position.x,i.position.y,i.position.z),new THREE.Euler(i.rotation.x,i.rotation.y,i.rotation.z),new THREE.Vector3(i.dimensions.x,i.dimensions.y,i.dimensions.z)))}},{key:"homeBeginPattern",value:function(){function e(e,i){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i){var r;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=JSON.parse(i),i.depthTest=!0,i.depthWrite=!1,i.polygonOffset=!0,i.polygonOffsetFactor=-1,e.next=7,this.getMaterial(i,1);case 7:r=e.sent,console.log(r),this.homePatternManager.setEnable(!0),this.homePatternManager.changeMaterial(t,r);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"homeScalePattern",value:function(e){this.homePatternManager.scalePattern(e)}},{key:"homeEndPattern",value:function(){this.homePatternManager.setEnable(!1)}},{key:"homeRemovePattern",value:function(){this.homePatternManager.removePattern()}},{key:"beginPattern",value:function(e,t){this.patternManager.setEnable(!0,this.models[e][t])}},{key:"endPattern",value:function(e,t){this.patternManager.setEnable(!1,this.models[e][t])}},{key:"getPatternParams",value:function(e){this.patterns=[];for(var t=0;t<this.models.length;t++)if(this.models[t])for(var i=0;i<this.models[t].length;i++)if(this.models[t][i].pattern){var r=this.models[t][i].pattern.params;this.patterns.push({id:e[t].components[i].id,params:{position:{x:r.position.x,y:r.position.y,z:r.position.z},rotation:{x:r.rotation.x,y:r.rotation.y,z:r.rotation.z},dimensions:{x:r.dimensions.x,y:r.dimensions.y,z:r.dimensions.z},mesh:r.index}})}else this.patterns.push({id:e[t].components[i].id,params:void 0});return this.patterns}},{key:"scalePattern",value:function(e){this.patternManager.scalePattern(e)}},{key:"removePattern",value:function(){this.patternManager.removePattern()}},{key:"loadPatternMaterial",value:function(){function e(e){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t){var i;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMaterial(JSON.parse(t),1);case 2:i=e.sent,this.patternManager.changeMaterial(i);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeTarget",value:function(e,t){this.models[e][t]||this.waitLoad.push({pIndex:e,cIndex:t,fun:function(){}})}},{key:"setModelRepeat",value:function(e,t){e.map&&e.map.repeat.set(t,t),e.normalMap&&e.normalMap.repeat.set(t,t),e.specularMap&&e.specularMap.repeat.set(t,t),e.lightMap&&e.lightMap.repeat.set(t,t),e.needsUpdate=!0}},{key:"initMote",value:function initMote(mote){var _this10=this,child=mote.child;mote.models=[];for(var _loop3=function _loop3(j){/(.drc|.bf)$/.test(child[j].model)?_this10.drcLoad.load("/upload/"+child[j].model,function(){var _ref16=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function _callee16(geometry){var cbm,_material,materials,repeatString,repeat,materialinfo;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function _callee16$(_context18){for(;;)switch(_context18.prev=_context18.next){case 0:if(cbm=new THREE.Mesh(geometry,new THREE.MeshPhongMaterial),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0):cbm.traverse(function(e){e.receiveShadow=!0,e.castShadow=!0}),!child[j].material){_context18.next=14;break}return _context18.next=5,_this10.getMaterial(JSON.parse(child[j].material),1);case 5:_material=_context18.sent,_this10.materials[child[j].id]=_material,_this10.materials[child[j].id].config=child[j].material||child[j].fabric.material,materials=_this10.materials[child[j].id].config,repeatString=eval("("+materials+")"),repeat=repeatString.repeat,materialinfo=_this10.materials[child[j].id],_this10.setModelRepeat(materialinfo,repeat),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0,cbm.material=_material,cbm.material.needsUpdate=!0):cbm.traverse(function(e){e.isMesh&&(e.receiveShadow=!0,e.castShadow=!0,e.material=_material,e.material.needsUpdate=!0)});case 14:_this10.group.add(cbm),mote.models.push(cbm),_this10.render();case 17:case"end":return _context18.stop()}},_callee16,_this10)}));return function(e){return _ref16.apply(this,arguments)}}()):_this10.load.load("/upload/"+child[j].model,function(){var _ref17=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function _callee17(cbm){var _material2,materials,repeatString,repeat,materialinfo;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function _callee17$(_context19){for(;;)switch(_context19.prev=_context19.next){case 0:if(cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0):cbm.traverse(function(e){e.receiveShadow=!0,e.castShadow=!0}),!child[j].material){_context19.next=13;break}return _context19.next=4,_this10.getMaterial(JSON.parse(child[j].material),1);case 4:_material2=_context19.sent,_this10.materials[child[j].id]=_material2,_this10.materials[child[j].id].config=child[j].material||child[j].fabric.material,materials=_this10.materials[child[j].id].config,repeatString=eval("("+materials+")"),repeat=repeatString.repeat,materialinfo=_this10.materials[child[j].id],_this10.setModelRepeat(materialinfo,repeat),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0,cbm.material=_material2,cbm.material.needsUpdate=!0):cbm.traverse(function(e){e.isMesh&&(e.receiveShadow=!0,e.castShadow=!0,e.material=_material2,e.material.needsUpdate=!0)});case 13:_this10.group.add(cbm),mote.models.push(cbm),_this10.render();case 16:case"end":return _context19.stop()}},_callee17,_this10)}));return function(e){return _ref17.apply(this,arguments)}}())},j=0;j<child.length;j++)_loop3(j);this.motes[mote.id]=mote,this.selectedMotes=mote.id}},{key:"loadMote",value:function loadMote(mote){var _this11=this;if(this.motes[mote.id]){if(this.selectedMotes!==mote.id){for(var i=0;i<this.motes[this.selectedMotes].models.length;i++)this.motes[this.selectedMotes].models[i].visible=!1;for(var _i5=0;_i5<this.motes[mote.id].models.length;_i5++)this.motes[mote.id].models[_i5].visible=!0;this.render()}}else!function(){if(_this11.motes[_this11.selectedMotes])for(var _i6=0;_i6<_this11.motes[_this11.selectedMotes].models.length;_i6++)_this11.motes[_this11.selectedMotes].models[_i6].visible=!1;var child=mote.child;mote.models=[];for(var _loop4=function _loop4(j){/(.drc|.bf)$/.test(child[j].model)?_this11.drcLoad.load("/upload/"+child[j].model,function(){var _ref18=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function _callee18(geometry){var cbm,_material3,materials,repeatString,repeat,materialinfo;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function _callee18$(_context20){for(;;)switch(_context20.prev=_context20.next){case 0:if(cbm=new THREE.Mesh(geometry,new THREE.MeshPhongMaterial),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0):cbm.traverse(function(e){e.receiveShadow=!0,e.castShadow=!0}),!child[j].material){_context20.next=14;break}return _context20.next=5,_this11.getMaterial(JSON.parse(child[j].material),1);case 5:_material3=_context20.sent,_this11.materials[child[j].id]=_material3,_this11.materials[child[j].id].config=child[j].material||child[j].fabric.material,materials=_this11.materials[child[j].id].config,repeatString=eval("("+materials+")"),repeat=repeatString.repeat,materialinfo=_this11.materials[child[j].id],_this11.setModelRepeat(materialinfo,repeat),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0,cbm.material=_material3,cbm.material.needsUpdate=!0):cbm.traverse(function(e){e.isMesh&&(e.receiveShadow=!0,e.castShadow=!0,e.material=_material3,e.material.needsUpdate=!0)});case 14:_this11.group.add(cbm),mote.models.push(cbm),_this11.render();case 17:case"end":return _context20.stop()}},_callee18,_this11)}));return function(e){return _ref18.apply(this,arguments)}}()):_this11.load.load("/upload/"+child[j].model,function(){var _ref19=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function _callee19(cbm){var _material4,materials,repeatString,repeat,materialinfo;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function _callee19$(_context21){for(;;)switch(_context21.prev=_context21.next){case 0:if(cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0):cbm.traverse(function(e){e.receiveShadow=!0,e.castShadow=!0}),!child[j].material){_context21.next=13;break}return _context21.next=4,_this11.getMaterial(JSON.parse(child[j].material),1);case 4:_material4=_context21.sent,_this11.materials[child[j].id]=_material4,_this11.materials[child[j].id].config=child[j].material||child[j].fabric.material,materials=_this11.materials[child[j].id].config,repeatString=eval("("+materials+")"),repeat=repeatString.repeat,materialinfo=_this11.materials[child[j].id],_this11.setModelRepeat(materialinfo,repeat),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0,cbm.material=_material4,cbm.material.needsUpdate=!0):cbm.traverse(function(e){e.isMesh&&(e.receiveShadow=!0,e.castShadow=!0,e.material=_material4,e.material.needsUpdate=!0)});case 13:_this11.group.add(cbm),mote.models.push(cbm),_this11.render();case 16:case"end":return _context21.stop()}},_callee19,_this11)}));return function(e){return _ref19.apply(this,arguments)}}())},j=0;j<child.length;j++)_loop4(j);_this11.motes[mote.id]=mote}();this.selectedMotes=mote.id}},{key:"inertiaEnd",value:function(){var e=this;this.inertia=setInterval(function(){e.controls.update()},30),this.clearInert=setTimeout(function(){clearInterval(e.inertia)},3e3)}},{key:"inertiaStart",value:function(){clearInterval(this.inertia),clearInterval(this.clearInert)}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}}]),Editor}();__webpack_exports__.a=Editor},680:function(e,t,i){e.exports=i.p+"img/buildingbg.7a444d1.jpg"},721:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(78),a=i.n(r),n=i(668),s=i(104);t.default={head:function(){return{title:"百丰科技-3D展示台",meta:[{hid:"keyword",name:"keyword",content:"场景编辑器,百丰网络科技有限公司,3d"},{hid:"description",name:"description",content:"场景编辑器,百丰网络科技有限公司"}]}},mounted:function(){var e=this;this.$editor=new n.a(document.getElementById("editor"),function(t,i){e.tag=t,e.positionx=i.clientX,e.positiony=i.clientY},function(t,i){if(e.loadding=t,e.progress=i,"100%"==e.progress)for(var r=0;r<e.buildingList.length;r++)e.$editor.shadowSwitch(r,e.buildingList[r].castShadow)},function(t,i,r){e.brief=t,e.household=i,e.flootname=r,e.buildingInfo=!1,e.info=!0}),this.$editor.initBulindindBg(),this.mobile={version:function(){var e=navigator.userAgent;navigator.appVersion;return{mobile:!!e.match(/AppleWebKit.*Mobile.*/)}}()},this.mobile.version.mobile&&this.$editor.inspectMobile(),this.buildingList[0].child_buildings[0].brief&&(this.buildingBrief=JSON.parse(this.buildingList[0].child_buildings[0].brief));for(var t=0;t<this.buildingList.length;t++)this.buildingList.length&&this.$editor.initModel(t,0,"/upload/"+this.buildingList[t].model,this.buildingList[t].child_buildings,this.buildingList[t]),this.buildingList[t].fabrics.length&&this.$editor.initMaterial(t,0,JSON.parse(this.buildingList[t].fabrics[0].material),this.buildingList[t].fabrics[0].building_fabric.repeat||1);this.model&&this.model.child.length&&this.$editor.loadMote(this.model),this.$editor.changeExposure(this.exposure),"object"===a()(JSON.parse(this.light))&&(this.clothesLight=JSON.parse(this.light));for(var i in this.clothesLight)this.$editor.changeClothesLight(i,this.clothesLight[i]);if(this.$editor.changeShadow(this.shadow),this.camera){var r=JSON.parse(this.camera);this.$editor.saveCamera(r)}this.lightBias&&this.$editor.changeLightBias(this.lightBias)},computed:i.i(s.mapState)({data:function(e){return e.buildView.data||[]},model:function(e){return e.buildView.data.model},lightBias:function(e){return e.buildView.data.lightBias},background:function(e){return e.buildView.data.background},camera:function(e){return e.buildView.data.camera},initConfig:function(e){return e.buildView.data.saveConfig},shadow:function(e){return e.buildView.data.shadow||!1},light:function(e){return e.buildView.data.light||1},exposure:function(e){return e.buildView.data.exposure||1},buildingList:function(e){return e.buildView.data.buildings||[]},childBuildingList:function(e){return-1!==e.selectedPart&&e.buildView.data.buildings[e.buildView.selectedPart]?e.buildView.data.buildings[e.buildView.selectedPart].child_buildings:[]}}),fetch:function(e){var t=e.route;return e.store.dispatch("buildView/one",t.params.id)},data:function(){return{initstate:{},flootname:"",room:"",buildingInfo:!0,info:!1,edit:!1,allMaterial:0,allFabric:0,editor:0,clothesLight:{spot:.97,hemisphere:.27,point:.67,ambient:.32},componentbox:-120,materialboxn:-120,buttonmaterialtab:-120,materialboxall:-120,logobox:-80,roomindex:"",progress:"0%",loadding:!0,slidehighlight:0,slidedot:-15,embroideryvalue:0,tag:"",positionx:"",positiony:"",buildingBrief:[],brief:[{label:"楼栋编号",brief:""},{label:"建设年份",brief:""},{label:"管理员姓名（电话）",brief:""},{label:"楼栋实有人口",brief:""},{label:"楼栋出入口数量",brief:""},{label:"楼栋实有车辆数量",brief:""},{label:"出租屋数量",brief:""},{label:"空置房间数量",brief:""},{label:"楼栋电梯数量",brief:""},{label:"楼栋消防栓数量",brief:""},{label:"消防设备数量",brief:""}],household:{},activeName:"1",isHot:!0}},watch:{isHot:function(e){this.$editor.openHot(e)}},methods:{roomnumber:function(e){this.room=this.household[e],this.roomindex=e},saveConfig:function(){this.$store.dispatch("buildView/saveConfig")},toNewPage:function(e){window.location.href=e}}}},750:function(e,t,i){t=e.exports=i(76)(!0),t.push([e.i,"html{font-size:100px}.bf-model{left:0;width:3.8rem}#l-bf-model,.bf-model{position:fixed;top:0;height:100%;border:1px solid #3f98fc;background:#0f205c;-webkit-box-shadow:0 0 30px #009cff inset;box-shadow:inset 0 0 30px #009cff;font-family:PingFang SC;font-size:.16rem}#l-bf-model{right:0;width:3.6rem;padding:.1rem;color:#78ddff}#l-bf-model .l-bf-off{padding:.2rem;font-size:.24rem;color:#78ddff;background:rgba(52,92,177,.3)}.l-bf-list{list-style:none;padding:0;margin:.2rem 0 0;font-size:.14rem}.l-bf-list li{height:.4rem;line-height:.4rem}.l-bf-list li div{width:.9rem;display:inline-block}.l-bf-color{width:2.2rem;height:.15rem;background:#454e6c;display:inline-block}#l-bf-model .title{height:.4rem;line-height:.4rem;background:rgba(52,92,177,.3);font-size:.2rem;padding-left:.2rem;border-top:1px solid #0a478f;border-bottom:1px solid #0a478f}#editor{margin:.1rem}#editor,#part-editor{position:fixed;overflow:hidden;top:0;left:3.82rem;right:3.82rem;bottom:0}#part-editor{border-bottom:1px solid #3f98fc;-webkit-box-shadow:0 0 30px #009cff inset;box-shadow:inset 0 0 30px #009cff;background:#0f205c;border-top:1px solid #3f98fc}#bqy{position:fixed;background-color:#fff;display:inline-block;padding:0 .1rem;height:.32rem;line-height:.3rem;font-size:.12rem;color:#409eff;border-radius:.04rem;-webkit-box-sizing:border-box;box-sizing:border-box;border:.03rem solid rgba(64,158,255,.2);white-space:nowrap}#progress{bottom:0;background:#f7f7f7;background:hsla(0,0%,97%,.9);z-index:100;color:#78ddff}#progress,#progress-box{position:absolute;top:0;left:0;right:0}#progress-box{text-align:center;height:.78rem;margin:auto;bottom:.36rem;font-size:.24rem}#imglogo{width:2rem;height:1rem}#list_info{height:100%}#floor_info,#list_info{color:#78ddff;list-style:none;padding:.1rem .1rem .8rem;margin:0}#bf-title,#floor_info .title,#list_info .title{text-align:center;height:.4rem;padding:.2rem 0;line-height:.4rem;font-size:.24rem;color:#78ddff;background:rgba(52,92,177,.3)}#list_info .title{padding:.1rem 0}#list_info .list_item:nth-child(2){border-top:1px solid #0a478f}#list_info .list_item{background:#152d6f}#list_info .list_item span{height:.35rem;line-height:.35rem}#list_info .list_item span:first-child{display:inline-block;width:50%;text-align:left;padding:0 .2rem;font-weight:700}#list_info .list_item span:nth-child(2){padding-left:10px}#close{position:absolute;bottom:.11rem;width:3.6rem;height:.75rem;line-height:.75rem;text-align:center;background:#152d6f}#close .btn-close,#room_close .btn-close{font-size:.16rem;height:.4rem;background:#0f8bfd;display:inline-block;text-align:center;line-height:.4rem;width:1.5rem;color:#fff;border:0;cursor:pointer}#close .btn-close:hover,#room_close .btn-close:hover{opacity:.7}#floor_info{border-top:1px solid #0a478f;background:rgba(52,92,177,.3);margin:0}#floor_info .list_item{height:.4rem;line-height:.4rem}#floor_info .list_item span:first-child{display:inline-block;width:50%;margin-left:.2rem;font-weight:700}#floor_info .list_item span:nth-child(2){padding-left:10px}#floor_info{height:1.2rem;overflow-y:auto}::-webkit-scrollbar-track{border-radius:10px;background-color:#17272a;height:1.5rem}::-webkit-scrollbar-thumb{border-radius:2px;background-color:#354346;height:.5rem}::-webkit-scrollbar{width:6px;height:6px}#floor_info,#list_number,#room_info{scrollbar-base-color:#072d71;scrollbar-3dlight-color:#0a2363;scrollbar-highlight-color:#0a2363;scrollbar-track-color:#0a2363;scrollbar-arrow-color:#0a2363;scrollbar-shadow-color:#0a2363;scrollbar-dark-shadow-color:#072d71}#room_info{height:6.5rem;overflow-y:auto;margin:0;border-top:1px solid #0a478f;color:#78ddff;list-style:none;padding:0}#room_info .active{background:rgba(52,92,177,.3)}#room_info .room_item{height:.4rem;padding-left:.3rem;line-height:.4rem;cursor:pointer;-webkit-transition:all .5s;-o-transition:all .5s;transition:all .5s}#room_close,#room_info .room_item:hover{background:rgba(52,92,177,.3)}#room_close{position:absolute;bottom:.11rem;width:3.6rem;height:.75rem;line-height:.75rem;text-align:center}#room_close a,#room_close button{height:.4rem;line-height:.4rem;width:1.5rem;background:#0092ff;border:0}#list_number{height:6.8rem;list-style:none;padding:0 .1rem;margin:0;font-size:.14rem;overflow-y:auto}#room .title{text-align:center;padding:.05rem 0}#list_number .info_list div{padding:.05rem .6rem}","",{version:3,sources:["/var/gdpublic/gdpublic/pages/building/_id.vue"],names:[],mappings:"AACA,KACK,eAAiB,CACrB,AACD,UAGK,OAAQ,AACR,YAAc,CAQlB,AACD,sBAZK,eAAe,AACf,MAAO,AAGP,YAAa,AACb,yBAA0B,AAC1B,mBAAoB,AACpB,0CAA2C,AACnC,kCAAmC,AAC3C,wBAAyB,AACzB,gBAAkB,CAgBtB,AAdD,YAGK,QAAS,AACT,aAAc,AAQd,cAAe,AACf,aAAe,CACnB,AACD,sBACK,cAAuB,AACvB,iBAAmB,AACnB,cAAe,AACf,6BAAmC,CACvC,AACD,WACK,gBAAiB,AACjB,UAAW,AACX,iBAAoB,AACpB,gBAAkB,CACtB,AACD,cACK,aAAc,AACd,iBAAmB,CACvB,AACD,kBACK,YAAa,AACb,oBAAsB,CAC1B,AACD,YACK,aAAc,AACd,cAAe,AACf,mBAAoB,AACpB,oBAAsB,CAC1B,AACD,mBACK,aAAc,AACd,kBAAmB,AACnB,8BAAmC,AACnC,gBAAiB,AACjB,mBAAoB,AACpB,6BAA8B,AAC9B,+BAAiC,CACrC,AAED,QAQK,YAAc,CAClB,AACD,qBATK,eAAgB,AAChB,gBAAiB,AACjB,MAAO,AACP,aAAc,AACd,cAAe,AACf,QAAU,CAgBd,AAZD,aAOK,gCAAiC,AACjC,0CAA2C,AACnC,kCAAmC,AAC3C,mBAAoB,AACpB,4BAA8B,CAClC,AACD,KACK,eAAgB,AAChB,sBAAuB,AACvB,qBAAsB,AACtB,gBAAiB,AACjB,cAAe,AACf,kBAAmB,AACnB,iBAAkB,AAClB,cAAe,AACf,qBAAsB,AACtB,8BAA+B,AACvB,sBAAuB,AAC/B,wCAAyC,AACzC,kBAAoB,CACxB,AAED,UAGK,SAAU,AAGV,mBAAoB,AACpB,6BAAoC,AACpC,YAAa,AACb,aAAe,CACnB,AACD,wBAVK,kBAAmB,AACnB,MAAO,AAEP,OAAQ,AACR,OAAS,CAgBb,AAVD,cACK,kBAAmB,AACnB,cAAgB,AAChB,YAAa,AAGb,cAAgB,AAGhB,gBAAmB,CACvB,AAED,SACI,WAAY,AACZ,WAAa,CAChB,AACD,WACK,WAAa,CACjB,AAED,uBACK,cAAe,AACf,gBAAiB,AACjB,0BAAqC,AACrC,QAAU,CACd,AACD,+CACK,kBAAmB,AACnB,aAAe,AACf,gBAAkB,AAClB,kBAAqB,AACrB,iBAAmB,AACnB,cAAe,AACf,6BAAmC,CACvC,AACD,kBACK,eAAkB,CACtB,AACD,mCACK,4BAA8B,CAClC,AACD,sBACK,kBAAoB,CACxB,AACD,2BACK,cAAgB,AAChB,kBAAqB,CACzB,AACD,uCACK,qBAAsB,AACtB,UAAW,AACX,gBAAiB,AACjB,gBAAiB,AACjB,eAAkB,CACtB,AACD,wCACI,iBAAmB,CACtB,AACD,OACK,kBAAmB,AACnB,cAAgB,AAChB,aAAc,AACd,cAAgB,AAChB,mBAAqB,AACrB,kBAAmB,AACnB,kBAAoB,CACxB,AACD,yCACK,iBAAmB,AACnB,aAAe,AACf,mBAAoB,AACpB,qBAAsB,AACtB,kBAAmB,AACnB,kBAAoB,AACpB,aAAc,AACd,WAAY,AACZ,SAAU,AACV,cAAgB,CACpB,AACD,qDACK,UAAa,CACjB,AAED,YACK,6BAA8B,AAC9B,8BAAmC,AACnC,QAAU,CACd,AACD,uBACK,aAAe,AACf,iBAAoB,CACxB,AACD,wCACK,qBAAsB,AACtB,UAAW,AACX,kBAAoB,AACpB,eAAkB,CACtB,AACD,yCACK,iBAAmB,CACvB,AACD,YACK,cAAe,AACf,eAAiB,CACrB,AACD,0BACK,mBAAoB,AACpB,yBAA0B,AAC1B,aAAe,CACnB,AACD,0BACK,kBAAmB,AACnB,yBAA0B,AAC1B,YAAe,CACnB,AACD,oBACK,UAAW,AACX,UAAY,CAChB,AACD,oCACK,6BAA8B,AAC9B,gCAAiC,AACjC,kCAAmC,AACnC,8BAA+B,AAC/B,8BAA+B,AAC/B,+BAAgC,AAChC,mCAAqC,CACzC,AAED,WACK,cAAe,AACf,gBAAiB,AACjB,SAAU,AACV,6BAA8B,AAC9B,cAA0B,AAC1B,gBAAiB,AACjB,SAAW,CACf,AACD,mBACK,6BAAmC,CACvC,AACD,sBACK,aAAe,AACf,mBAAqB,AACrB,kBAAoB,AACpB,eAAgB,AAChB,2BAA4B,AAC5B,sBAAuB,AACvB,kBAAoB,CACxB,AAID,wCAFK,6BAAmC,CAUvC,AARD,YACK,kBAAmB,AACnB,cAAgB,AAChB,aAAc,AACd,cAAgB,AAChB,mBAAqB,AACrB,iBAAmB,CAEvB,AACD,iCACK,aAAc,AACd,kBAAmB,AACnB,aAAc,AACd,mBAAoB,AACpB,QAAU,CACd,AACD,aACK,cAAe,AACf,gBAAiB,AACjB,gBAAyB,AACzB,SAAU,AACV,iBAAkB,AAClB,eAAiB,CACrB,AACD,aACK,kBAAmB,AACnB,gBAAmB,CACvB,AACD,4BACK,oBAAuB,CAC3B",file:"_id.vue",sourcesContent:["\nhtml{\n     font-size: 100px;\n}\n.bf-model{\n     position:fixed;\n     top: 0;\n     left: 0;\n     width: 3.8rem;\n     height: 100%;\n     border: 1px solid #3f98fc;\n     background: #0F205C;\n     -webkit-box-shadow: 0 0 30px #009cff inset;\n             box-shadow: 0 0 30px #009cff inset;\n     font-family: PingFang SC;\n     font-size: .16rem;\n}\n#l-bf-model{\n     position:fixed;\n     top: 0;\n     right: 0;\n     width: 3.6rem;\n     height: 100%;\n     border: 1px solid #3f98fc;\n     background: #0F205C;\n     -webkit-box-shadow: 0 0 30px #009cff inset;\n             box-shadow: 0 0 30px #009cff inset;\n     font-family: PingFang SC;\n     font-size: .16rem;\n     padding: .1rem;\n     color: #78ddff;\n}\n#l-bf-model .l-bf-off{\n     padding: 0.2rem 0.2rem;\n     font-size: 0.24rem;\n     color: #78ddff;\n     background: rgba(52, 92, 177, 0.3);\n}\n.l-bf-list{\n     list-style: none;\n     padding: 0;\n     margin: .2rem 0 0 0;\n     font-size: .14rem;\n}\n.l-bf-list li{\n     height: .4rem;\n     line-height: .4rem;\n}\n.l-bf-list li div{\n     width: .9rem;\n     display: inline-block;\n}\n.l-bf-color{\n     width: 2.2rem;\n     height: .15rem;\n     background: #454E6C;\n     display: inline-block;\n}\n#l-bf-model .title{\n     height: .4rem;\n     line-height: .4rem;\n     background: rgba(52, 92, 177, 0.3);\n     font-size: .2rem;\n     padding-left: .2rem;\n     border-top: 1px solid #0A478F;\n     border-bottom: 1px solid #0A478F;\n}\n /*场景样式*/\n#editor {\n     position: fixed;\n     overflow: hidden;\n     top: 0;\n     left: 3.82rem;\n     right: 3.82rem;\n     bottom: 0;\n     /*border: 1px solid #3f98fc;*/\n     margin: .1rem;\n}\n#part-editor{\n     position: fixed;\n     overflow: hidden;\n     top: 0;\n     left: 3.82rem;\n     right: 3.82rem;\n     bottom: 0;\n     border-bottom: 1px solid #3f98fc;\n     -webkit-box-shadow: 0 0 30px #009cff inset;\n             box-shadow: 0 0 30px #009cff inset;\n     background: #0F205C;\n     border-top: 1px solid #3f98fc;\n}\n#bqy{\n     position: fixed;\n     background-color: #fff;\n     display: inline-block;\n     padding: 0 .1rem;\n     height: .32rem;\n     line-height: .3rem;\n     font-size: .12rem;\n     color: #409eff;\n     border-radius: .04rem;\n     -webkit-box-sizing: border-box;\n             box-sizing: border-box;\n     border: .03rem solid rgba(64,158,255,.2);\n     white-space: nowrap;\n}\n /*进度条样式*/\n#progress {\n     position: absolute;\n     top: 0;\n     bottom: 0;\n     left: 0;\n     right: 0;\n     background: #f7f7f7;\n     background: rgba(247, 247, 247, .9);\n     z-index: 100;\n     color: #78ddff;\n}\n#progress-box {\n     text-align: center;\n     height: 0.78rem;\n     margin: auto;\n     position: absolute;\n     top: 0;\n     bottom: 0.36rem;\n     left: 0;\n     right: 0;\n     font-size: 0.24rem;\n}\n /*LOGO*/\n#imglogo{\n    width: 2rem;\n    height: 1rem;\n}\n#list_info{\n     height: 100%;\n}\n /*楼栋基本信息*/\n#list_info,#floor_info{\n     color: #78ddff;\n     list-style: none;\n     padding: 0.1rem 0.1rem 0.8rem 0.1rem;\n     margin: 0;\n}\n#bf-title,#list_info .title,#floor_info .title{\n     text-align: center;\n     height: 0.4rem;\n     padding: 0.2rem 0;\n     line-height:  0.4rem;\n     font-size: 0.24rem;\n     color: #78ddff;\n     background: rgba(52, 92, 177, 0.3);\n}\n#list_info .title{\n     padding: 0.1rem 0;\n}\n#list_info .list_item:nth-child(2){\n     border-top: 1px solid #0A478F;\n}\n#list_info .list_item{\n     background: #152D6F;\n}\n#list_info .list_item span{\n     height: 0.35rem;\n     line-height: 0.35rem;\n}\n#list_info .list_item span:nth-child(1){\n     display: inline-block;\n     width: 50%;\n     text-align: left;\n     padding:0 0.2rem;\n     font-weight: bold;\n}\n#list_info .list_item span:nth-child(2){\n    padding-left: 10px;\n}\n#close{\n     position: absolute;\n     bottom: 0.11rem;\n     width: 3.6rem;\n     height: 0.75rem;\n     line-height: 0.75rem;\n     text-align: center;\n     background: #152D6F;\n}\n#close .btn-close,#room_close .btn-close{\n     font-size: 0.16rem;\n     height: 0.4rem;\n     background: #0f8bfd;\n     display: inline-block;\n     text-align: center;\n     line-height: 0.4rem;\n     width: 1.5rem;\n     color: #fff;\n     border: 0;\n     cursor: pointer;\n}\n#close .btn-close:hover,#room_close .btn-close:hover{\n     opacity: 0.7;\n}\n /*楼层信息*/\n#floor_info{\n     border-top: 1px solid #0A478F;\n     background: rgba(52, 92, 177, 0.3);\n     margin: 0;\n}\n#floor_info .list_item{\n     height: 0.4rem;\n     line-height: 0.4rem;\n}\n#floor_info .list_item span:nth-child(1){\n     display: inline-block;\n     width: 50%;\n     margin-left: 0.2rem;\n     font-weight: bold;\n}\n#floor_info .list_item span:nth-child(2){\n     padding-left: 10px;\n}\n#floor_info{\n     height: 1.2rem;\n     overflow-y: auto;\n}\n::-webkit-scrollbar-track {\n     border-radius: 10px;\n     background-color: #17272a;\n     height: 1.5rem;\n}\n::-webkit-scrollbar-thumb {\n     border-radius: 2px;\n     background-color: #354346;\n     height: 0.5rem;\n}\n::-webkit-scrollbar {\n     width: 6px;\n     height: 6px;\n}\n#floor_info ,#room_info,#list_number{\n     scrollbar-base-color: #072d71;\n     scrollbar-3dlight-color: #0a2363;\n     scrollbar-highlight-color: #0a2363;\n     scrollbar-track-color: #0a2363;\n     scrollbar-arrow-color: #0a2363;\n     scrollbar-shadow-color: #0a2363;\n     scrollbar-dark-shadow-color: #072d71;\n}\n /*房间号*/\n#room_info{\n     height: 6.5rem;\n     overflow-y: auto;\n     margin: 0;\n     border-top: 1px solid #0A478F;\n     color: rgb(120, 221, 255);\n     list-style: none;\n     padding: 0;\n}\n#room_info .active{\n     background: rgba(52, 92, 177, 0.3);\n}\n#room_info .room_item {\n     height: 0.4rem;\n     padding-left: 0.3rem;\n     line-height: 0.4rem;\n     cursor: pointer;\n     -webkit-transition: all .5s;\n     -o-transition: all .5s;\n     transition: all .5s;\n}\n#room_info .room_item:hover{\n     background: rgba(52, 92, 177, 0.3);\n}\n#room_close{\n     position: absolute;\n     bottom: 0.11rem;\n     width: 3.6rem;\n     height: 0.75rem;\n     line-height: 0.75rem;\n     text-align: center;\n     background: rgba(52, 92, 177, 0.3);\n}\n#room_close a,#room_close button{\n     height: .4rem;\n     line-height: .4rem;\n     width: 1.5rem;\n     background: #0092FF;\n     border: 0;\n}\n#list_number{\n     height: 6.8rem;\n     list-style: none;\n     padding: 0 .1rem 0 .1rem;\n     margin: 0;\n     font-size: .14rem;\n     overflow-y: auto;\n}\n#room .title{\n     text-align: center;\n     padding: 0.05rem 0;\n}\n#list_number .info_list div{\n     padding: 0.05rem .6rem;\n}\n"],sourceRoot:""}])},783:function(e,t,i){e.exports=i.p+"img/bg-info-left-no.22efae6.png"},784:function(e,t,i){e.exports=i.p+"img/bg-info.0398026.png"},820:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),r("div",{style:{top:.01*(e.positiony-70)+"rem",left:.01*(e.positionx-30)+"rem"},attrs:{id:"bqy"}},[e._v("\n        "+e._s(e.tag)+"\n    ")]),r("transition",{attrs:{name:"fade"}},[e.loadding?r("div",{attrs:{id:"progress"}},[r("div",{attrs:{id:"progress-box"}},[r("div",[r("img",{attrs:{id:"imglogo",src:i(646)}})]),r("div",[e._v(e._s(e.progress))])])]):e._e()]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.buildingInfo,expression:"buildingInfo"}],staticClass:"bf-model"},[r("ul",{attrs:{id:"list_info"}},[r("li",{staticClass:"title"},[e._v("楼栋基本信息")]),e._l(e.buildingBrief,function(t,i){return r("li",{staticClass:"list_item"},[r("span",[e._v(e._s(t.label)+":")]),r("span",[e._v(e._s(t.brief))])])}),r("li",[r("img",{staticStyle:{display:"inline-block",width:"100%",height:"100%"},attrs:{src:e.getImagePath(e.data.cover)}})])],2),e._m(1)]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.info,expression:"info"}],staticClass:"bf-model"},[r("div",{attrs:{id:"bf-title"}},[e._v(e._s(e.flootname)+"层信息")]),r("ul",{directives:[{name:"show",rawName:"v-show",value:e.brief,expression:"brief"}],staticStyle:{"padding-bottom":"0"},attrs:{id:"floor_info"}},e._l(e.brief,function(t,i){return r("li",{staticClass:"list_item"},[r("span",[e._v(e._s(t.label)+":")]),r("span",[e._v(e._s(t.brief))])])})),r("ul",{attrs:{id:"room_info"}},[e._l(e.household,function(t,i){return r("li",{staticClass:"room_item",class:{active:e.roomindex===i},on:{click:function(t){e.roomnumber(i)}}},[e._v("\n                "+e._s(t.roomName)+"\n            ")])}),r("li",{directives:[{name:"show",rawName:"v-show",value:0===e.household.length,expression:"household.length===0"}],staticStyle:{position:"absolute",top:"35%",left:"50%","margin-left":"-90px","z-index":"-0"}},[r("img",{attrs:{src:i(783)}})])],2),r("div",{staticStyle:{padding:"0 .1rem"}},[r("div",{attrs:{id:"room_close"}},[r("button",{staticStyle:{width:"1.6rem","background-color":"#0092FF",height:"0.4rem","line-height":"0.4rem",border:"0","font-size":"0.16rem",color:"#e6e6e6",cursor:"pointer","margin-right":".05rem"},on:{click:function(t){e.buildingInfo=!0,e.info=!1}}},[e._v("显示楼栋信息")]),e._m(2)])])]),r("div",{attrs:{id:"l-bf-model"}},[r("div",{staticClass:"l-bf-off"},[e._v("\n            开启热力图\n            "),r("el-switch",{model:{value:e.isHot,callback:function(t){e.isHot=t},expression:"isHot"}}),e._m(3)],1),r("div",{staticClass:"title"},[e._v("\n            "+e._s(e.room.number)+"住户信息\n        ")]),r("ul",{attrs:{id:"list_number"}},[e._l(e.room.household_infos,function(t,i){return r("li",{staticClass:"info_list"},[r("div",{staticClass:"room_img"},[r("img",{staticStyle:{width:"160px",height:"120px"},attrs:{src:t.img}})]),r("div",[r("span",[e._v("住户 : ")]),r("span",[e._v(e._s(t.name))])]),r("div",[r("span",[e._v("身份证 : ")]),r("span",[e._v(e._s(t.idNumber.replace(/^(\w{0})(\w*)(\w{4})$/,function(e,t,i,r){return t+i.replace(/\w/g,"*")+r})))])]),r("div",[r("span",[e._v("住户类型 : ")]),r("span",[e._v(e._s(t.type))])]),r("div",[r("span",[e._v("卡号 : ")]),r("span",[e._v(e._s(t.cardNumber))])]),r("div",[r("span",[e._v("手机号码 : ")]),r("span",[e._v(e._s(t.phone.replace(/^(\d{0})(\d*)(\d{4})$/,function(e,t,i,r){return t+i.replace(/\d/g,"*")+r})))])]),r("div",{staticStyle:{"border-bottom":"1px solid #0A478F"}},[r("span",[e._v("入住时间 : ")]),r("span",[e._v(e._s(t.checkTime.substring(0,10)))])])])}),r("li",{directives:[{name:"show",rawName:"v-show",value:""==e.room.household_infos,expression:"room.household_infos==''"}],staticStyle:{position:"absolute",top:"50%",left:"50%","margin-left":"-.9rem"}},[r("img",{attrs:{src:i(784)}})])],2)])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"part-editor"}},[i("div",{attrs:{id:"editor"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{padding:"0 0.1rem"}},[i("div",{attrs:{id:"close"}},[i("a",{attrs:{href:"javascript:history.back(-1)"}},[i("button",{staticStyle:{width:"1.6rem","background-color":"#0092FF",height:"0.4rem","line-height":"0.4rem",border:"0","font-size":"0.16rem",color:"#e6e6e6",cursor:"pointer"}},[e._v("返回上一页")])])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a",{staticStyle:{"margin-left":".05rem"},attrs:{href:"javascript:history.back(-1)"}},[i("button",{staticStyle:{width:"1.6rem","background-color":"#0092FF",height:"0.4rem","line-height":"0.4rem",border:"0","font-size":"0.16rem",color:"#e6e6e6",cursor:"pointer"}},[e._v("返回上一页")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"l-bf-list"},[i("li",[i("div",[e._v("0~100人")]),i("span",{staticClass:"l-bf-color"},[i("span",{staticStyle:{display:"block",width:"40%",background:"#BE6C75",height:"100%"}})])]),i("li",[i("div",[e._v("100~200人")]),i("span",{staticClass:"l-bf-color"},[i("span",{staticStyle:{display:"block",width:"60%",background:"#FB2119",height:"100%"}})])]),i("li",[i("div",[e._v("200人以上")]),i("span",{staticClass:"l-bf-color"},[i("span",{staticStyle:{display:"block",width:"100%",background:"#BC0101",height:"100%"}})])])])}]}},870:function(e,t,i){var r=i(750);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);i(77)("db6d8f36",r,!0)}});