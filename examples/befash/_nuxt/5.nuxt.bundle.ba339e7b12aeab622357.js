webpackJsonp([5],{625:function(e,t,o){var n=o(75)(o(737),o(821),null,null,null);e.exports=n.exports},639:function(e,t,o){function n(e){o(644)}var i=o(75)(o(640),o(643),n,null,null);e.exports=i.exports},640:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{value:String},data:function(){return{progress:0}},methods:{handleUplaadSuccess:function(e,t){this.progress=0,this.$emit("input",e.data)},on_upload:function(e){this.progress=parseInt(e.percent)}}}},641:function(e,t,o){t=e.exports=o(76)(!0),t.push([e.i,".el-upload-dragger{width:200px;height:200px}","",{version:3,sources:["/var/gdpublic/gdpublic/components/my-upload.vue"],names:[],mappings:"AACA,mBACI,YAAa,AACb,YAAc,CACjB",file:"my-upload.vue",sourcesContent:["\n.el-upload-dragger {\n    width: 200px;\n    height: 200px;\n}\n"],sourceRoot:""}])},643:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-upload",{attrs:{drag:"",action:"/upload/image","show-file-list":!1,"on-success":e.handleUplaadSuccess,"on-progress":e.on_upload}},[e.progress?o("div",{staticStyle:{height:"200px",background:"#fff"}},[o("el-progress",{staticStyle:{padding:"40px 0"},attrs:{type:"circle",percentage:e.progress}})],1):e._e(),e.value?o("img",{staticStyle:{width:"100%"},attrs:{src:e.getImagePath(e.value)}}):e._e(),o("i",{staticClass:"el-icon-upload"}),o("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),o("em",[e._v("点击上传")])])])},staticRenderFns:[]}},644:function(e,t,o){var n=o(641);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);o(77)("2cd85ac2",n,!0)},649:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{data:Object},data:function(){return{visible:!1}},methods:{remove:function(){this.visible=!1,this.$emit("remove")},edit:function(){this.$emit("edit")}}}},651:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{v:this.$props.value}},props:{options:Array,name:String,label:String,placeholder:String,value:Number},watch:{"$props.value":function(){this.v=this.$props.value}},methods:{onChange:function(e){this.$emit("input",e)}}}},653:function(e,t,o){t=e.exports=o(76)(!0),t.push([e.i,".card_list{overflow:hidden;padding:16px;margin:0 auto;list-style:none}.card_list_item{float:left;width:200px;height:260px;overflow:hidden;margin:8px;background:#fff;border-radius:2px;-webkit-box-shadow:0 2px 4px rgba(90,90,90,.1);box-shadow:0 2px 4px rgba(90,90,90,.1);-webkit-transition:-webkit-box-shadow .4s;transition:-webkit-box-shadow .4s;-o-transition:box-shadow .4s;transition:box-shadow .4s;transition:box-shadow .4s,-webkit-box-shadow .4s}.card_list_item:hover{-webkit-box-shadow:0 2px 8px rgba(90,90,90,.2);box-shadow:0 2px 8px rgba(90,90,90,.2)}.card_list_item img{width:200px;height:200px}.card_list .icon{color:#666;padding-right:8px;cursor:pointer;font-size:18px;display:block;float:left}.item_content{padding:8px}.text-overflow{display:block;word-break:keep-all;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.card_title{font-size:14px;color:#666}","",{version:3,sources:["/var/gdpublic/gdpublic/components/card.vue"],names:[],mappings:"AACA,WACI,gBAAiB,AACjB,aAAc,AACd,cAAe,AACf,eAAiB,CACpB,AACD,gBACI,WAAY,AACZ,YAAa,AACb,aAAc,AACd,gBAAiB,AACjB,WAAY,AACZ,gBAAiB,AACjB,kBAAmB,AACnB,+CAAmD,AAC3C,uCAA2C,AACnD,0CAA2C,AAC3C,kCAAmC,AACnC,6BAA8B,AAC9B,0BAA2B,AAC3B,gDAAmD,CACtD,AACD,sBACI,+CAAmD,AAC3C,sCAA2C,CACtD,AACD,oBACI,YAAa,AACb,YAAc,CACjB,AACD,iBACI,WAAY,AACZ,kBAAmB,AACnB,eAAgB,AAChB,eAAgB,AAChB,cAAe,AACf,UAAY,CACf,AACD,cACI,WAAa,CAChB,AACD,eACI,cAAe,AACf,oBAAqB,AACrB,mBAAoB,AACpB,gBAAiB,AACjB,0BAA2B,AACxB,sBAAwB,CAC9B,AACD,YACI,eAAgB,AAChB,UAAY,CACf",file:"card.vue",sourcesContent:["\n.card_list {\n    overflow: hidden;\n    padding: 16px;\n    margin: 0 auto;\n    list-style: none;\n}\n.card_list_item {\n    float: left;\n    width: 200px;\n    height: 260px;\n    overflow: hidden;\n    margin: 8px;\n    background: #fff;\n    border-radius: 2px;\n    -webkit-box-shadow: 0 2px 4px rgba(90, 90, 90, .1);\n            box-shadow: 0 2px 4px rgba(90, 90, 90, .1);\n    -webkit-transition: -webkit-box-shadow .4s;\n    transition: -webkit-box-shadow .4s;\n    -o-transition: box-shadow .4s;\n    transition: box-shadow .4s;\n    transition: box-shadow .4s, -webkit-box-shadow .4s;\n}\n.card_list_item:hover {\n    -webkit-box-shadow: 0 2px 8px rgba(90, 90, 90, .2);\n            box-shadow: 0 2px 8px rgba(90, 90, 90, .2);\n}\n.card_list_item img {\n    width: 200px;\n    height: 200px;\n}\n.card_list .icon {\n    color: #666;\n    padding-right: 8px;\n    cursor: pointer;\n    font-size: 18px;\n    display: block;\n    float: left;\n}\n.item_content {\n    padding: 8px;\n}\n.text-overflow {\n    display: block;\n    word-break: keep-all;\n    white-space: nowrap;\n    overflow: hidden;\n    -o-text-overflow: ellipsis;\n       text-overflow: ellipsis;\n}\n.card_title {\n    font-size: 14px;\n    color: #666;\n}\n\n"],sourceRoot:""}])},655:function(e,t,o){function n(e){o(661)}var i=o(75)(o(649),o(658),n,null,null);e.exports=i.exports},656:function(e,t,o){var n=o(75)(o(651),o(659),null,null,null);e.exports=n.exports},658:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-popover",{ref:"popover",attrs:{placement:"top",width:"160"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[o("p",[e._v("确定删除吗？")]),o("div",{staticStyle:{"text-align":"right",margin:"0"}},[o("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.visible=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.remove()}}},[e._v("确定")])],1)]),o("img",{attrs:{src:e.getImagePath("/min/"+(e.data.image||e.data.cover))}}),o("div",{staticClass:"item_content"},[o("span",{staticClass:"text-overflow card_title"},[e._v(e._s(e.data.name||e.data.title))]),o("div",[o("i",{staticClass:"icon",attrs:{title:"修改"},on:{click:function(t){t.preventDefault(),e.edit()}}},[e._v("")]),o("i",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"icon",attrs:{title:"删除"},on:{click:function(e){e.preventDefault()}}},[e._v("")])])])],1)},staticRenderFns:[]}},659:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-select",{attrs:{value:e.v,placeholder:"请选择"},on:{change:e.onChange},model:{value:e.v,callback:function(t){e.v=t},expression:"v"}},e._l(e.options,function(t,n){return o("el-option",{key:t[e.name],attrs:{label:t[e.label],value:t[e.name]}})}))},staticRenderFns:[]}},661:function(e,t,o){var n=o(653);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);o(77)("722cf09d",n,!0)},716:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(639),i=o.n(n),r=o(656),s=o.n(r);t.default={components:{myUpload:i.a,mySelect:s.a},data:function(){return{edit:!1,show:!1,index:0,form:{title:"",number:"",cover:"",categoryId:void 0,isonline:!0,store:!0,type:0},rules:{title:[{required:!0,message:"请输入布料名称",trigger:"blur"}],number:[{required:!0,message:"请输入布料编号",trigger:"blur"}],cover:[{required:!0,message:"请上传预览图",trigger:"blur"}],categoryId:[{required:!0,type:"number",message:"请选择类别",trigger:"blur"}]}}},methods:{open:function(e,t){e?(this.index=t,this.form=this.$store.state.scene.list[t]):this.form={title:"",number:"",cover:"",categoryId:void 0,isonline:!0,store:!0,type:0},this.edit=e,this.show=!0},postScene:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.edit?e.$store.dispatch("scene/put",{index:e.index,data:e.form}).then(function(){e.$refs.form.resetFields()}).then(function(){e.$store.dispatch("scene/refresh")}):e.$store.dispatch("scene/post",e.form).then(function(){e.$refs.form.resetFields()}),e.show=!1)})}}}},737:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(655),i=o.n(n),r=o(811),s=o.n(r);t.default={middleware:"check-auth",data:function(){return{page:1}},head:function(){return{title:"场景管理",meta:[{hid:"keyword",name:"keyword",content:"场景管理,百丰网络科技有限公司,3d"},{hid:"description",name:"description",content:"场景管理,百丰网络科技有限公司"}]}},components:{card:i.a,sceneDialog:s.a},fetch:function(e){var t=e.route,o=e.store;return o.dispatch("scene/refresh",t.params.id).then(function(){return o.dispatch("category/select",t.params.id)})},methods:{removeScene:function(e){this.$store.dispatch("scene/remove",e)},openSceneDialog:function(e,t){this.$refs.dialog.open(e,t)},handleCurrentChange:function(e){this.$store.dispatch("scene/load",e)}}}},811:function(e,t,o){var n=o(75)(o(716),o(835),null,null,null);e.exports=n.exports},821:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"top-bar"},[o("span",{staticClass:"top-title"},[e._v(e._s(e.$store.state.category.currentCategory))]),o("span",{staticClass:"top-text"},[e._v(e._s(e.$store.state.scene.count)+" 场景")]),o("span",{staticClass:"top-text",on:{click:function(t){e.openSceneDialog(!1)}}},[e._v("添加新场景")])]),o("div",[o("ul",{staticClass:"card_list container"},e._l(e.$store.state.scene.list,function(t,n){return o("li",{staticClass:"card_list_item"},[o("nuxt-link",{attrs:{to:t.type?"/editor/building/"+t.id:"/editor/scene/"+t.id}},[o("card",{attrs:{data:t},on:{remove:function(t){e.removeScene(n)},edit:function(t){e.openSceneDialog(!0,n)}}})],1)],1)}))]),e.$store.state.scene.count>20?o("div",{staticClass:"page"},[o("el-pagination",{attrs:{"current-page":e.page,"page-size":20,layout:"total, prev, pager, next",total:e.$store.state.scene.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.page=t}}})],1):e._e(),o("scene-dialog",{ref:"dialog"})],1)},staticRenderFns:[]}},835:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.edit?"修改场景信息":"新增场景",visible:e.show},on:{"update:visible":function(t){e.show=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[o("el-form-item",{attrs:{label:"场景标题",prop:"title"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.title,callback:function(t){e.form.title=t},expression:"form.title"}})],1),o("el-form-item",{attrs:{label:"场景编号",prop:"number"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.number,callback:function(t){e.form.number=t},expression:"form.number"}})],1),o("el-form-item",{attrs:{label:"类别",prop:"categoryId"}},[o("my-select",{attrs:{value:"form.categoryId",placeholder:"选择类别",options:e.$store.state.category.list,label:"name",name:"id"},model:{value:e.form.categoryId,callback:function(t){e.form.categoryId=t},expression:"form.categoryId"}})],1),o("el-form-item",{attrs:{label:"上架到官网",prop:"isonline"}},[o("el-select",{model:{value:e.form.isonline,callback:function(t){e.form.isonline=t},expression:"form.isonline"}},[o("el-option",{key:!0,attrs:{label:"是",value:!0}}),o("el-option",{key:!1,attrs:{label:"否",value:!1}})],1)],1),o("el-form-item",{attrs:{label:"上架到商城",prop:"store"}},[o("el-select",{model:{value:e.form.store,callback:function(t){e.form.store=t},expression:"form.store "}},[o("el-option",{key:!0,attrs:{label:"是",value:!0}}),o("el-option",{key:!1,attrs:{label:"否",value:!1}})],1)],1),o("el-form-item",{attrs:{label:"场景类型",prop:"type"}},[o("el-select",{model:{value:e.form.type,callback:function(t){e.form.type=t},expression:"form.type"}},[o("el-option",{key:0,attrs:{label:"衣服",value:0}}),o("el-option",{key:1,attrs:{label:"建筑",value:1}})],1)],1),o("el-form-item",{attrs:{label:"封面图",prop:"cover"}},[o("div",[o("br"),o("my-upload",{model:{value:e.form.cover,callback:function(t){e.form.cover=t},expression:"form.cover"}})],1)])],1),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.postScene}},[e._v("确 定")])],1)],1)},staticRenderFns:[]}}});