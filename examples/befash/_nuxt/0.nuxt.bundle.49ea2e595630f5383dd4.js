webpackJsonp([0],{616:function(e,t,i){function a(e){i(896)}var n=i(75)(i(728),i(861),a,null,null);e.exports=n.exports},634:function(e,t,i){function a(e){return i(n(e))}function n(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./background0.jpg":635,"./background2.jpg":636,"./background3.jpg":637,"./background4.jpg":638};a.keys=function(){return Object.keys(r)},a.resolve=n,e.exports=a,a.id=634},635:function(e,t,i){e.exports=i.p+"img/background0.b0eab6f.jpg"},636:function(e,t,i){e.exports=i.p+"img/background2.06aef60.jpg"},637:function(e,t,i){e.exports=i.p+"img/background3.1891c8e.jpg"},638:function(e,t,i){e.exports=i.p+"img/background4.cb0fbbe.jpg"},639:function(e,t,i){function a(e){i(644)}var n=i(75)(i(640),i(643),a,null,null);e.exports=n.exports},640:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{value:String},data:function(){return{progress:0}},methods:{handleUplaadSuccess:function(e,t){this.progress=0,this.$emit("input",e.data)},on_upload:function(e){this.progress=parseInt(e.percent)}}}},641:function(e,t,i){t=e.exports=i(76)(!0),t.push([e.i,".el-upload-dragger{width:200px;height:200px}","",{version:3,sources:["/var/gdpublic/gdpublic/components/my-upload.vue"],names:[],mappings:"AACA,mBACI,YAAa,AACb,YAAc,CACjB",file:"my-upload.vue",sourcesContent:["\n.el-upload-dragger {\n    width: 200px;\n    height: 200px;\n}\n"],sourceRoot:""}])},643:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-upload",{attrs:{drag:"",action:"/upload/image","show-file-list":!1,"on-success":e.handleUplaadSuccess,"on-progress":e.on_upload}},[e.progress?i("div",{staticStyle:{height:"200px",background:"#fff"}},[i("el-progress",{staticStyle:{padding:"40px 0"},attrs:{type:"circle",percentage:e.progress}})],1):e._e(),e.value?i("img",{staticStyle:{width:"100%"},attrs:{src:e.getImagePath(e.value)}}):e._e(),i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),i("em",[e._v("点击上传")])])])},staticRenderFns:[]}},644:function(e,t,i){var a=i(641);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(77)("2cd85ac2",a,!0)},645:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator__=__webpack_require__(103),__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator__),__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise__=__webpack_require__(11),__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise__),__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator__=__webpack_require__(102),__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator__),__WEBPACK_IMPORTED_MODULE_3__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_classCallCheck__=__webpack_require__(162),__WEBPACK_IMPORTED_MODULE_3__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_classCallCheck___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_classCallCheck__),__WEBPACK_IMPORTED_MODULE_4__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_createClass__=__webpack_require__(163),__WEBPACK_IMPORTED_MODULE_4__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_createClass___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_createClass__),Editor=function(){function Editor(e,t){__WEBPACK_IMPORTED_MODULE_3__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_classCallCheck___default()(this,Editor),this.view=e;var i=new THREE.LoadingManager;i.onProgress=function(e,i,a){var n=parseInt(i/a*100)+"%";t&&t(!0,n)},i.onLoad=function(){t&&t(!1,"0%")},this.load=new THREE.CBMLoader(i);var a={};a.type="js",this.drcLoad=new THREE.DRACOLoader("/upload/js/",a,i),this.textureLoad=new THREE.TextureLoader(i),this.raycaster=new THREE.Raycaster,this.ModelsChild=[],this.testModels=[],this.models=[],this.material={},this.globalMaterial=[],this.selectedMaterial=[],this.waitLoad=[],this.spotLight=[],this.spotLight1=[],this.exposure=[],this.materials={},this.ambient=[],this.currentMaterial={},this.motes={},this.num=45,this.preGlobalMaterial={},this.bgController=[],this.isEnv=!1,this.curEnv=0,this.envMaps=[],this.mobile=!1,this.envMapIntensity=0,this.isSkyBox=!1,this.urls=[["room/posx.jpg","room/negx.jpg","room/posy.jpg","room/negy.jpg","room/posz.jpg","room/negz.jpg"],["Bridge2/posx.jpg","Bridge2/negx.jpg","Bridge2/posy.jpg","Bridge2/negy.jpg","Bridge2/posz.jpg","Bridge2/negz.jpg"],["skybox/px.jpg","skybox/nx.jpg","skybox/py.jpg","skybox/ny.jpg","skybox/pz.jpg","skybox/nz.jpg"],["Castle/px.jpg","Castle/nx.jpg","Castle/py.jpg","Castle/ny.jpg","Castle/pz.jpg","Castle/nz.jpg"]],this.init(),window.addEventListener("resize",function(){this.renderer.setSize(this.view.offsetWidth,this.view.offsetHeight),this.camera.aspect=this.view.offsetWidth/this.view.offsetHeight,this.camera.updateProjectionMatrix(),this.render()}.bind(this))}return __WEBPACK_IMPORTED_MODULE_4__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_createClass___default()(Editor,[{key:"init",value:function(){this.initScene(),this.initCamera(),this.initRender(),this.initLight(),this.initControls(),this.initPatternManager(),this.view.appendChild(this.renderer.domElement),this.render()}},{key:"initScene",value:function(){this.scene=new THREE.Scene,this.group=new THREE.Group,this.scene.add(this.group)}},{key:"initCamera",value:function(){this.camera=new THREE.PerspectiveCamera(60,this.view.offsetWidth/this.view.offsetHeight,.01,20),this.camera.position.z=1,this.camera.position.y=0,this.camera.lookAt({x:0,y:0,z:0}),this.camera.up.x=this.camera.up.z=0,this.camera.up.y=1}},{key:"initPatternManager",value:function(){var e=this;this.homePatternManager=new THREE.HomePatternManger(this.view,this.group,this.raycaster,this.controls,function(){return e.camera},this.render.bind(this))}},{key:"initRender",value:function(){this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(16777215),this.renderer.setSize(this.view.offsetWidth,this.view.offsetHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,this.renderer.shadowMapSoft=!0,this.renderer.setPixelRatio(window.devicePixelRatio)}},{key:"initControls",value:function(){this.controls=new THREE.OrbitControls(this.camera,this.view,this.group),this.controls.enableDamping=!0,1==this.mobile?(this.controls.rotateSpeed=.005,this.controls.dampingFactor=2.5):(this.controls.rotateSpeed=.2,this.controls.dampingFactor=.07),this.controls.minDistance=.3,this.controls.maxDistance=5,this.controls.addEventListener("change",this.render.bind(this)),this.controls.addEventListener("start",this.inertiaStart.bind(this)),this.controls.addEventListener("end",this.inertiaEnd.bind(this))}},{key:"saveCamera",value:function(e){this.camera.position.x=e[0],this.camera.position.y=e[1],this.camera.position.z=e[2],this.controls.update()}},{key:"initLight",value:function(){this.hemiLight=new THREE.HemisphereLight(16777215,16777215,.27),this.hemiLight.color.setHSL(.6,1,.6),this.hemiLight.groundColor.setHSL(.095,1,.75),this.hemiLight.position.set(0,50,0),this.scene.add(this.hemiLight),this.dirLight=new THREE.DirectionalLight(16777215,.97),this.dirLight.color.setHSL(.1,1,.95),this.dirLight.position.set(0,1,1),this.dirLight.position.multiplyScalar(30),this.dirLight.shadow.mapSize.width=2048,this.dirLight.shadow.mapSize.height=2048,this.dirLight.shadow.bias=-18e-6,this.scene.add(this.dirLight),this.dirLight1=new THREE.DirectionalLight(16777215,.67),this.dirLight1.color.setHSL(.1,1,.95),this.dirLight1.position.set(0,.5,-1),this.dirLight1.position.multiplyScalar(30),this.scene.add(this.dirLight1),this.ambient=new THREE.AmbientLight(16777215,.32),this.scene.add(this.ambient)}},{key:"initModel",value:function(){function e(e,i,a,n,r){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,a,n,r){var o,s,l,c,d,_=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.models[t]=[],o=void 0,!/(.drc|.bf)$/.test(a.toLowerCase())){e.next=9;break}return e.next=5,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){_.drcLoad.load(a,function(t){e(t)})});case 5:s=e.sent,o=new THREE.Mesh(s,new THREE.MeshPhongMaterial),e.next=12;break;case 9:return e.next=11,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){_.load.load(a,function(t){e(t)})});case 11:o=e.sent;case 12:if(o.isMesh?(o.castShadow=!0,o.receiveShadow=!0):o.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,_.testModels.push(e),e.isMesh&&_.ModelsChild.push(e)}),o.traverse(function(e){e.geometry&&(e.geometry.attributes.uv2=e.geometry.attributes.uv)}),o.tag=r,this.models[t][i]=o,void 0!==this.selectedMaterial[t]&&this.setMaterial(t,this.material[t][this.selectedMaterial[t]]),o.traverse(function(e){e.isMesh&&_.homePatternManager.pushMeshList(e)}),!n){e.next=28;break}this.models[t][i].childComponent=[],l=void 0,c=__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(a){var r,o;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/(.drc|.bf)$/.test(n[a].model.toLowerCase())){e.next=7;break}return e.next=3,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){_.drcLoad.load("/upload/"+n[a].model,function(t){e(t)})});case 3:r=e.sent,l=new THREE.Mesh(r,new THREE.MeshPhongMaterial),e.next=10;break;case 7:return e.next=9,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){_.load.load("/upload/"+n[a].model,function(t){e(t)})});case 9:l=e.sent;case 10:if(l.isMesh?(l.castShadow=!1,l.receiveShadow=!0):l.traverse(function(e){e.castShadow=!1,e.receiveShadow=!0}),l.traverse(function(e){e.geometry&&(e.geometry.attributes.uv2=e.geometry.attributes.uv)}),l.tag=n[a].tag,o=_.currentMaterial[l.tag],!n[a].fabric){e.next=18;break}return e.next=17,_.getMaterial(JSON.parse(n[a].fabric.material),n[a].repeat||1);case 17:o=e.sent;case 18:o&&(l.isMesh?(l.material=o,l.material.needsUpdate=!0):l.traverse(function(e){e.isMesh&&(e.material=o,e.material.needsUpdate=!0)})),_.group.add(l),_.models[t][i].childComponent.push(l),l.traverse(function(e){e.isMesh&&_.homePatternManager.pushMeshList(e)});case 22:case"end":return e.stop()}},e,_)}),d=0;case 23:if(!(d<n.length)){e.next=28;break}return e.delegateYield(c(d),"t0",25);case 25:d++,e.next=23;break;case 28:this.group.add(o),this.render();case 30:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadModel",value:function(){function e(e,i,a,n,r,o){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,a,n,r,o){var s,l,c,d,_,h,p,u,m,b=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.models[t]||(this.models[t]=[]),!this.models[t][i]){e.next=6;break}for(s=0;s<this.models[t].length;s++)if(this.models[t][s]&&(this.models[t][s].visible=s===i,this.models[t][s].childComponent))for(l=0;l<this.models[t][s].childComponent.length;l++)this.models[t][s].childComponent[l].visible=s===i;this.render(),e.next=38;break;case 6:if(c=void 0,!/(.drc|.bf)$/.test(a.toLowerCase())){e.next=14;break}return e.next=10,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){b.drcLoad.load(a,function(t){e(t)})});case 10:d=e.sent,c=new THREE.Mesh(d,new THREE.MeshPhongMaterial),e.next=17;break;case 14:return e.next=16,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){b.load.load(a,function(t){e(t)})});case 16:c=e.sent;case 17:for(c.isMesh?(c.castShadow=!0,c.receiveShadow=!0):c.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,b.testModels.push(e),e.isMesh&&b.ModelsChild.push(e)}),c.traverse(function(e){e.geometry&&(e.geometry.attributes.uv2=e.geometry.attributes.uv)}),_=0;_<this.models[t].length;_++)if(this.models[t][_]&&(this.models[t][_].visible=!1,this.models[t][_].childComponent))for(h=0;h<this.models[t][_].childComponent.length;h++)this.models[t][_].childComponent[h].visible=_===i,this.models[t][_].childComponent[h].tag;if(c.tag=r,this.models[t][i]=c,o&&this.loadPattern(t,i,o),void 0!==this.selectedMaterial[t]&&this.setMaterial(t,this.material[t][this.selectedMaterial[t]]),this.group.add(c),c.traverse(function(e){e.isMesh&&b.homePatternManager.pushMeshList(e)}),!n){e.next=36;break}this.models[t][i].childComponent=[],p=void 0,u=__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(a){var r,o;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/(.drc|.bf)$/.test(n[a].model.toLowerCase())){e.next=7;break}return e.next=3,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){b.drcLoad.load("/upload/"+n[a].model,function(t){e(t)})});case 3:r=e.sent,p=new THREE.Mesh(r,new THREE.MeshPhongMaterial),e.next=10;break;case 7:return e.next=9,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){b.load.load("/upload/"+n[a].model,function(t){e(t)})});case 9:p=e.sent;case 10:if(p.isMesh?(p.castShadow=!1,p.receiveShadow=!0):p.traverse(function(e){e.castShadow=!1,e.receiveShadow=!0}),p.traverse(function(e){e.geometry&&(e.geometry.attributes.uv2=e.geometry.attributes.uv)}),p.tag=n[a].tag,o=b.currentMaterial[p.tag],!n[a].fabric){e.next=18;break}return e.next=17,b.getMaterial(JSON.parse(n[a].fabric.material),n[a].repeat||1);case 17:o=e.sent;case 18:o&&(p.isMesh?(p.material=o,p.material.needsUpdate=!0):p.traverse(function(e){e.isMesh&&(e.material=o,e.material.needsUpdate=!0)})),b.group.add(p),b.models[t][i].childComponent.push(p),p.traverse(function(e){e.isMesh&&b.homePatternManager.pushMeshList(e)});case 22:case"end":return e.stop()}},e,b)}),m=0;case 31:if(!(m<n.length)){e.next=36;break}return e.delegateYield(u(m),"t0",33);case 33:m++,e.next=31;break;case 36:this.group.add(c),this.render();case 38:case"end":return e.stop()}},e,this)}));return e}()},{key:"initGroupMaterial",value:function(){function e(e,i,a,n){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,a,n){var r,o,s,l=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMaterial(a,n);case 2:for(this.material[t+i]=e.sent,this.currentMaterial[i]=this.material[t+i],this.changeGroupFabricRepeat(t,i,n),r=0;r<this.models.length;r++)if(this.models[r])for(o=0;o<this.models[r].length;o++)if(this.models[r][o]&&this.models[r][o].tag===i&&(this.models[r][o].isMesh?this.models[r][o].material=this.material[t+i]:this.models[r][o].traverse(function(e){e.isMesh&&(e.material=l.material[t+i])})),this.models[r][o]&&this.models[r][o].childComponent)for(s=0;s<this.models[r][o].childComponent.length;s++)this.models[r][o].childComponent[s].tag===i&&(this.models[r][o].childComponent[s].isMesh?this.models[r][o].childComponent[s].material=this.material[t+i]:this.models[r][o].childComponent[s].traverse(function(e){e.isMesh&&(e.material=l.material[t+i])}));this.material[t+i].repeat=n,this.render();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadGroupMaterial",value:function(){function e(e,i,a,n){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,a,n){var r,o,s,l=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.material[t+i]){e.next=4;break}return e.next=3,this.getMaterial(a,n);case 3:this.material[t+i]=e.sent;case 4:for(this.currentMaterial[i]=this.material[t+i],this.material[t+i].repeat!==n&&this.changeGroupFabricRepeat(t,i,n),r=0;r<this.models.length;r++)if(this.models[r])for(o=0;o<this.models[r].length;o++)if(this.models[r][o]&&this.models[r][o].tag===i&&(this.models[r][o].isMesh?this.models[r][o].material=this.material[t+i]:this.models[r][o].traverse(function(e){e.isMesh&&(e.material=l.material[t+i])})),this.models[r][o]&&this.models[r][o].childComponent)for(s=0;s<this.models[r][o].childComponent.length;s++)this.models[r][o].childComponent[s].tag===i&&(this.models[r][o].childComponent[s].isMesh?this.models[r][o].childComponent[s].material=this.material[t+i]:this.models[r][o].childComponent[s].traverse(function(e){e.isMesh&&(e.material=l.material[t+i])}));this.material[t+i].repeat=n,this.render();case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"initMaterial",value:function(){function e(e,i,a,n){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,a,n){return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.material[t]=[],e.next=3,this.getMaterial(a,n);case 3:this.material[t][i]=e.sent,this.material[t][i].repeat=n,this.setMaterial(t,this.material[t][i]),this.selectedMaterial[t]=i,this.render();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"initEnv",value:function(){function e(e,i){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i){return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnv=t,!t){e.next=7;break}if(this.curEnv=i,this.envMaps[i]){e.next=7;break}return e.next=6,this.loadEnvMap(this.urls[i]);case 6:this.envMaps[i]=e.sent;case 7:this.render();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadMaterial",value:function(){function e(e,i,a,n){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,a,n){var r,o,s;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(clearInterval(this.changeOpacity),this.changeOpacity=null,r=a.opacity,this.material[t]||(this.material[t]=[]),!this.material[t][i]){e.next=8;break}(this.material[t][i].repeat||n)&&this.changeRepeat(t,i,n),e.next=11;break;case 8:return e.next=10,this.getMaterial(a,n);case 10:this.material[t][i]=e.sent;case 11:this.material[t][i].repeat=n,this.selectedMaterial[t]||this.setMaterial(t,this.material[t][i]),void 0!==this.selectedMaterial[t]&&i!==this.selectedMaterial[t]?(this.setMaterial(t,this.material[t][i]),o=this.material[t][i].transparent,this.material[t][i].transparent=!0,this.material[t][i].opacity=.8,s=this,this.changeOpacity=setInterval(function(){s.material[t][i].opacity+=.1,s.material[t][i].opacity>=1&&(s.material[t][i].transparent=o,s.material[t][i].opacity=r,clearInterval(s.changeOpacity),s.changeOpacity=null),s.render()},150)):this.material[t][i].opacity=r,this.selectedMaterial[t]=i,this.render();case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadGlobalMaterial",value:function(){function e(e,i,a){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,a){var n,r,o,s;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.globalMaterial[t]){e.next=5;break}(this.globalMaterial[t].repeat||a)&&this.changeGlobalRepeat(t,a),this.setGlobalMaterial(this.globalMaterial[t]),e.next=9;break;case 5:return e.next=7,this.getMaterial(JSON.parse(i),a);case 7:this.globalMaterial[t]=e.sent,this.setGlobalMaterial(this.globalMaterial[t]);case 9:this.preGlobalMaterial!==this.globalMaterial[t]&&(n=this.globalMaterial[t].transparent,r=this.globalMaterial[t].opacity,this.globalMaterial[t].transparent=!0,this.globalMaterial[t].opacity=.8,o=this,s=setInterval(function(){o.globalMaterial[t].opacity+=.1,o.globalMaterial[t].opacity>=1&&(o.globalMaterial[t].transparent=n,o.globalMaterial[t].opaciyt=r,clearInterval(s),s=null),o.render()},150),this.globalMaterial[t].repeat=a,this.preGlobalMaterial=this.globalMaterial[t],this.currentMaterial=this.globalMaterial[t],this.render());case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"getMaterial",value:function(){function e(e,i){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i){var a,n;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a={side:THREE.DoubleSide},e.t0=__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.keys(t);case 2:if((e.t1=e.t0()).done){e.next=18;break}if(n=e.t1.value,!t.hasOwnProperty(n)||!t[n]||"#000"===t[n]){e.next=16;break}if(!n.includes("map")&&!n.includes("Map")){e.next=15;break}if(!n.includes("aoMapIntensity")){e.next=10;break}a[n]=t[n],e.next=13;break;case 10:return e.next=12,this.loadTexture(t[n],i);case 12:a[n]=e.sent;case 13:e.next=16;break;case 15:a[n]=t[n];case 16:e.next=2;break;case 18:return this.isEnv&&(a.envMap=this.envMaps[this.curEnv],a.envMapIntensity=this.envMapIntensity),e.abrupt("return",new THREE.MeshPhysicalMaterial(a));case 20:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateMaterialColor",value:function(e,t,i,a){this.material[e][t]&&"#000"!==a&&(this.material[e][t][i]=new THREE.Color(a)),this.render()}},{key:"updateMaterialNumber",value:function(e,t,i,a){this.material[e][t]&&(this.material[e][t][i]=a),this.render()}},{key:"loadEnvMap",value:function(e){var t=this;return this.loader=(new THREE.CubeTextureLoader).setPath("/upload/"),new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(i,a){t.loader.load(e,function(e){i(e)})})}},{key:"loadTexture",value:function(e,t){var i=this;return new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(a,n){i.textureLoad.load("/upload/"+e,function(e){e.wrapS=e.wrapT=THREE.RepeatWrapping,e.repeat.set(t,t),a(e)})})}},{key:"inspectMobile",value:function(){this.mobile=!0}},{key:"changeRepeat",value:function(e,t,i){if(this.material[e]&&this.material[e][t]&&this.material[e][t].repeat!==i){var a=this.material[e][t];a.map&&a.map.repeat.set(i,i),a.normalMap&&a.normalMap.repeat.set(i,i),a.specularMap&&a.specularMap.repeat.set(i,i),a.lightMap&&a.lightMap.repeat.set(i,i),a.needsUpdate=!0,this.render()}}},{key:"changeChildFabricRepeat",value:function(e,t,i,a){if(this.models[e]&&this.models[e][t]&&this.models[e][t].childComponent&&this.models[e][t].childComponent[i]){var n=void 0;n=this.models[e][t].childComponent[i].material?this.models[e][t].childComponent[i].material:this.models[e][t].childComponent[i].children[0].material,n.map&&n.map.repeat.set(a,a),n.normalMap&&n.normalMap.repeat.set(a,a),n.specularMap&&n.specularMap.repeat.set(a,a),n.lightMap&&n.lightMap.repeat.set(a,a),n.needsUpdate=!0,this.render()}}},{key:"changeShadow",value:function(e){this.dirLight.castShadow=e,this.render()}},{key:"changeLightBias",value:function(e){this.dirLight.shadow.bias=e,this.render()}},{key:"initEnv",value:function(){function e(e,i){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i){return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnv=t,!t){e.next=7;break}if(this.curEnv=i,this.envMaps[i]){e.next=7;break}return e.next=6,this.loadEnvMap(this.urls[i]);case 6:this.envMaps[i]=e.sent;case 7:this.render();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeBackground",value:function(){function e(e){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t){var i=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=t){e.next=9;break}if(this.isSkyBox=!0,this.envMaps[this.curEnv]){e.next=6;break}return e.next=5,this.loadEnvMap(this.urls[this.curEnv]);case 5:this.envMaps[this.curEnv]=e.sent;case 6:this.scene.background=this.envMaps[this.curEnv],e.next=15;break;case 9:if(this.isSkyBox=!1,this.bgController[t]){e.next=14;break}return e.next=13,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,a){i.textureLoad.load(__webpack_require__(634)("./background"+t+".jpg"),function(t){e(t)})});case 13:this.bgController[t]=e.sent;case 14:this.scene.background=this.bgController[t];case 15:this.render();case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeEnvMaps",value:function(){function e(e,i){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i){return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnv=t,!t){e.next=8;break}if(this.curEnv=i,this.envMaps[i]){e.next=7;break}return e.next=6,this.loadEnvMap(this.urls[i]);case 6:this.envMaps[i]=e.sent;case 7:this.isSkyBox&&(this.scene.background=this.envMaps[this.curEnv]);case 8:this.updateModels(),this.render();case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeEnvMapIntensity",value:function(e){this.envMapIntensity=e,this.updateModels()}},{key:"updateModels",value:function(){if(this.isEnv)for(var e in this.material)for(var t=0;t<this.material[e].length;t++)this.material[e][t].envMap=this.envMaps[this.curEnv],this.material[e][t].envMapIntensity=this.envMapIntensity,this.material[e][t].needsUpdate=!0;else for(var i in this.material)for(var a=0;a<this.material[i].length;a++)this.material[i][a].envMap=null,this.material[i][a].envMapIntensity=0,this.material[i][a].needsUpdate=!0;for(var n=0;n<this.models.length;n++)this.selectedMaterial[n]&&this.material[n][this.selectedMaterial[n]]&&this.setMaterial(n,this.material[n][this.selectedMaterial[n]]);this.render()}},{key:"changeExposure",value:function(e){this.renderer.toneMappingExposure=Math.pow(e,.1),this.render()}},{key:"changeClothesLight",value:function(e,t){switch(e){case"hemisphere":this.hemiLight.intensity=t;break;case"spot":this.dirLight.intensity=t;break;case"point":this.dirLight1.intensity=t;break;case"ambient":this.ambient.intensity=t}this.render()}},{key:"changeGroupFabricRepeat",value:function(e,t,i){if(this.material[e+t]&&this.material[e+t].repeat!==i){var a=this.material[e+t];a.map&&a.map.repeat.set(i,i),a.normalMap&&a.normalMap.repeat.set(i,i),a.specularMap&&a.specularMap.repeat.set(i,i),a.lightMap&&a.lightMap.repeat.set(i,i),a.needsUpdate=!0,this.render()}}},{key:"shadowSwitch",value:function(e,t){for(var i=0;i<this.testModels.length;i++)this.models[e]&&this.models[e][0]===this.testModels[i]&&(this.testModels[i+1].castShadow=t);this.render()}},{key:"changeGlobalRepeat",value:function(e,t){if(this.globalMaterial[e]&&this.globalMaterial[e].repeat!==t){var i=this.globalMaterial[e];i.map&&i.map.repeat.set(t,t),i.normalMap&&i.normalMap.repeat.set(t,t),i.specularMap&&i.specularMap.repeat.set(t,t),i.lightMap&&i.lightMap.repeat.set(t,t),i.needsUpdate=!0,this.render()}}},{key:"setMaterial",value:function(e,t){if(this.models[e])for(var i=0;i<this.models[e].length;i++)this.models[e][i]&&(this.models[e][i].isMesh?(this.models[e][i].material=t,this.models[e][i].material.needsUpdate=!0):this.models[e][i].traverse(function(e){e.isMesh&&(e.material=t,e.material.needsUpdate=!0)}))}},{key:"setGlobalMaterial",value:function(e){if(this.models.length>0)for(var t=0;t<this.models.length;t++)this.models[t]&&this.models[t].length&&this.setMaterial(t,e)}},{key:"loadPattern",value:function(e,t,i){i&&(i=JSON.parse(i),this.patternManager.drawDefault(this.models[e][t],this.models[e][t].children[i.mesh],new THREE.Vector3(i.position.x,i.position.y,i.position.z),new THREE.Euler(i.rotation.x,i.rotation.y,i.rotation.z),new THREE.Vector3(i.dimensions.x,i.dimensions.y,i.dimensions.z)))}},{key:"homeBeginPattern",value:function(){function e(e,i){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i){var a;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=JSON.parse(i),i.depthTest=!0,i.depthWrite=!1,i.polygonOffset=!0,i.polygonOffsetFactor=-1,e.next=7,this.getMaterial(i,1);case 7:a=e.sent,console.log(a),this.homePatternManager.setEnable(!0),this.homePatternManager.changeMaterial(t,a);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"homeScalePattern",value:function(e){this.homePatternManager.scalePattern(e)}},{key:"homeEndPattern",value:function(){this.homePatternManager.setEnable(!1)}},{key:"homeRemovePattern",value:function(){this.homePatternManager.removePattern()}},{key:"beginPattern",value:function(e,t){this.patternManager.setEnable(!0,this.models[e][t])}},{key:"endPattern",value:function(e,t){this.patternManager.setEnable(!1,this.models[e][t])}},{key:"getPatternParams",value:function(e){this.patterns=[];for(var t=0;t<this.models.length;t++)if(this.models[t])for(var i=0;i<this.models[t].length;i++)if(this.models[t][i].pattern){var a=this.models[t][i].pattern.params;this.patterns.push({id:e[t].components[i].id,params:{position:{x:a.position.x,y:a.position.y,z:a.position.z},rotation:{x:a.rotation.x,y:a.rotation.y,z:a.rotation.z},dimensions:{x:a.dimensions.x,y:a.dimensions.y,z:a.dimensions.z},mesh:a.index}})}else this.patterns.push({id:e[t].components[i].id,params:void 0});return this.patterns}},{key:"scalePattern",value:function(e){this.patternManager.scalePattern(e)}},{key:"removePattern",value:function(){this.patternManager.removePattern()}},{key:"loadPatternMaterial",value:function(){function e(e){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t){var i;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMaterial(JSON.parse(t),1);case 2:i=e.sent,this.patternManager.changeMaterial(i);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeTarget",value:function(e,t){this.models[e][t]||this.waitLoad.push({pIndex:e,cIndex:t,fun:function(){}})}},{key:"setModelRepeat",value:function(e,t){e.map&&e.map.repeat.set(t,t),e.normalMap&&e.normalMap.repeat.set(t,t),e.specularMap&&e.specularMap.repeat.set(t,t),e.lightMap&&e.lightMap.repeat.set(t,t),e.needsUpdate=!0}},{key:"initMote",value:function initMote(mote){var _this9=this,child=mote.child;mote.models=[];for(var _loop3=function _loop3(j){/(.drc|.bf)$/.test(child[j].model)?_this9.drcLoad.load("/upload/"+child[j].model,function(){var _ref15=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function _callee15(geometry){var cbm,_material,materials,repeatString,repeat,materialinfo;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function _callee15$(_context17){for(;;)switch(_context17.prev=_context17.next){case 0:if(cbm=new THREE.Mesh(geometry,new THREE.MeshPhongMaterial),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0):cbm.traverse(function(e){e.receiveShadow=!0,e.castShadow=!0}),!child[j].material){_context17.next=14;break}return _context17.next=5,_this9.getMaterial(JSON.parse(child[j].material),1);case 5:_material=_context17.sent,_this9.materials[child[j].id]=_material,_this9.materials[child[j].id].config=child[j].material||child[j].fabric.material,materials=_this9.materials[child[j].id].config,repeatString=eval("("+materials+")"),repeat=repeatString.repeat,materialinfo=_this9.materials[child[j].id],_this9.setModelRepeat(materialinfo,repeat),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0,cbm.material=_material,cbm.material.needsUpdate=!0):cbm.traverse(function(e){e.isMesh&&(e.receiveShadow=!0,e.castShadow=!0,e.material=_material,e.material.needsUpdate=!0)});case 14:_this9.group.add(cbm),mote.models.push(cbm),_this9.render();case 17:case"end":return _context17.stop()}},_callee15,_this9)}));return function(e){return _ref15.apply(this,arguments)}}()):_this9.load.load("/upload/"+child[j].model,function(){var _ref16=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function _callee16(cbm){var _material2,materials,repeatString,repeat,materialinfo;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function _callee16$(_context18){for(;;)switch(_context18.prev=_context18.next){case 0:if(cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0):cbm.traverse(function(e){e.receiveShadow=!0,e.castShadow=!0}),!child[j].material){_context18.next=13;break}return _context18.next=4,_this9.getMaterial(JSON.parse(child[j].material),1);case 4:_material2=_context18.sent,_this9.materials[child[j].id]=_material2,_this9.materials[child[j].id].config=child[j].material||child[j].fabric.material,materials=_this9.materials[child[j].id].config,repeatString=eval("("+materials+")"),repeat=repeatString.repeat,materialinfo=_this9.materials[child[j].id],_this9.setModelRepeat(materialinfo,repeat),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0,cbm.material=_material2,cbm.material.needsUpdate=!0):cbm.traverse(function(e){e.isMesh&&(e.receiveShadow=!0,e.castShadow=!0,e.material=_material2,e.material.needsUpdate=!0)});case 13:_this9.group.add(cbm),mote.models.push(cbm),_this9.render();case 16:case"end":return _context18.stop()}},_callee16,_this9)}));return function(e){return _ref16.apply(this,arguments)}}())},j=0;j<child.length;j++)_loop3(j);this.motes[mote.id]=mote,this.selectedMotes=mote.id}},{key:"loadMote",value:function loadMote(mote){var _this10=this;if(this.motes[mote.id]){if(this.selectedMotes!==mote.id){for(var i=0;i<this.motes[this.selectedMotes].models.length;i++)this.motes[this.selectedMotes].models[i].visible=!1;for(var _i4=0;_i4<this.motes[mote.id].models.length;_i4++)this.motes[mote.id].models[_i4].visible=!0;this.render()}}else!function(){if(_this10.motes[_this10.selectedMotes])for(var _i5=0;_i5<_this10.motes[_this10.selectedMotes].models.length;_i5++)_this10.motes[_this10.selectedMotes].models[_i5].visible=!1;var child=mote.child;mote.models=[];for(var _loop4=function _loop4(j){/(.drc|.bf)$/.test(child[j].model)?_this10.drcLoad.load("/upload/"+child[j].model,function(){var _ref17=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function _callee17(geometry){var cbm,_material3,materials,repeatString,repeat,materialinfo;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function _callee17$(_context19){for(;;)switch(_context19.prev=_context19.next){case 0:if(cbm=new THREE.Mesh(geometry,new THREE.MeshPhongMaterial),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0):cbm.traverse(function(e){e.receiveShadow=!0,e.castShadow=!0}),!child[j].material){_context19.next=14;break}return _context19.next=5,_this10.getMaterial(JSON.parse(child[j].material),1);case 5:_material3=_context19.sent,_this10.materials[child[j].id]=_material3,_this10.materials[child[j].id].config=child[j].material||child[j].fabric.material,materials=_this10.materials[child[j].id].config,repeatString=eval("("+materials+")"),repeat=repeatString.repeat,materialinfo=_this10.materials[child[j].id],_this10.setModelRepeat(materialinfo,repeat),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0,cbm.material=_material3,cbm.material.needsUpdate=!0):cbm.traverse(function(e){e.isMesh&&(e.receiveShadow=!0,e.castShadow=!0,e.material=_material3,e.material.needsUpdate=!0)});case 14:_this10.group.add(cbm),mote.models.push(cbm),_this10.render();case 17:case"end":return _context19.stop()}},_callee17,_this10)}));return function(e){return _ref17.apply(this,arguments)}}()):_this10.load.load("/upload/"+child[j].model,function(){var _ref18=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function _callee18(cbm){var _material4,materials,repeatString,repeat,materialinfo;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function _callee18$(_context20){for(;;)switch(_context20.prev=_context20.next){case 0:if(cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0):cbm.traverse(function(e){e.receiveShadow=!0,e.castShadow=!0}),!child[j].material){_context20.next=13;break}return _context20.next=4,_this10.getMaterial(JSON.parse(child[j].material),1);case 4:_material4=_context20.sent,_this10.materials[child[j].id]=_material4,_this10.materials[child[j].id].config=child[j].material||child[j].fabric.material,materials=_this10.materials[child[j].id].config,repeatString=eval("("+materials+")"),repeat=repeatString.repeat,materialinfo=_this10.materials[child[j].id],_this10.setModelRepeat(materialinfo,repeat),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0,cbm.material=_material4,cbm.material.needsUpdate=!0):cbm.traverse(function(e){e.isMesh&&(e.receiveShadow=!0,e.castShadow=!0,e.material=_material4,e.material.needsUpdate=!0)});case 13:_this10.group.add(cbm),mote.models.push(cbm),_this10.render();case 16:case"end":return _context20.stop()}},_callee18,_this10)}));return function(e){return _ref18.apply(this,arguments)}}())},j=0;j<child.length;j++)_loop4(j);_this10.motes[mote.id]=mote}();this.selectedMotes=mote.id}},{key:"inertiaEnd",value:function(){var e=this;this.inertia=setInterval(function(){e.controls.update()},30),this.clearInert=setTimeout(function(){clearInterval(e.inertia)},3e3)}},{key:"inertiaStart",value:function(){clearInterval(this.inertia),clearInterval(this.clearInert)}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}}]),Editor}();__webpack_exports__.a=Editor},647:function(e,t,i){function a(e){i(660)}var n=i(75)(i(650),i(657),a,null,null);e.exports=n.exports},648:function(e,t,i){"use strict";var a=i(11),n=i.n(a),r=i(103),o=i.n(r),s=i(102),l=i.n(s),c=i(162),d=i.n(c),_=i(163),h=i.n(_),p=function(){function e(t){d()(this,e),this.view=t,this.width=parseInt(this.view.style.width),this.height=parseInt(this.view.style.height),this.load=new THREE.CBMLoader;var i={};i.type="js",this.drcLoad=new THREE.DRACOLoader("/upload/js/",i),this.init()}return h()(e,[{key:"init",value:function(){this.initScene(),this.initCamera(),this.initRender(),this.initLight(),this.view.appendChild(this.renderer.domElement),this.render()}},{key:"initScene",value:function(){this.scene=new THREE.Scene}},{key:"initCamera",value:function(){this.camera=new THREE.PerspectiveCamera(60,this.width/this.height,.01,20),this.camera.position.z=.8,this.camera.position.y=0,this.camera.lookAt({x:0,y:0,z:0}),this.camera.up.x=this.camera.up.z=0,this.camera.up.y=1}},{key:"initRender",value:function(){this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(13421772),this.renderer.setSize(this.width,this.height),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,this.renderer.shadowMapSoft=!0,this.renderer.setPixelRatio(window.devicePixelRatio)}},{key:"initLight",value:function(){var e=new THREE.AmbientLight(16777215,.5);this.scene.add(e);var t=new THREE.SpotLight(16777215,.5,100,1,.2,1.5);t.position.set(0,0,5),this.scene.add(t)}},{key:"loadModel",value:function(){function e(e){return t.apply(this,arguments)}var t=l()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadModelPromise(t);case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadModelPromise",value:function(e){var t=this;return new n.a(function(i,a){t.mesh&&(t.scene.remove(t.mesh),t.clearScene(t.mesh)),/(.drc|.bf)$/.test(e.toLowerCase())?t.drcLoad.load(e,function(e){var a=new THREE.Mesh(e,new THREE.MeshPhysicalMaterial);(new THREE.Box3).setFromObject(a).getCenter(a.position),a.position.multiplyScalar(-1),t.mesh=a,t.scene.add(a),t.render(),i()}):t.load.load(e,function(e){(new THREE.Box3).setFromObject(e).getCenter(e.position),e.position.multiplyScalar(-1),t.mesh=e,t.scene.add(e),t.render(),i()})})}},{key:"clearScene",value:function(e){if(e.isMesh)e.geometry.dispose(),e.geometry=null,e.material.dispose(),e.material=null,e=null;else if(void 0!==e.children)for(;e.children.length>0;)this.clearScene(e.children[0]),e.remove(e.children[0])}},{key:"renderToBase64",value:function(){return this.render(),this.view.getElementsByTagName("canvas")[0].toDataURL("image/png")}},{key:"renderToImage",value:function(){return this.dataURLtoBlob(this.renderToBase64())}},{key:"dataURLtoBlob",value:function(e){for(var t=e.split(","),i=t[0].match(/:(.*?);/)[1],a=atob(t[1]),n=a.length,r=new Uint8Array(n);n--;)r[n]=a.charCodeAt(n);return new Blob([r],{type:i})}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}();t.a=p},650:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(648),n=i(12),r=i.n(n);t.default={mounted:function(){this.$preview=new a.a(document.getElementById("upload-model")),this.value&&this.$preview.loadModel("/upload/"+this.value)},props:{value:String},data:function(){return{progress:0}},methods:{handleUplaadSuccess:function(e,t){var i=this;this.$preview.loadModelPromise("/upload/"+e.data).then(function(){i.$emit("input",e.data);var t=i.$preview.renderToImage(),a=new FormData;a.append("file",t),a.append("name",e.data.substr(0,e.data.lastIndexOf("."))),r.a.post("/upload/blob",a).then(function(e){i.$emit("preview",e.data.data)})})},on_progress:function(e){this.progress=parseInt(e.percent)},on_upload:function(e){this.value=""}}}},652:function(e,t,i){t=e.exports=i(76)(!0),t.push([e.i,"#upload-model,.model-upload .el-upload-dragger{width:200px;height:200px}","",{version:3,sources:["/var/gdpublic/gdpublic/components/model-upload.vue"],names:[],mappings:"AACA,+CACI,YAAa,AACb,YAAc,CACjB",file:"model-upload.vue",sourcesContent:["\n#upload-model, .model-upload .el-upload-dragger {\n    width: 200px;\n    height: 200px;\n}\n"],sourceRoot:""}])},657:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-upload",{staticClass:"model-upload",attrs:{drag:"",action:"/upload/model","show-file-list":!1,"on-success":e.handleUplaadSuccess,"before-upload":e.on_upload,"on-progress":e.on_progress}},[e.progress?i("div",{staticStyle:{height:"200px",background:"#fff"}},[i("el-progress",{staticStyle:{padding:"40px 0"},attrs:{type:"circle",percentage:e.progress}})],1):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticStyle:{width:"200px",height:"200px"},attrs:{id:"upload-model"}}),i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),i("em",[e._v("点击上传")])])])},staticRenderFns:[]}},660:function(e,t,i){var a=i(652);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(77)("b3db3178",a,!0)},672:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(12),n=i.n(a);t.default={data:function(){return{show:!1,data:{},selectedIndex:0}},methods:{open:function(e){var t=this;return this.$callback=e,this.$store.dispatch("category/refresh","manager-mote-id").then(function(){n.a.get("/model/all/list/"+t.$store.state.category.allCategory["manager-mote-id"][0].id).then(function(e){if(e.data.code)t.$message.error("获取数据失败");else{for(var i=0;i<e.data.data.length;i++)e.data.data[i].active=!1;t.data[0]=e.data.data,t.show=!0}})})},changeCategory:function(e){var t=this;n.a.get("/model/all/list/"+this.$store.state.category.allCategory["manager-mote-id"][e].id).then(function(i){if(i.data.code)t.$message.error("获取数据失败");else{for(var a=0;a<i.data.data.length;a++)i.data.data[a].active=!1;t.data[e]=i.data.data,t.selectedIndex=e}})},selectModel:function(e){console.log("this.selectedIndex = ",this.selectedIndex),console.log("index = ",e),console.log(this.data[this.selectedIndex][e]),this.$callback(this.data[this.selectedIndex][e]),this.show=!1}}}},674:function(e,t,i){t=e.exports=i(76)(!0),t.push([e.i,".line-left-menu{width:140px;float:left;min-height:300px;padding:0;margin:0;list-style:none;border-right:1px solid #eee;color:#999;font-size:14px;cursor:pointer}.line-left-menu li{padding:8px 0}.line-left-menu .active{color:#333;font-size:16px;cursor:default}.line-right{float:left;width:410px;padding:16px;margin:0;list-style:none;max-height:400px;overflow-y:auto}.line-right li{width:92px;height:114px;margin:4px;border:1px solid #eee;font-size:12px;float:left}.line-right li img{width:92px;height:92px}.line-right .active{border-color:#20a0ff}.line-dialog{width:612px!important}","",{version:3,sources:["/var/gdpublic/gdpublic/components/editor/mote-select.vue"],names:[],mappings:"AACA,gBACI,YAAa,AACb,WAAY,AACZ,iBAAkB,AAClB,UAAW,AACX,SAAU,AACV,gBAAiB,AACjB,4BAA6B,AAC7B,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,mBACI,aAAe,CAClB,AACD,wBACI,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,YACI,WAAY,AACZ,YAAa,AACb,aAAc,AACd,SAAU,AACV,gBAAiB,AACjB,iBAAkB,AAClB,eAAiB,CACpB,AACD,eACI,WAAY,AACZ,aAAc,AACd,WAAY,AACZ,sBAAuB,AACvB,eAAgB,AAChB,UAAY,CACf,AACD,mBACI,WAAY,AACZ,WAAa,CAChB,AACD,oBACI,oBAAsB,CACzB,AACD,aACI,qBAAwB,CAC3B",file:"mote-select.vue",sourcesContent:["\n.line-left-menu {\n    width: 140px;\n    float: left;\n    min-height: 300px;\n    padding: 0;\n    margin: 0;\n    list-style: none;\n    border-right: 1px solid #eee;\n    color: #999;\n    font-size: 14px;\n    cursor: pointer;\n}\n.line-left-menu li {\n    padding: 8px 0;\n}\n.line-left-menu .active {\n    color: #333;\n    font-size: 16px;\n    cursor: default;\n}\n.line-right {\n    float: left;\n    width: 410px;\n    padding: 16px;\n    margin: 0;\n    list-style: none;\n    max-height: 400px;\n    overflow-y: auto;\n}\n.line-right li {\n    width: 92px;\n    height: 114px;\n    margin: 4px;\n    border: 1px solid #eee;\n    font-size: 12px;\n    float: left;\n}\n.line-right li img {\n    width: 92px;\n    height: 92px;\n}\n.line-right .active {\n    border-color: #20a0ff;\n}\n.line-dialog {\n    width: 612px !important;\n}\n"],sourceRoot:""}])},684:function(e,t,i){function a(e){i(690)}var n=i(75)(i(672),i(686),a,null,null);e.exports=n.exports},686:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"选择模特",visible:e.show,"custom-class":"select-line-dialog","modal-append-to-body":!0,modal:!1},on:{"update:visible":function(t){e.show=t}}},[i("div",{staticStyle:{overflow:"hidden"}},[i("ul",{staticClass:"line-left-menu"},e._l(e.$store.state.category.allCategory["manager-mote-id"],function(t,a){return i("li",{class:{active:a===e.selectedIndex},on:{click:function(t){e.changeCategory(a)}}},[e._v("\n                "+e._s(t.name)+"\n            ")])})),i("ul",{staticClass:"line-right"},e._l(e.data[e.selectedIndex],function(t,a){return i("li",{class:{active:t.active},on:{click:function(t){e.selectModel(a)}}},[t.image?i("img",{attrs:{src:e.getImagePath(t.image)}}):e._e(),i("div",[e._v(e._s(t.name))])])}))]),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")])],1)])},staticRenderFns:[]}},690:function(e,t,i){var a=i(674);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(77)("c3c87efa",a,!0)},702:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(647),n=i.n(a);t.default={components:{modelUpload:n.a},data:function(){return{edit:!1,show:!1,index:0,form:{model:"",tag:"",preview:""},rules:{image:[{required:!0,message:"请上传封面图",trigger:"blur"}],model:[{required:!0,message:"请上传模型",trigger:"blur"}]}}},methods:{open:function(e,t){var i=this.$store.state.combination;e?(this.index=t,this.form=i.data.parts[i.selectedPart].components[i.selectedComponents[i.selectedPart]].child_components[t]):this.form={model:"",tag:"",preview:""},this.edit=e,this.show=!0},postComponent:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.edit?e.$store.dispatch("combination/changeChildComponent",{index:e.index,form:e.form}).then(function(){e.$refs.form.resetFields()}).then(function(){e.$store.dispatch("combination/refresh")}):e.$store.dispatch("combination/addChildComponent",e.form).then(function(){e.$refs.form.resetFields()}).then(function(){e.$store.dispatch("combination/refresh")}),e.show=!1)})},previewChange:function(e){this.form.preview=e}}}},704:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(647),n=i.n(a),r=i(639),o=i.n(r);t.default={components:{modelUpload:n.a,myUpload:o.a},data:function(){return{edit:!1,show:!1,index:0,form:{name:"",number:"",tag:"",image:"",model:"",preview:""},rules:{name:[{required:!0,message:"请输入组件名称",trigger:"blur"}],model:[{required:!0,message:"请上传模型",trigger:"blur"}]}}},methods:{open:function(e,t){var i=this.$store.state.combination;e?(this.index=t,this.form=i.data.parts[i.selectedPart].components[t]):this.form={name:"",number:"",tag:"",image:"",model:"",preview:""},this.edit=e,this.show=!0},postComponent:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.edit?e.$store.dispatch("combination/changeComponent",{index:e.index,form:e.form}).then(function(){e.$refs.form.resetFields()}).then(function(){e.$store.dispatch("combination/refresh")}):e.$store.dispatch("combination/addComponent",e.form).then(function(){e.$refs.form.resetFields()}),e.show=!1)})},previewChange:function(e){this.form.preview=e}}}},705:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(12),n=i.n(a);t.default={data:function(){return{multiple:!1,show:!1,selectedIndex:0,data:[]}},methods:{open:function(){var e=this;return this.selectedIndex=0,this.data=[],this.$store.dispatch("category/refresh","manager-embroidery-id").then(function(){n.a.get("/embroidery/all/list/"+e.$store.state.category.allCategory["manager-embroidery-id"][0].id+"/all").then(function(t){if(t.data.code)e.$message.error("获取数据失败");else{for(var i=0;i<t.data.data.length;i++)t.data.data[i].active=!1;e.data[0]=t.data.data,e.show=!0}})})},change:function(e){var t=this;this.data[e]?this.selectedIndex=e:n.a.get("/embroidery/all/list/"+this.$store.state.category.allCategory["manager-embroidery-id"][e].id+"/all").then(function(i){if(i.data.code)t.$message.error("获取数据失败");else{t.data[e]=i.data.data;for(var a=0;a<i.data.data.length;a++)i.data.data[a].active=!1;t.selectedIndex=e}})},select:function(e){var t=this.data[this.selectedIndex];t[e].active=!this.data[this.selectedIndex][e].active,this.data.splice(this.selectedIndex,1,t)},postMaterial:function(){for(var e=this,t="",i=0;i<this.data.length;i++)if(this.data[i])for(var a=0;a<this.data[i].length;a++)this.data[i][a].active&&(t+=this.data[i][a].id+",");t&&(t=t.substr(0,t.length-1),this.$store.dispatch("combination/addEmbroidery",t).then(function(){e.$message.success("添加成功"),e.show=!1}).then(function(){e.$store.dispatch("combination/refresh")}))}}}},706:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{edit:!1,show:!1,index:0,form:{name:"",number:"",tag:""},rules:{name:[{required:!0,message:"请输入面料组名称",trigger:"blur"}],tag:[{required:!0,message:"请输入面料组标记",trigger:"blur"}]}}},methods:{open:function(e,t){e?(this.index=t,this.form=this.$store.state.combination.data.fabric_groups[t]):this.form={name:"",number:"",tag:""},this.edit=e,this.show=!0},postGroup:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.edit?e.$store.dispatch("combination/changeFabricGroup",{index:e.index,form:e.form}).then(function(){e.$refs.form.resetFields()}).then(function(){e.$store.dispatch("combination/refresh")}):e.$store.dispatch("combination/addFabricGroup",e.form).then(function(){e.$refs.form.resetFields()}),e.show=!1)})}}}},707:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(12),n=i.n(a);t.default={data:function(){return{multiple:!1,show:!1,selectedIndex:0,data:[]}},methods:{open:function(){var e=this;return this.selectedIndex=0,this.data=[],this.$store.dispatch("category/refresh","manager/fabric").then(function(){n.a.get("/fabric/all/list/"+e.$store.state.category.list[0].id+"/all").then(function(t){if(t.data.code)e.$message.error("获取数据失败");else{for(var i=0;i<t.data.data.length;i++)t.data.data[i].active=!1;e.data[0]=t.data.data,e.show=!0}})})},change:function(e){var t=this;this.data[e]?this.selectedIndex=e:n.a.get("/fabric/all/list/"+this.$store.state.category.list[e].id+"/all").then(function(i){if(i.data.code)t.$message.error("获取数据失败");else{t.data[e]=i.data.data;for(var a=0;a<i.data.data.length;a++)i.data.data[a].active=!1;t.selectedIndex=e}})},select:function(e){var t=this.data[this.selectedIndex];t[e].active=!this.data[this.selectedIndex][e].active,this.data.splice(this.selectedIndex,1,t)},postMaterial:function(){for(var e=this,t="",i=0;i<this.data.length;i++)if(this.data[i])for(var a=0;a<this.data[i].length;a++)this.data[i][a].active&&(t+=this.data[i][a].id+",");t&&(t=t.substr(0,t.length-1),this.$store.dispatch("combination/addSceneFabric",t).then(function(){e.$message.success("添加成功"),e.show=!1}).then(function(){e.$store.dispatch("combination/refresh")}))}}}},708:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(12),n=i.n(a);t.default={data:function(){return{show:!1,selectedIndex:0,data:[]}},methods:{open:function(){var e=this;return this.selectedIndex=0,this.data=[],this.$store.dispatch("category/refresh","manager/fabric").then(function(){n.a.get("/fabric/all/group/"+e.$store.state.category.list[0].id+"/"+e.$store.state.combination.data.fabric_groups[e.$store.state.combination.selectedFabricGroup].id).then(function(t){if(t.data.code)e.$message.error("获取数据失败");else{for(var i=0;i<t.data.data.length;i++)t.data.data[i].active=!1;e.data[0]=t.data.data,e.show=!0}})})},change:function(e){var t=this;this.data[e]?this.selectedIndex=e:n.a.get("/fabric/all/list/"+this.$store.state.category.list[e].id+"/all").then(function(i){if(i.data.code)t.$message.error("获取数据失败");else{t.data[e]=i.data.data;for(var a=0;a<i.data.data.length;a++)i.data.data[a].active=!1;t.selectedIndex=e}})},select:function(e){var t=this.data[this.selectedIndex];t[e].active=!this.data[this.selectedIndex][e].active,this.data.splice(this.selectedIndex,1,t)},postMaterial:function(){for(var e=this,t="",i=0;i<this.data.length;i++)if(this.data[i])for(var a=0;a<this.data[i].length;a++)this.data[i][a].active&&(t+=this.data[i][a].id+",");t&&(t=t.substr(0,t.length-1),this.$store.dispatch("combination/addFabricGroupFabric",t).then(function(){e.$message.success("添加成功"),e.show=!1}).then(function(){e.$store.dispatch("combination/refresh")}))}}}},709:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(12),n=i.n(a);t.default={data:function(){return{multiple:!1,id:0,show:!1,selectedIndex:0,data:[]}},methods:{open:function(e,t){var i=this;return this.multiple=e,this.selectedIndex=0,this.data=[],e?this.$store.dispatch("category/refresh","manager/fabric").then(function(){console.log(i.$store.state.category),n.a.get("/fabric/all/list/"+i.$store.state.category.list[0].id+"/"+i.$store.state.combination.data.parts[i.$store.state.combination.selectedPart].id).then(function(e){if(e.data.code)i.$message.error("获取数据失败");else{for(var t=0;t<e.data.data.length;t++)e.data.data[t].active=!1;i.data[0]=e.data.data,i.show=!0}})}):(this.id=t,this.$store.dispatch("category/refresh","manager/fabric").then(function(){n.a.get("/fabric/all/list/"+i.$store.state.category.list[0].id+"/all").then(function(e){if(e.data.code)i.$message.error("获取数据失败");else{for(var t=0;t<e.data.data.length;t++)e.data.data[t].active=!1;i.data[0]=e.data.data,i.show=!0}})}))},change:function(e){var t=this;this.multiple?this.data[e]?this.selectedIndex=e:n.a.get("/fabric/all/list/"+this.$store.state.category.list[e].id+"/"+this.$store.state.combination.data.parts[this.$store.state.combination.selectedPart].id).then(function(i){if(i.data.code)t.$message.error("获取数据失败");else{t.data[e]=i.data.data;for(var a=0;a<i.data.data.length;a++)i.data.data[a].active=!1;t.selectedIndex=e}}):this.data[e]?this.selectedIndex=e:n.a.get("/fabric/all/list/"+this.$store.state.category.list[e].id+"/all").then(function(i){if(i.data.code)t.$message.error("获取数据失败");else{t.data[e]=i.data.data;for(var a=0;a<i.data.data.length;a++)i.data.data[a].active=!1;t.selectedIndex=e}})},select:function(e){var t=this;if(this.multiple){var i=this.data[this.selectedIndex];i[e].active=!this.data[this.selectedIndex][e].active,this.data.splice(this.selectedIndex,1,i)}else this.$store.dispatch("combination/addChildFabric",{id:this.id,fabricId:this.data[this.selectedIndex][e].id}).then(function(){t.$message.success("添加成功"),t.show=!1}).then(function(){t.$store.dispatch("combination/refresh")})},postMaterial:function(){var e=this;if(!this.multiple)return void(this.show=!1);for(var t="",i=0;i<this.data.length;i++)if(this.data[i])for(var a=0;a<this.data[i].length;a++)this.data[i][a].active&&(t+=this.data[i][a].id+",");t&&(t=t.substr(0,t.length-1),this.$store.dispatch("combination/addFabric",t).then(function(){e.$message.success("添加成功"),e.show=!1}).then(function(){e.$store.dispatch("combination/refresh")}))}}}},710:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(639),n=i.n(a);t.default={components:{myUpload:n.a},data:function(){return{edit:!1,show:!1,index:0,form:{name:"",number:"",image:""},rules:{name:[{required:!0,message:"请输入部件名称",trigger:"blur"}],number:[{required:!0,message:"请输入部件编号",trigger:"blur"}],image:[{required:!0,message:"请上传封面图",trigger:"blur"}]}}},methods:{open:function(e,t){e?(this.index=t,this.form=this.$store.state.combination.data.parts[t]):this.form={name:"",number:"",image:""},this.edit=e,this.show=!0},postPart:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.edit?e.$store.dispatch("combination/changePart",{index:e.index,form:e.form}).then(function(){e.$refs.form.resetFields()}).then(function(){e.$store.dispatch("combination/refresh")}):e.$store.dispatch("combination/addPart",e.form).then(function(){e.$refs.form.resetFields()}),e.show=!1)})}}}},717:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{show:!1,currentId:0,currentValue:void 0}},methods:{open:function(e){this.$store.dispatch("goods/getList",e),this.show=!0},changeShelves:function(e,t){this.$store.dispatch("goods/changeShelves",{id:e,value:t})},markId:function(e,t){this.currentId=e,this.currentValue=t},markValue:function(e){this.currentValue=e},changeSku:function(){this.$store.dispatch("goods/changeSku",{id:this.currentId,value:this.currentValue})}}}},728:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify__=__webpack_require__(67),__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_object_assign__=__webpack_require__(68),__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_object_assign___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_object_assign__),__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_typeof__=__webpack_require__(78),__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_typeof___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_typeof__),__WEBPACK_IMPORTED_MODULE_3_vuex__=__webpack_require__(104),__WEBPACK_IMPORTED_MODULE_4__components_editor_part_dialog_vue__=__webpack_require__(805),__WEBPACK_IMPORTED_MODULE_4__components_editor_part_dialog_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__components_editor_part_dialog_vue__),__WEBPACK_IMPORTED_MODULE_5__components_editor_component_dialog_vue__=__webpack_require__(799),__WEBPACK_IMPORTED_MODULE_5__components_editor_component_dialog_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__components_editor_component_dialog_vue__),__WEBPACK_IMPORTED_MODULE_6__components_editor_child_component_dialog__=__webpack_require__(797),__WEBPACK_IMPORTED_MODULE_6__components_editor_child_component_dialog___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__components_editor_child_component_dialog__),__WEBPACK_IMPORTED_MODULE_7__components_editor_material_dialog_vue__=__webpack_require__(804),__WEBPACK_IMPORTED_MODULE_7__components_editor_material_dialog_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__components_editor_material_dialog_vue__),__WEBPACK_IMPORTED_MODULE_8__components_editor_global_material_dialog_vue__=__webpack_require__(802),__WEBPACK_IMPORTED_MODULE_8__components_editor_global_material_dialog_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8__components_editor_global_material_dialog_vue__),__WEBPACK_IMPORTED_MODULE_9__components_editor_fabric_group_dialog_vue__=__webpack_require__(801),__WEBPACK_IMPORTED_MODULE_9__components_editor_fabric_group_dialog_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9__components_editor_fabric_group_dialog_vue__),__WEBPACK_IMPORTED_MODULE_10__components_editor_group_fabric_dialog_vue__=__webpack_require__(803),__WEBPACK_IMPORTED_MODULE_10__components_editor_group_fabric_dialog_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10__components_editor_group_fabric_dialog_vue__),__WEBPACK_IMPORTED_MODULE_11__components_three_editor__=__webpack_require__(645),__WEBPACK_IMPORTED_MODULE_12__components_editor_embroidery_select_vue__=__webpack_require__(800),__WEBPACK_IMPORTED_MODULE_12__components_editor_embroidery_select_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12__components_editor_embroidery_select_vue__),__WEBPACK_IMPORTED_MODULE_13__components_editor_mote_select_vue__=__webpack_require__(684),__WEBPACK_IMPORTED_MODULE_13__components_editor_mote_select_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13__components_editor_mote_select_vue__),__WEBPACK_IMPORTED_MODULE_14__components_shelves_dialog_vue__=__webpack_require__(812),__WEBPACK_IMPORTED_MODULE_14__components_shelves_dialog_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14__components_shelves_dialog_vue__);__webpack_exports__.default={middleware:"check-auth",head:function(){return{title:"场景编辑器",meta:[{hid:"keyword",name:"keyword",content:"场景编辑器,百丰网络科技有限公司,3d"},{hid:"description",name:"description",content:"场景编辑器,百丰网络科技有限公司"}]}},components:{partDialog:__WEBPACK_IMPORTED_MODULE_4__components_editor_part_dialog_vue___default.a,componentDialog:__WEBPACK_IMPORTED_MODULE_5__components_editor_component_dialog_vue___default.a,materialDialog:__WEBPACK_IMPORTED_MODULE_7__components_editor_material_dialog_vue___default.a,childComponentDialog:__WEBPACK_IMPORTED_MODULE_6__components_editor_child_component_dialog___default.a,globalMaterialDialog:__WEBPACK_IMPORTED_MODULE_8__components_editor_global_material_dialog_vue___default.a,fabricGroupDialog:__WEBPACK_IMPORTED_MODULE_9__components_editor_fabric_group_dialog_vue___default.a,groupFabricDialog:__WEBPACK_IMPORTED_MODULE_10__components_editor_group_fabric_dialog_vue___default.a,embroiderySelect:__WEBPACK_IMPORTED_MODULE_12__components_editor_embroidery_select_vue___default.a,moteSelect:__WEBPACK_IMPORTED_MODULE_13__components_editor_mote_select_vue___default.a,shelvesDialog:__WEBPACK_IMPORTED_MODULE_14__components_shelves_dialog_vue___default.a},mounted:function(){var e=this;this.$editor=new __WEBPACK_IMPORTED_MODULE_11__components_three_editor__.a(document.getElementById("editor"),function(t,i){if(e.loadding=t,e.progress=i,"100%"==e.progress)for(var a=0;a<e.partList.length;a++)e.$editor.shadowSwitch(a,e.partList[a].castShadow)}),this.mobile={version:function(){var e=navigator.userAgent;navigator.appVersion;return{mobile:!!e.match(/AppleWebKit.*Mobile.*/)}}()},this.mobile.version.mobile&&this.$editor.inspectMobile();for(var t=0;t<this.partList.length;t++)this.partList[t].components.length&&this.$editor.loadModel(t,0,"/upload/"+this.partList[t].components[0].model,this.partList[t].components[0].child_components,this.partList[t].components[0].tag),this.partList[t].fabrics.length&&this.$editor.loadMaterial(t,0,JSON.parse(this.partList[t].fabrics[0].material),this.partList[t].fabrics[0].part_fabric.repeat||this.partList[t].repeat||1);if(this.sceneFabricList.length&&(this.sceneFabricRepeat=this.sceneFabricList[0].scene_fabric.repeat),this.model&&this.model.child.length&&this.$editor.loadMote(this.model),this.shadowSwitch=this.shadow,"object"===__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_typeof___default()(JSON.parse(this.light))&&(this.clothesLight=JSON.parse(this.light)),this.exposure=this.Eexposure,this.background&&"object"===__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_typeof___default()(JSON.parse(this.background))&&(this.bg=JSON.parse(this.background)),this.lightBias&&(this.LightBias=this.lightBias,this.$editor.changeLightBias(this.LightBias)),this.camera){var i=JSON.parse(this.camera);this.$editor.saveCamera(i)}},computed:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3_vuex__.mapState)({data:function(e){return e.combination.data||[]},background:function(e){return e.combination.data.background},camera:function(e){return e.combination.data.camera},lightBias:function(e){return e.combination.data.lightBias},bloomlight:function(e){return e.combination.data.bloom||'{"threshold": 0.85, "strength": 0.6, "radius": 0.2}'},partList:function(e){return e.combination.data.parts||[]},shadow:function(e){return e.combination.data.shadow||!1},light:function(e){return e.combination.data.light||'{"spot": 0.97, "hemisphere": 0.27, "point": 0.67,"ambient":0.32}'},Eexposure:function(e){return e.combination.data.exposure||1},componentList:function(e){return-1!==e.selectedPart&&e.combination.data.parts[e.combination.selectedPart]?e.combination.data.parts[e.combination.selectedPart].components:[]},sceneFabricList:function(e){return e.combination.data.fabrics?e.combination.data.fabrics:[]},fabricList:function(e){return-1!==e.combination.selectedPart&&e.combination.data.parts[e.combination.selectedPart]?e.combination.data.parts[e.combination.selectedPart].fabrics:[]},childComponentList:function(e){return-1!==e.combination.selectedPart&&e.combination.data.parts[e.combination.selectedPart]&&e.combination.data.parts[e.combination.selectedPart].components.length?e.combination.data.parts[e.combination.selectedPart].components[e.combination.selectedComponents[e.combination.selectedPart]].child_components:[]},fabricGroupList:function(e){return e.combination.data.fabric_groups||[]},groupFabricList:function(e){return e.combination.data.fabric_groups[e.combination.selectedFabricGroup].fabrics?e.combination.data.fabric_groups[e.combination.selectedFabricGroup].fabrics:[]},selectedPart:function(e){return e.combination.selectedPart},selectedComponents:function(e){return e.combination.selectedComponents[e.combination.selectedPart]},selectedMaterial:function(e){return e.combination.selectedMaterial[e.combination.selectedPart]},selectedFabricGroup:function(e){return e.combination.selectedFabricGroup},selectedGroupFabric:function(e){return e.combination.selectedGroupFabric[e.combination.selectedFabricGroup]},model:function(e){return e.combination.data.model}}),fetch:function(e){var t=e.route;return e.store.dispatch("combination/one",t.params.id)},data:function(){return{options:[{bgController:0,label:"默认"},{bgController:1,label:"天空盒",disabled:!0},{bgController:2,label:"背景1"},{bgController:3,label:"背景2"},{bgController:4,label:"背景3"}],envMaps:[{envController:0,label:"设计室"},{envController:1,label:"大桥"},{envController:2,label:"天空"},{envController:3,label:"教堂"}],bg:{isEnv:!1,bgController:"",envController:"",envMapIntensity:0},form:__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_object_assign___default()({transparent:!1,refractionRatio:.01,reflectivity:.01,opacity:1,metalness:.01,roughness:1,clearCoat:1,clearCoatRoughness:1,color:"#FFFFFF",emissive:"#000",specular:"#000",shininess:1,shading:2,wireframe:!1,map:"",lightMap:"",normalMap:"",displacementMap:"",displacementScale:void 0,normalScale:void 0,aoMap:"",envMap:""},this.$store.state.fabric.material),castShadow:!1,LightBias:-18e-5,fabricId:0,selectedTab:0,dropdownIndex:0,dropdownComponentIndex:0,dropdownFabricIndex:0,dropdownChildComponentIndex:0,dropdownEmbroideryIndex:0,dropdownSceneFabricIndex:0,dropdownFabricGroupIndex:0,partRepeat:.1,fabricRepeat:.1,childFabricRepeat:.1,groupFabricRepeat:.1,selectedSceneTab:0,selectedGroupTab:0,aoMapIntensity:0,selectedSceneFabric:0,sceneFabricRepeat:0,fabricGroupRepeat:.1,shelves:!1,edit:!1,shadowSwitch:!1,progress:"0%",loadding:!0,envSwitch:!1,embroideryDimensions:.05,exposure:1.2,clothesLight:{spot:.97,hemisphere:.27,point:.67,ambient:.32},spot:4,hemisphereLight:.6,ambient:.01,spotLight1:.1,pointLight:2.8,bloom:{},selectedGoodsIndex:0}},watch:{"form.color":function(e){this.$editor.updateMaterialColor(this.selectedPart,this.dropdownFabricIndex,"color",e)},"form.emissive":function(e){this.$editor.updateMaterialColor(this.selectedPart,this.dropdownFabricIndex,"emissive",e)},"form.specular":function(e){this.$editor.updateMaterialColor(this.selectedPart,this.dropdownFabricIndex,"specular",e)},"form.transparent":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"transparent",e)},"form.opacity":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"opacity",e)},"form.reflectivity":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"reflectivity",e)},"form.refractionRatio":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"refractionRatio",e)},"form.aoMapIntensity":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"aoMapIntensity",e)},"form.shading":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"shading",e)},"form.wireframe":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"wireframe",e)},"form.metalness":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"metalness",e)},"form.roughness":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"roughness",e)},"form.clearCoat":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"clearCoat",e)},"form.clearCoatRoughness":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"clearCoatRoughness",e)},partRepeat:function(e){this.fabricList&&this.fabricList[this.selectedMaterial]&&this.fabricList[this.selectedMaterial].part_fabric.repeat||this.$editor.changeRepeat(this.selectedPart,this.selectedMaterial,e)},castShadow:function(e){this.$editor.shadowSwitch(this.selectedPart,e)},fabricRepeat:function(e){this.$editor.changeRepeat(this.selectedPart,this.selectedMaterial,e)},childFabricRepeat:function(e){this.$editor.changeChildFabricRepeat(this.selectedPart,this.selectedComponents,this.dropdownChildComponentIndex,e)},sceneFabricRepeat:function(e){this.$editor.changeGlobalRepeat(this.selectedSceneFabric,e)},LightBias:function(e){this.$editor.changeLightBias(e)},groupFabricRepeat:function(e){this.$editor.changeGroupFabricRepeat(this.fabricGroupList[this.selectedFabricGroup].fabrics[this.selectedGroupFabric].id,this.fabricGroupList[this.selectedFabricGroup].tag,e)},fabricGroupRepeat:function(e){this.$editor.changeGroupFabricRepeat(this.fabricGroupList[this.selectedFabricGroup].fabrics[this.selectedGroupFabric].id,this.fabricGroupList[this.selectedFabricGroup].tag,e)},shadowSwitch:function(e){this.$editor.changeShadow(e)},exposure:function(e){this.$editor.changeExposure(e)},"bg.envMapIntensity":function(e){this.$editor.changeEnvMapIntensity(e)},"clothesLight.spot":function(e){this.$editor.changeClothesLight("spot",e)},"clothesLight.hemisphere":function(e){this.$editor.changeClothesLight("hemisphere",e)},"clothesLight.ambient":function(e){this.$editor.changeClothesLight("ambient",e)},"clothesLight.spotLight1":function(e){this.$editor.changeClothesLight("spotLight1",e)},"clothesLight.point":function(e){this.$editor.changeClothesLight("point",e)},"bloom.threshold":function(e){this.$editor.changeBloom("threshold",e)},"bloom.strength":function(e){this.$editor.changeBloom("strength",e)},"bloom.radius":function(e){this.$editor.changeBloom("radius",e)}},methods:{saveCamera:function(){var e=this,t={},i=this.$editor.camera.position.x,a=this.$editor.camera.position.y,n=this.$editor.camera.position.z;t[0]=i.toPrecision(8),t[1]=a.toPrecision(8),t[2]=n.toPrecision(8),this.$store.dispatch("combination/saveCamera",{id:this.data.id,config:__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify___default()(t)}).then(function(){e.$message.success("保存成功")})},saveConfig:function(){var e=this,t={};for(var i in this.form)t[i]=this.form[i];this.$store.dispatch("fabric/saveMaterial",{id:this.fabricId,config:__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify___default()(t)}).then(function(){e.$store.dispatch("combination/refresh"),e.$message.success("保存成功"),e.closeFabricController()})},addEmbroidery:function(){this.$refs.embroiderySelect.open()},editEmbroidery:function(){if(this.edit){this.$editor.endPattern(this.selectedPart,this.selectedComponents),this.edit=!1;var e=this.$editor.getPatternParams(this.partList);this.$store.dispatch("combination/updatePattern",e)}else this.$editor.beginPattern(this.selectedPart,this.selectedComponents),this.$editor.changeTarget(this.selectedPart,this.selectedComponents),this.edit=!0},removeEmbroidery:function(){this.edit&&this.$editor.removePattern()},openFabricController:function openFabricController(fabric){var timer=null,slideFabric=document.getElementById("rightSlideSidebar");this.form=eval("("+fabric+")"),timer=setInterval(function(){slideFabric.style.left=parseFloat(slideFabric.style.left)+10+"px",parseFloat(slideFabric.style.left)>=0&&(slideFabric.style.left="0",window.clearInterval(timer))},10)},closeFabricController:function(){var e=null,t=document.getElementById("rightSlideSidebar");clearInterval(e),e=setInterval(function(){t.style.left=parseFloat(t.style.left)-10+"px",parseFloat(t.style.left)<=-100&&(t.style.left="-315px",window.clearInterval(e))},10)},addPart:function(){this.$refs.partDialog.open(!1)},cacheIndex:function(e){this.dropdownIndex=e},cacheComponentIndex:function(e){this.dropdownComponentIndex=e},selectPart:function(e){this.prePart!==e&&(this.$store.commit("combination/selectPart",e),this.partRepeat=this.partList[e].repeat||1,this.castShadow=this.partList[e].castShadow,this.partList[e].fabrics&&this.partList[e].fabrics[this.selectedMaterial]&&this.partList[e].fabrics[this.selectedMaterial].part_fabric&&(this.fabricRepeat=this.partList[e].fabrics[this.selectedMaterial].part_fabric.repeat||1),this.partList[this.selectedPart]&&this.partList[this.selectedPart].components[this.selectedComponents]&&this.partList[this.selectedPart].components[this.selectedComponents].child_components[this.dropdownChildComponentIndex]&&(this.childFabricRepeat=this.partList[this.selectedPart].components[this.selectedComponents].child_components[this.dropdownChildComponentIndex].repeat||1),this.prePart=e)},selectComponent:function(e){this.$editor.loadModel(this.selectedPart,e,"/upload/"+this.partList[this.selectedPart].components[e].model,this.partList[this.selectedPart].components[e].child_components,this.partList[this.selectedPart].components[e].embroidery),this.partList[this.selectedPart]&&this.partList[this.selectedPart].components[this.selectedComponents]&&this.partList[this.selectedPart].components[this.selectedComponents].child_components[this.dropdownChildComponentIndex]&&(this.childFabricRepeat=this.partList[this.selectedPart].components[this.selectedComponents].child_components[this.dropdownChildComponentIndex].repeat||1),this.$store.commit("combination/selectComponent",e)},selectChildComponent:function(e){this.dropdownChildComponentIndex=e,this.partList[this.selectedPart]&&this.partList[this.selectedPart].components[this.selectedComponents]&&this.partList[this.selectedPart].components[this.selectedComponents].child_components[this.dropdownChildComponentIndex]&&(this.childFabricRepeat=this.partList[this.selectedPart].components[this.selectedComponents].child_components[this.dropdownChildComponentIndex].repeat||1)},selectMaterial:function selectMaterial(index){this.$editor.loadMaterial(this.selectedPart,index,JSON.parse(this.partList[this.selectedPart].fabrics[index].material),this.partList[this.selectedPart].fabrics[index].part_fabric.repeat||this.partList[this.selectedPart].repeat||1),this.partList[this.selectedPart].fabrics[index].part_fabric&&(this.fabricRepeat=this.partList[this.selectedPart].fabrics[index].part_fabric.repeat||1),this.$store.commit("combination/selectMaterial",index),this.dropdownFabricIndex=index,this.form=eval("("+this.data.parts[this.selectedPart].fabrics[index].material+")")},selectSceneFabric:function(e){this.selectedSceneFabric=e,this.$editor.loadGlobalMaterial(e,this.sceneFabricList[e].material,this.sceneFabricList[e].scene_fabric.repeat||1),this.sceneFabricRepeat=this.sceneFabricList[e].scene_fabric.repeat||1},selectFabricGroup:function(e){this.fabricGroupRepeat=this.fabricGroupList[e].repeat||1,this.$store.commit("combination/selectFabricGroup",e)},selectGroupFabric:function(e){this.$editor.loadGroupMaterial(this.fabricGroupList[this.selectedFabricGroup].fabrics[e].id,this.fabricGroupList[this.selectedFabricGroup].tag,JSON.parse(this.fabricGroupList[this.selectedFabricGroup].fabrics[e].material),this.fabricGroupList[this.selectedFabricGroup].fabrics[e].fabric_group_fabric.repeat||this.fabricGroupList[this.selectedFabricGroup].repeat||1),this.fabricGroupList[this.selectedFabricGroup].fabrics[e].fabric_group_fabric&&(this.groupFabricRepeat=this.fabricGroupList[this.selectedFabricGroup].fabrics[e].fabric_group_fabric.repeat||1),this.$store.commit("combination/selectGroupFabric",e)},changePartRepeat:function(e){this.partList[this.selectedPart]&&this.partList[this.selectedPart].repeat!==e&&this.$store.dispatch("combination/changePartRepeat",{index:this.selectedPart,repeat:e})},changeChildFabricRepeat:function(e){this.partList[this.selectedPart]&&this.partList[this.selectedPart].repeat!==e&&this.$store.dispatch("combination/changeChildFabricRepeat",{pIndex:this.selectedPart,cIndex:this.selectedComponents,ccIndex:this.dropdownChildComponentIndex,repeat:e})},changeCastShadow:function(){this.$store.dispatch("combination/changeCastShadow",{index:this.selectedPart,castShadow:this.castShadow})},changeShadow:function(){this.$store.dispatch("combination/changeShadow",{index:this.data.id,shadowSwitch:this.shadowSwitch})},changeLightBias:function(){this.$store.dispatch("combination/changeLightBias",{index:this.data.id,lightBias:this.LightBias})},changeBackground:function(){this.$editor.changeBackground(this.bg.bgController),this.$store.dispatch("combination/changeBackground",{index:this.data.id,bgController:__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify___default()(this.bg)})},changeEnvMaps:function(){this.bg.envController?this.$editor.changeEnvMaps(this.bg.isEnv,this.bg.envController):this.$editor.changeEnvMaps(this.bg.isEnv,0),this.bg.isEnv?this.options[1].disabled=!1:(this.options[1].disabled=!0,1==this.bg.bgController&&(this.bg.bgController=0)),this.$store.dispatch("combination/changeBackground",{index:this.data.id,bgController:__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify___default()(this.bg)})},changeClothesLight:function(){this.$store.dispatch("combination/changeClothesLight",{index:this.data.id,clothesLight:__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify___default()(this.clothesLight)})},changeBloom:function(){this.$store.dispatch("combination/changeBloom",{index:this.data.id,bloom:__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify___default()(this.bloom)})},changeExposure:function(){this.$store.dispatch("combination/changeExposure",{index:this.data.id,exposure:this.exposure})},changeFabricRepeat:function(e){this.fabricList[this.selectedMaterial].part_fabric.repeat!==e&&this.$store.dispatch("combination/changeFabricRepeat",{index:this.selectedMaterial,repeat:e})},changeGlobalRepeat:function(e){this.sceneFabricList[this.selectedSceneFabric]&&this.sceneFabricList[this.selectedSceneFabric].scene_fabric.repeat!==e&&this.$store.dispatch("combination/changeSceneFabricRepeat",{index:this.selectedSceneFabric,repeat:e})},changeFabricGroupRepeat:function(e){this.fabricGroupList[this.selectedFabricGroup]&&this.fabricGroupList[this.selectedFabricGroup].repeat!==e&&this.$store.dispatch("combination/changeFabricGroupRepeat",{index:this.selectedFabricGroup,repeat:e})},changeGroupFabricRepeat:function(e){this.fabricGroupList[this.selectedFabricGroup].fabrics&&this.fabricGroupList[this.selectedFabricGroup].fabrics[this.selectedGroupFabric].fabric_group_fabric&&this.fabricGroupList[this.selectedFabricGroup].fabrics[this.selectedGroupFabric].fabric_group_fabric.repeat!==e&&this.$store.dispatch("combination/changeGroupFabricRepeat",{index:this.selectedGroupFabric,repeat:e})},addComponent:function(){this.$refs.componentDialog.open(!1)},addChildComponent:function(){this.$refs.childComponentDialog.open(!1)},addMaterial:function(){this.$refs.materialDialog.open(!0)},addGlobalMaterial:function(){this.$refs.globalMaterialDialog.open()},addFabricGroup:function(){this.$refs.fabricGroupDialog.open(!1)},addChildMaterial:function(e){this.$refs.materialDialog.open(!1,e)},addGroupMaterial:function(){this.$refs.groupFabricDialog.open(!0)},bindModel:function(){var e=this;this.$refs.modelSelect.open(function(t){e.$store.dispatch("combination/bindModel",t.id).then(function(){e.$editor.loadMote(e.model),e.$message.success("绑定成功")})})},postGoods:function(){var e=this;if(-1!==this.selectedGoodsIndex)return this.shelves=!0,void this.$store.dispatch("goods/shelves",this.selectedGoodsIndex);for(var t=[],i=0;i<this.partList.length;i++)t.push({partId:this.partList[i].id,componentId:this.partList[i].components[this.$store.state.combination.selectedComponents[i]].id});this.$store.dispatch("goods/post",{sceneId:this.$store.state.combination.data.id,fabricId:this.sceneFabricList[this.selectedSceneFabric].id,materials:__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify___default()(t)}).then(function(t){e.shelves=!0})},offShelves:function(){this.shelves=!1,this.$store.dispatch("goods/offShelves",this.selectedGoodsIndex)},showShelves:function(){this.$refs.shelvesDialog.open(this.$store.state.combination.data.id)},handleRightMenu:function(e){var t=this;switch(e){case"remove":this.$confirm("此操作将永久删除该部件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("combination/removePart",t.dropdownIndex).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(e){t.$message({type:"error",message:"删除失败!"+e})})}).catch(function(e){});break;case"edit":this.$refs.partDialog.open(!0,this.dropdownIndex);break;case"removeComponent":this.$confirm("此操作将永久删除该组件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("combination/removeComponent",t.dropdownComponentIndex).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(e){t.$message({type:"error",message:"删除失败!"+e})})}).catch(function(e){});break;case"editComponent":this.$refs.componentDialog.open(!0,this.dropdownComponentIndex);break;case"removeFabric":this.$confirm("此操作将从选中部件永久删除该面料, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("combination/removeFabric",t.dropdownFabricIndex).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(e){t.$message({type:"error",message:"删除失败!"+e})})}).catch(function(e){});break;case"editChildComponent":this.$refs.childComponentDialog.open(!0,this.dropdownChildComponentIndex);break;case"removeChildComponent":this.$store.dispatch("combination/removeChildComponent",this.dropdownChildComponentIndex).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(e){t.$message({type:"error",message:"删除失败!"+e})});break;case"removeSceneFabric":this.$confirm("此操作将永久删除该面料于当前场景的关联, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("combination/removeSceneFabric",t.dropdownSceneFabricIndex)});break;case"editFabricGroup":this.$refs.fabricGroupDialog.open(!0,this.dropdownFabricGroupIndex);break;case"openFabricController":var i=this.dropdownFabricIndex,a=this.data.parts[this.selectedPart].fabrics[i].material;this.fabricId=this.data.parts[this.selectedPart].fabrics[i].id,this.openFabricController(a);break;case"removeFabricGroup":this.$confirm("此操作将永久删除该面料组, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("combination/removeFabricGroup",t.dropdownFabricGroupIndex).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(e){t.$message({type:"error",message:"删除失败!"+e})})}).catch(function(e){});break;case"removeFabricGroupFabric":this.$confirm("此操作将从选中部件永久删除该面料, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("combination/removeFabricGroupFabric",t.dropdownGroupFabricIndex).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(e){t.$message({type:"error",message:"删除失败!"+e})})}).catch(function(e){});break;case"removeEmbroidery":this.$confirm("此操作将永久删除该组件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("combination/removeEmbroidery",t.dropdownEmbroideryIndex).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(e){t.$message({type:"error",message:"删除失败!"+e})})}).catch(function(e){})}}}}},755:function(e,t,i){t=e.exports=i(76)(!0),t.push([e.i,".material-left-menu{width:140px;float:left;min-height:300px;padding:0;margin:0;list-style:none;border-right:1px solid #eee;color:#999;font-size:14px;cursor:pointer}.material-left-menu li{padding:8px 0}.material-left-menu .active{color:#333;font-size:16px;cursor:default}.material-right{float:left;width:410px;padding:16px;margin:0;list-style:none;max-height:400px;overflow-y:auto}.material-right li{width:92px;height:114px;margin:4px;border:1px solid #eee;font-size:12px;float:left}.material-right li img{width:92px;height:92px}.material-right .active{border-color:#20a0ff}.material-dialog{width:612px}","",{version:3,sources:["/var/gdpublic/gdpublic/components/editor/material-dialog.vue"],names:[],mappings:"AACA,oBACI,YAAa,AACb,WAAY,AACZ,iBAAkB,AAClB,UAAW,AACX,SAAU,AACV,gBAAiB,AACjB,4BAA6B,AAC7B,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,uBACI,aAAe,CAClB,AACD,4BACI,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,gBACI,WAAY,AACZ,YAAa,AACb,aAAc,AACd,SAAU,AACV,gBAAiB,AACjB,iBAAkB,AAClB,eAAiB,CACpB,AACD,mBACI,WAAY,AACZ,aAAc,AACd,WAAY,AACZ,sBAAuB,AACvB,eAAgB,AAChB,UAAY,CACf,AACD,uBACI,WAAY,AACZ,WAAa,CAChB,AACD,wBACI,oBAAsB,CACzB,AACD,iBACI,WAAa,CAChB",file:"material-dialog.vue",sourcesContent:["\n.material-left-menu {\n    width: 140px;\n    float: left;\n    min-height: 300px;\n    padding: 0;\n    margin: 0;\n    list-style: none;\n    border-right: 1px solid #eee;\n    color: #999;\n    font-size: 14px;\n    cursor: pointer;\n}\n.material-left-menu li {\n    padding: 8px 0;\n}\n.material-left-menu .active {\n    color: #333;\n    font-size: 16px;\n    cursor: default;\n}\n.material-right {\n    float: left;\n    width: 410px;\n    padding: 16px;\n    margin: 0;\n    list-style: none;\n    max-height: 400px;\n    overflow-y: auto;\n}\n.material-right li {\n    width: 92px;\n    height: 114px;\n    margin: 4px;\n    border: 1px solid #eee;\n    font-size: 12px;\n    float: left;\n}\n.material-right li img {\n    width: 92px;\n    height: 92px;\n}\n.material-right .active {\n    border-color: #20a0ff;\n}\n.material-dialog {\n    width: 612px;\n}\n"],sourceRoot:""}])},763:function(e,t,i){t=e.exports=i(76)(!0),t.push([e.i,".material-left-menu{width:140px;float:left;min-height:300px;padding:0;margin:0;list-style:none;border-right:1px solid #eee;color:#999;font-size:14px;cursor:pointer}.material-left-menu li{padding:8px 0}.material-left-menu .active{color:#333;font-size:16px;cursor:default}.material-right{float:left;width:410px;padding:16px;margin:0;list-style:none;max-height:400px;overflow-y:auto}.material-right li{width:92px;height:114px;margin:4px;border:1px solid #eee;font-size:12px;float:left}.material-right li img{width:92px;height:92px}.material-right .active{border-color:#20a0ff}.material-dialog{width:612px}","",{version:3,sources:["/var/gdpublic/gdpublic/components/editor/global-material-dialog.vue"],names:[],mappings:"AACA,oBACI,YAAa,AACb,WAAY,AACZ,iBAAkB,AAClB,UAAW,AACX,SAAU,AACV,gBAAiB,AACjB,4BAA6B,AAC7B,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,uBACI,aAAe,CAClB,AACD,4BACI,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,gBACI,WAAY,AACZ,YAAa,AACb,aAAc,AACd,SAAU,AACV,gBAAiB,AACjB,iBAAkB,AAClB,eAAiB,CACpB,AACD,mBACI,WAAY,AACZ,aAAc,AACd,WAAY,AACZ,sBAAuB,AACvB,eAAgB,AAChB,UAAY,CACf,AACD,uBACI,WAAY,AACZ,WAAa,CAChB,AACD,wBACI,oBAAsB,CACzB,AACD,iBACI,WAAa,CAChB",file:"global-material-dialog.vue",sourcesContent:["\n.material-left-menu {\n    width: 140px;\n    float: left;\n    min-height: 300px;\n    padding: 0;\n    margin: 0;\n    list-style: none;\n    border-right: 1px solid #eee;\n    color: #999;\n    font-size: 14px;\n    cursor: pointer;\n}\n.material-left-menu li {\n    padding: 8px 0;\n}\n.material-left-menu .active {\n    color: #333;\n    font-size: 16px;\n    cursor: default;\n}\n.material-right {\n    float: left;\n    width: 410px;\n    padding: 16px;\n    margin: 0;\n    list-style: none;\n    max-height: 400px;\n    overflow-y: auto;\n}\n.material-right li {\n    width: 92px;\n    height: 114px;\n    margin: 4px;\n    border: 1px solid #eee;\n    font-size: 12px;\n    float: left;\n}\n.material-right li img {\n    width: 92px;\n    height: 92px;\n}\n.material-right .active {\n    border-color: #20a0ff;\n}\n.material-dialog {\n    width: 612px;\n}\n"],sourceRoot:""}])},764:function(e,t,i){t=e.exports=i(76)(!0),t.push([e.i,".material-left-menu{width:158px;float:left;min-height:300px;padding:0;margin:0;list-style:none;border-right:1px solid #eee;color:#999;font-size:14px;cursor:pointer}.material-left-menu li{padding:8px 0}.material-left-menu .active{color:#333;font-size:16px;cursor:default}.material-right{float:left;width:410px;padding:16px;margin:0;list-style:none;max-height:400px;overflow-y:auto}.material-right li{width:92px;height:114px;margin:4px;border:1px solid #eee;font-size:12px;float:left}.material-right li img{width:92px;height:92px}.material-right .active{border-color:#20a0ff}.material-dialog{width:650px!important}","",{version:3,sources:["/var/gdpublic/gdpublic/components/editor/embroidery-select.vue"],names:[],mappings:"AACA,oBACI,YAAa,AACb,WAAY,AACZ,iBAAkB,AAClB,UAAW,AACX,SAAU,AACV,gBAAiB,AACjB,4BAA6B,AAC7B,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,uBACI,aAAe,CAClB,AACD,4BACI,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,gBACI,WAAY,AACZ,YAAa,AACb,aAAc,AACd,SAAU,AACV,gBAAiB,AACjB,iBAAkB,AAClB,eAAiB,CACpB,AACD,mBACI,WAAY,AACZ,aAAc,AACd,WAAY,AACZ,sBAAuB,AACvB,eAAgB,AAChB,UAAY,CACf,AACD,uBACI,WAAY,AACZ,WAAa,CAChB,AACD,wBACI,oBAAsB,CACzB,AACD,iBACI,qBAAwB,CAC3B",file:"embroidery-select.vue",sourcesContent:["\n.material-left-menu {\n    width: 158px;\n    float: left;\n    min-height: 300px;\n    padding: 0;\n    margin: 0;\n    list-style: none;\n    border-right: 1px solid #eee;\n    color: #999;\n    font-size: 14px;\n    cursor: pointer;\n}\n.material-left-menu li {\n    padding: 8px 0;\n}\n.material-left-menu .active {\n    color: #333;\n    font-size: 16px;\n    cursor: default;\n}\n.material-right {\n    float: left;\n    width: 410px;\n    padding: 16px;\n    margin: 0;\n    list-style: none;\n    max-height: 400px;\n    overflow-y: auto;\n}\n.material-right li {\n    width: 92px;\n    height: 114px;\n    margin: 4px;\n    border: 1px solid #eee;\n    font-size: 12px;\n    float: left;\n}\n.material-right li img {\n    width: 92px;\n    height: 92px;\n}\n.material-right .active {\n    border-color: #20a0ff;\n}\n.material-dialog {\n    width: 650px !important;\n}\n"],sourceRoot:""}])},776:function(e,t,i){t=e.exports=i(76)(!0),t.push([e.i,".editor-bottom-btn-box-right{width:228px;position:fixed;right:16px;overflow:hidden;background:#f5f5f5;border-top:1px solid #ccc;height:48px;bottom:0;z-index:2000;padding:0 16px;margin-top:8px;line-height:22px}.editor-bottom-btn{width:100%;margin-top:8px;line-height:34px;border-radius:4px;background:#373d41;text-align:center;cursor:pointer;color:#fff;-webkit-transition:background .3s;-o-transition:background .3s;transition:background .3s}#scene-setting{right:0;background:#eee;width:310px;overflow-y:auto;padding-bottom:50px;border-left:1px solid #ccc}#editor,#scene-setting{position:absolute;top:0;bottom:0}#editor{left:0;right:260px}.tab{height:24px;border-bottom:1px solid #ccc;border-top:1px solid #fff;padding-top:10px;margin-bottom:1px}.tab-item{height:24px;line-height:24px;float:left;padding:0 8px;margin:0 4px;border-left:1px solid #ccc;border-right:1px solid #ccc;border-top-right-radius:4px;border-top-left-radius:4px;background:#ddd;border-top:1px solid #ccc;font-size:12px;cursor:pointer;color:#666}.tab-item.active{background:#eee;height:25px;cursor:default}.tool-bar{background:#e5e5e5;border-top:1px solid #ccc;border-bottom:1px solid rgba(0,0,0,.25)}.tool-bar,.tool-bar .icon{height:30px;line-height:30px}.tool-bar .icon{width:30px;text-align:center;float:right;cursor:pointer;color:#666}.component-list,.list{list-style:none;padding:0;margin:0;height:180px;overflow-y:auto}.component-item,.list-item{font-size:14px;height:38px;line-height:38px;padding:0 16px;background:#ebebeb;-webkit-transition:background .3s;-o-transition:background .3s;transition:background .3s;cursor:pointer;color:#888;border-bottom:1px solid #e5e5e5}.list-item:hover{background:#f5f5f5;color:#666}.component-item.active,.component-item:active,.list-item.active,.list-item:active{background:#f9f9f9;color:#333}.list-item .icon{float:right}.component-item{height:50px;line-height:50px;overflow:hidden}.image-box{display:block;float:right;margin:5px;border:1px solid #ccc}.image-box,.image-box img{width:38px;height:38px}.slide-bar{padding:0 16px;height:34px;line-height:34px}.slide-label{font-size:12px;color:#999;margin-right:16px;width:42px}.slide,.slide-label{display:block;float:left}.slide{width:170px}#progress-bar{position:fixed;top:100px;left:50px;width:100px}#embroidery-editor{position:absolute;bottom:18px;width:400px;height:36px;margin:0 auto;left:0;right:260px;background:#fff;padding:16px}#embroidery-editor .el-slider{width:300px}.list-title{text-align:center;line-height:50px;color:#666}.box-card{width:280px;padding:0}.card-list{margin:0;list-style:none;padding:0}.card-list li{height:50px}.card-list li>span{width:30%;margin:8px 0;display:inline-block}.card-list li>div{width:65%;float:right}.card-item-margin{margin:8px 6px 8px 0}.settings-widget{width:280px;border-bottom:1px solid rgba(0,0,0,.25);border-top:1px solid #fff}.settings-widget tr{line-height:25px}#save-btn{width:100%;margin-top:38px;line-height:34px;border-radius:4px;background:#f53;text-align:center;cursor:pointer;color:#fff;-webkit-transition:background .3s;-o-transition:background .3s;transition:background .3s}.bottom-btn-box-right{width:228px;position:fixed;right:0;overflow:hidden;background:#f5f5f5;border-top:1px solid #ccc;height:100px;bottom:0;z-index:2000;padding:0 16px;margin-top:8px;line-height:22px}.bottom-btn{width:100%;margin-top:8px;line-height:34px;border-radius:4px;background:#373d41;text-align:center;cursor:pointer;color:#fff;-webkit-transition:background .3s;-o-transition:background .3s;transition:background .3s}","",{version:3,sources:["/var/gdpublic/gdpublic/pages/editor/scene/_id.vue"],names:[],mappings:"AACA,6BACI,YAAa,AACb,eAAgB,AAChB,WAAY,AACZ,gBAAiB,AACjB,mBAAoB,AACpB,0BAA2B,AAC3B,YAAa,AACb,SAAU,AACV,aAAc,AACd,eAAgB,AAChB,eAAgB,AAChB,gBAAkB,CACrB,AACD,mBACI,WAAY,AACZ,eAAgB,AAChB,iBAAkB,AAClB,kBAAmB,AACnB,mBAAoB,AACpB,kBAAmB,AACnB,eAAgB,AAChB,WAAY,AACZ,kCAAmC,AACnC,6BAA8B,AAC9B,yBAA2B,CAC9B,AACD,eAGI,QAAS,AAET,gBAAiB,AACjB,YAAa,AACb,gBAAiB,AACjB,oBAAqB,AACrB,0BAA4B,CAC/B,AACD,uBAVI,kBAAmB,AACnB,MAAO,AAEP,QAAU,CAab,AAND,QAGI,OAAQ,AACR,WAAa,CAEhB,AACD,KACI,YAAa,AACb,6BAA8B,AAC9B,0BAA2B,AAC3B,iBAAkB,AAClB,iBAAmB,CACtB,AACD,UACI,YAAa,AACb,iBAAkB,AAClB,WAAY,AACZ,cAAe,AACf,aAAc,AACd,2BAA4B,AAC5B,4BAA6B,AAC7B,4BAA6B,AAC7B,2BAA4B,AAC5B,gBAAiB,AACjB,0BAA2B,AAC3B,eAAgB,AAChB,eAAgB,AAChB,UAAY,CACf,AACD,iBACI,gBAAiB,AACjB,YAAa,AACb,cAAgB,CACnB,AACD,UAGI,mBAAoB,AACpB,0BAA2B,AAE3B,uCAA4C,CAE/C,AACD,0BARI,YAAa,AACb,gBAAkB,CAerB,AARD,gBAEI,WAAY,AACZ,kBAAmB,AAEnB,YAAa,AACb,eAAgB,AAChB,UAAY,CACf,AACD,sBACI,gBAAiB,AACjB,UAAW,AACX,SAAU,AACV,aAAc,AACd,eAAiB,CACpB,AACD,2BACI,eAAgB,AAChB,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,mBAAoB,AACpB,kCAAmC,AACnC,6BAA8B,AAC9B,0BAA2B,AAC3B,eAAgB,AAChB,WAAY,AACZ,+BAAiC,CACpC,AACD,iBACI,mBAAoB,AACpB,UAAW,CACd,AACD,kFAII,mBAAoB,AACpB,UAAY,CACf,AACD,iBACI,WAAY,CACf,AACD,gBACI,YAAa,AACb,iBAAkB,AAClB,eAAiB,CACpB,AACD,WAGI,cAAe,AACf,YAAa,AACb,WAAY,AACZ,qBAAuB,CAC1B,AACD,0BAPI,WAAY,AACZ,WAAa,CAShB,AACD,WACI,eAAgB,AAChB,YAAa,AACb,gBAAkB,CACrB,AACD,aACI,eAAgB,AAChB,WAAY,AAGZ,kBAAmB,AACnB,UAAY,CACf,AACD,oBALI,cAAe,AACf,UAAY,CAQf,AAJD,OAGI,WAAa,CAChB,AAGD,cACI,eAAgB,AAChB,UAAW,AACX,UAAW,AACX,WAAa,CAChB,AACD,mBACI,kBAAmB,AACnB,YAAa,AACb,YAAa,AACb,YAAa,AACb,cAAe,AACf,OAAQ,AACR,YAAa,AACb,gBAAiB,AACjB,YAAc,CACjB,AACD,8BACI,WAAa,CAChB,AACD,YACI,kBAAmB,AACnB,iBAAkB,AAClB,UAAY,CACf,AAED,UACE,YAAa,AACb,SAAU,CACX,AACD,WACI,SAAU,AACV,gBAAiB,AACjB,SAAW,CACd,AACD,cACI,WAAa,CAChB,AACD,mBACI,UAAW,AACX,aAAc,AACd,oBAAsB,CACzB,AACD,kBACI,UAAW,AACX,WAAa,CAChB,AAED,kBACC,oBAAsB,CACtB,AACD,iBACI,YAAa,AACb,wCAA4C,AAC5C,yBAA2B,CAC9B,AACD,oBACI,gBAAkB,CACrB,AACD,UACI,WAAY,AACZ,gBAAiB,AACjB,iBAAkB,AAClB,kBAAmB,AACnB,gBAAiB,AACjB,kBAAmB,AACnB,eAAgB,AAChB,WAAY,AACZ,kCAAmC,AACnC,6BAA8B,AAC9B,yBAA2B,CAC9B,AACD,sBACI,YAAa,AACb,eAAgB,AAChB,QAAS,AACT,gBAAiB,AACjB,mBAAoB,AACpB,0BAA2B,AAC3B,aAAc,AACd,SAAU,AACV,aAAc,AACd,eAAgB,AAChB,eAAgB,AAChB,gBAAkB,CACrB,AACD,YACI,WAAY,AACZ,eAAgB,AAChB,iBAAkB,AAClB,kBAAmB,AACnB,mBAAoB,AACpB,kBAAmB,AACnB,eAAgB,AAChB,WAAY,AACZ,kCAAmC,AACnC,6BAA8B,AAC9B,yBAA2B,CAC9B",file:"_id.vue",sourcesContent:["\n.editor-bottom-btn-box-right {\n    width: 228px;\n    position: fixed;\n    right: 16px;\n    overflow: hidden;\n    background: #f5f5f5;\n    border-top: 1px solid #ccc;\n    height: 48px;\n    bottom: 0;\n    z-index: 2000;\n    padding: 0 16px;\n    margin-top: 8px;\n    line-height: 22px;\n}\n.editor-bottom-btn {\n    width: 100%;\n    margin-top: 8px;\n    line-height: 34px;\n    border-radius: 4px;\n    background: #373d41;\n    text-align: center;\n    cursor: pointer;\n    color: #fff;\n    -webkit-transition: background .3s;\n    -o-transition: background .3s;\n    transition: background .3s;\n}\n#scene-setting {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    background: #eee;\n    width: 310px;\n    overflow-y: auto;\n    padding-bottom: 50px;\n    border-left: 1px solid #ccc;\n}\n#editor {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 260px;\n    bottom: 0\n}\n.tab {\n    height: 24px;\n    border-bottom: 1px solid #ccc;\n    border-top: 1px solid #fff;\n    padding-top: 10px;\n    margin-bottom: 1px;\n}\n.tab-item {\n    height: 24px;\n    line-height: 24px;\n    float: left;\n    padding: 0 8px;\n    margin: 0 4px;\n    border-left: 1px solid #ccc;\n    border-right: 1px solid #ccc;\n    border-top-right-radius: 4px;\n    border-top-left-radius: 4px;\n    background: #ddd;\n    border-top: 1px solid #ccc;\n    font-size: 12px;\n    cursor: pointer;\n    color: #666;\n}\n.tab-item.active {\n    background: #eee;\n    height: 25px;\n    cursor: default;\n}\n.tool-bar {\n    height: 30px;\n    line-height: 30px;\n    background: #e5e5e5;\n    border-top: 1px solid #ccc;\n    /*border-bottom:2px solid #ccc;*/\n    border-bottom: 1px solid rgba(0, 0, 0, .25);\n    /*border-top: 1px solid #fff;*/\n}\n.tool-bar .icon {\n    height: 30px;\n    width: 30px;\n    text-align: center;\n    line-height: 30px;\n    float: right;\n    cursor: pointer;\n    color: #666;\n}\n.list, .component-list {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n    height: 180px;\n    overflow-y: auto;\n}\n.list-item, .component-item {\n    font-size: 14px;\n    height: 38px;\n    line-height: 38px;\n    padding: 0 16px;\n    background: #ebebeb;\n    -webkit-transition: background .3s;\n    -o-transition: background .3s;\n    transition: background .3s;\n    cursor: pointer;\n    color: #888;\n    border-bottom: 1px solid #e5e5e5;\n}\n.list-item:hover {\n    background: #f5f5f5;\n    color: #666\n}\n.list-item:active,\n.list-item.active,\n.component-item:active,\n.component-item.active {\n    background: #f9f9f9;\n    color: #333;\n}\n.list-item .icon {\n    float: right\n}\n.component-item {\n    height: 50px;\n    line-height: 50px;\n    overflow: hidden;\n}\n.image-box {\n    width: 38px;\n    height: 38px;\n    display: block;\n    float: right;\n    margin: 5px;\n    border: 1px solid #ccc;\n}\n.image-box img {\n    width: 38px;\n    height: 38px;\n}\n.slide-bar {\n    padding: 0 16px;\n    height: 34px;\n    line-height: 34px;\n}\n.slide-label {\n    font-size: 12px;\n    color: #999;\n    display: block;\n    float: left;\n    margin-right: 16px;\n    width: 42px;\n}\n.slide {\n    display: block;\n    float: left;\n    width: 170px;\n}\n\n/*光照交互进度条*/\n#progress-bar {\n    position: fixed;\n    top: 100px;\n    left: 50px;\n    width: 100px;\n}\n#embroidery-editor {\n    position: absolute;\n    bottom: 18px;\n    width: 400px;\n    height: 36px;\n    margin: 0 auto;\n    left: 0;\n    right: 260px;\n    background: #fff;\n    padding: 16px;\n}\n#embroidery-editor .el-slider {\n    width: 300px;\n}\n.list-title {\n    text-align: center;\n    line-height: 50px;\n    color: #666;\n}\n/* 场景调试器 */\n.box-card {\n  width: 280px;\n  padding:0;\n}\n.card-list{\n    margin: 0;\n    list-style: none;\n    padding: 0;\n}\n.card-list li{\n    height: 50px;\n}\n.card-list li>span{\n    width: 30%;\n    margin: 8px 0;\n    display: inline-block;\n}\n.card-list li>div{\n    width: 65%;\n    float: right;\n}\n/*场景调试器样式结束*/\n.card-item-margin{\n margin: 8px 6px 8px 0;\n}\n.settings-widget {\n    width: 280px;\n    border-bottom: 1px solid rgba(0, 0, 0, .25);\n    border-top: 1px solid #fff;\n}\n.settings-widget tr {\n    line-height: 25px;\n}\n#save-btn {\n    width: 100%;\n    margin-top: 38px;\n    line-height: 34px;\n    border-radius: 4px;\n    background: #f53;\n    text-align: center;\n    cursor: pointer;\n    color: #fff;\n    -webkit-transition: background .3s;\n    -o-transition: background .3s;\n    transition: background .3s;\n}\n.bottom-btn-box-right {\n    width: 228px;\n    position: fixed;\n    right: 0;\n    overflow: hidden;\n    background: #F5F5F5;\n    border-top: 1px solid #ccc;\n    height: 100px;\n    bottom: 0;\n    z-index: 2000;\n    padding: 0 16px;\n    margin-top: 8px;\n    line-height: 22px;\n}\n.bottom-btn {\n    width: 100%;\n    margin-top: 8px;\n    line-height: 34px;\n    border-radius: 4px;\n    background: #373D41;\n    text-align: center;\n    cursor: pointer;\n    color: #fff;\n    -webkit-transition: background .3s;\n    -o-transition: background .3s;\n    transition: background .3s;\n}\n"],sourceRoot:""}])},777:function(e,t,i){t=e.exports=i(76)(!0),t.push([e.i,".material-left-menu{width:140px;float:left;min-height:300px;padding:0;margin:0;list-style:none;border-right:1px solid #eee;color:#999;font-size:14px;cursor:pointer}.material-left-menu li{padding:8px 0}.material-left-menu .active{color:#333;font-size:16px;cursor:default}.material-right{float:left;width:410px;padding:16px;margin:0;list-style:none;max-height:400px;overflow-y:auto}.material-right li{width:92px;height:114px;margin:4px;border:1px solid #eee;font-size:12px;float:left}.material-right li img{width:92px;height:92px}.material-right .active{border-color:#20a0ff}.material-dialog{width:612px}","",{version:3,sources:["/var/gdpublic/gdpublic/components/editor/group-fabric-dialog.vue"],names:[],mappings:"AACA,oBACI,YAAa,AACb,WAAY,AACZ,iBAAkB,AAClB,UAAW,AACX,SAAU,AACV,gBAAiB,AACjB,4BAA6B,AAC7B,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,uBACI,aAAe,CAClB,AACD,4BACI,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,gBACI,WAAY,AACZ,YAAa,AACb,aAAc,AACd,SAAU,AACV,gBAAiB,AACjB,iBAAkB,AAClB,eAAiB,CACpB,AACD,mBACI,WAAY,AACZ,aAAc,AACd,WAAY,AACZ,sBAAuB,AACvB,eAAgB,AAChB,UAAY,CACf,AACD,uBACI,WAAY,AACZ,WAAa,CAChB,AACD,wBACI,oBAAsB,CACzB,AACD,iBACI,WAAa,CAChB",file:"group-fabric-dialog.vue",sourcesContent:["\n.material-left-menu {\n    width: 140px;\n    float: left;\n    min-height: 300px;\n    padding: 0;\n    margin: 0;\n    list-style: none;\n    border-right: 1px solid #eee;\n    color: #999;\n    font-size: 14px;\n    cursor: pointer;\n}\n.material-left-menu li {\n    padding: 8px 0;\n}\n.material-left-menu .active {\n    color: #333;\n    font-size: 16px;\n    cursor: default;\n}\n.material-right {\n    float: left;\n    width: 410px;\n    padding: 16px;\n    margin: 0;\n    list-style: none;\n    max-height: 400px;\n    overflow-y: auto;\n}\n.material-right li {\n    width: 92px;\n    height: 114px;\n    margin: 4px;\n    border: 1px solid #eee;\n    font-size: 12px;\n    float: left;\n}\n.material-right li img {\n    width: 92px;\n    height: 92px;\n}\n.material-right .active {\n    border-color: #20a0ff;\n}\n.material-dialog {\n    width: 612px;\n}\n"],sourceRoot:""}])},797:function(e,t,i){var a=i(75)(i(702),i(842),null,null,null);e.exports=a.exports},799:function(e,t,i){var a=i(75)(i(704),i(833),null,null,null);e.exports=a.exports},800:function(e,t,i){function a(e){i(884)}var n=i(75)(i(705),i(843),a,null,null);e.exports=n.exports},801:function(e,t,i){var a=i(75)(i(706),i(859),null,null,null);e.exports=a.exports},802:function(e,t,i){function a(e){i(883)}var n=i(75)(i(707),i(840),a,null,null);e.exports=n.exports},803:function(e,t,i){function a(e){i(897)}var n=i(75)(i(708),i(862),a,null,null);e.exports=n.exports},804:function(e,t,i){function a(e){i(875)}var n=i(75)(i(709),i(827),a,null,null);e.exports=n.exports},805:function(e,t,i){var a=i(75)(i(710),i(844),null,null,null);e.exports=a.exports},812:function(e,t,i){var a=i(75)(i(717),i(819),null,null,null);e.exports=a.exports},819:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"上架清单",visible:e.show},on:{"update:visible":function(t){e.show=t}}},[i("el-table",{attrs:{data:e.$store.state.goods.list}},[i("el-table-column",{attrs:{property:"id",label:"流水号",width:"80"}}),i("el-table-column",{attrs:{property:"shelves",label:"上架"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-checkbox",{attrs:{name:"shelves",checked:t.row.shelves,width:"40"},on:{change:function(i){e.changeShelves(t.row.id,!t.row.shelves)}}})]}}])}),i("el-table-column",{attrs:{property:"sku",label:"sku编号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input",{attrs:{value:t.row.sku},on:{change:e.markValue,focus:function(i){e.markId(t.row.id,t.row.sku)},blur:e.changeSku}})]}}])}),i("el-table-column",{attrs:{label:"组成",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.material,function(t){return i("div",{staticStyle:{color:"#999","font-size":"12px"}},[e._v(e._s(t.part.name)+" :\n                    "+e._s(t.component.name)+"\n                ")])}),i("div",{staticStyle:{color:"#999","font-size":"12px"}},[e._v("\n                    面料 ： "+e._s(t.row.fabric&&t.row.fabric.name)+"\n                ")])]}}])})],1),i("div",[i("a",{attrs:{href:"/goods/export/"+e.$store.state.goods.currentSceneId+".xlsx"}},[e._v("导出清单")])])],1)},staticRenderFns:[]}},827:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"新增面料",visible:e.show,"custom-class":"material-dialog"},on:{"update:visible":function(t){e.show=t}}},[i("div",{staticStyle:{width:"600px",overflow:"hidden"}},[i("ul",{staticClass:"material-left-menu"},e._l(e.$store.state.category.list,function(t,a){return i("li",{class:{active:a===e.selectedIndex},on:{click:function(t){e.change(a)}}},[e._v("\n                "+e._s(t.name)+"\n            ")])})),i("ul",{staticClass:"material-right"},e._l(e.data[e.selectedIndex],function(t,a){return i("li",{class:{active:t.active},on:{click:function(t){e.select(a)}}},[i("img",{attrs:{src:e.getImagePath("/min/"+t.image)}}),i("div",[e._v(e._s(t.name))])])}))]),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.postMaterial}},[e._v("确 定")])],1)])},staticRenderFns:[]}},833:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.edit?"修改组件":"新增组件",visible:e.show},on:{"update:visible":function(t){e.show=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"组件名称",prop:"name"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"部件编号",prop:"number"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.number,callback:function(t){e.form.number=t},expression:"form.number"}})],1),i("el-form-item",{attrs:{label:"面料组标记",prop:"tag"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.tag,callback:function(t){e.form.tag=t},expression:"form.tag"}})],1),i("el-form-item",{attrs:{label:"封面图",prop:"image"}},[i("div",[i("br"),i("my-upload",{model:{value:e.form.image,callback:function(t){e.form.image=t},expression:"form.image"}})],1)]),i("el-form-item",{attrs:{label:"模型",prop:"model"}},[i("div",[i("br"),i("model-upload",{attrs:{value:e.form.model},on:{preview:e.previewChange},model:{value:e.form.model,callback:function(t){e.form.model=t},expression:"form.model"}})],1)])],1),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.postComponent}},[e._v("确 定")])],1)],1)},staticRenderFns:[]}},840:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"新增面料",visible:e.show,"custom-class":"material-dialog"},on:{"update:visible":function(t){e.show=t}}},[i("div",{staticStyle:{width:"600px",overflow:"hidden"}},[i("ul",{staticClass:"material-left-menu"},e._l(e.$store.state.category.list,function(t,a){return i("li",{class:{active:a===e.selectedIndex},on:{click:function(t){e.change(a)}}},[e._v("\n                "+e._s(t.name)+"\n            ")])})),i("ul",{staticClass:"material-right"},e._l(e.data[e.selectedIndex],function(t,a){return i("li",{class:{active:t.active},on:{click:function(t){e.select(a)}}},[i("img",{attrs:{src:e.getImagePath("/min/"+t.image)}}),i("div",[e._v(e._s(t.name))])])}))]),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.postMaterial}},[e._v("确 定")])],1)])},staticRenderFns:[]}},842:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.edit?"修改子组件":"新增子组件",visible:e.show},on:{"update:visible":function(t){e.show=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"面料组标记",prop:"tag"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.tag,callback:function(t){e.form.tag=t},expression:"form.tag"}})],1),i("el-form-item",{attrs:{label:"模型",prop:"model"}},[i("div",[i("br"),i("model-upload",{attrs:{value:e.form.model},on:{preview:e.previewChange},model:{value:e.form.model,callback:function(t){e.form.model=t},expression:"form.model"}})],1)])],1),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.postComponent}},[e._v("确 定")])],1)],1)},staticRenderFns:[]}},843:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"新增绣花",visible:e.show,"custom-class":"material-dialog"},on:{"update:visible":function(t){e.show=t}}},[i("div",{staticStyle:{overflow:"hidden"}},[i("ul",{staticClass:"material-left-menu"},e._l(e.$store.state.category.allCategory["manager-embroidery-id"],function(t,a){return i("li",{class:{active:a===e.selectedIndex},on:{click:function(t){e.change(a)}}},[e._v("\n                "+e._s(t.name)+"\n            ")])})),i("ul",{staticClass:"material-right"},e._l(e.data[e.selectedIndex],function(t,a){return i("li",{class:{active:t.active},on:{click:function(t){e.select(a)}}},[i("img",{attrs:{src:e.getImagePath("/min/"+t.image)}}),i("div",[e._v(e._s(t.name))])])}))]),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.postMaterial}},[e._v("确 定")])],1)])},staticRenderFns:[]}},844:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.edit?"修改部件":"新增部件",visible:e.show},on:{"update:visible":function(t){e.show=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"部件名称",prop:"name"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"部件编号",prop:"number"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.number,callback:function(t){e.form.number=t},expression:"form.number"}})],1),i("el-form-item",{attrs:{label:"封面图",prop:"image"}},[i("div",[i("br"),i("my-upload",{model:{value:e.form.image,callback:function(t){e.form.image=t},expression:"form.image"}})],1)])],1),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.postPart}},[e._v("确 定")])],1)],1)},staticRenderFns:[]}},859:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.edit?"修改面料组":"新增面料组",visible:e.show},on:{"update:visible":function(t){e.show=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"面料组名称",prop:"name"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"面料组编号",prop:"number"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.number,callback:function(t){e.form.number=t},expression:"form.number"}})],1),i("el-form-item",{attrs:{label:"面料组标记",prop:"tag"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.tag,callback:function(t){e.form.tag=t},expression:"form.tag"}})],1)],1),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.postGroup}},[e._v("确 定")])],1)],1)},staticRenderFns:[]}},861:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{attrs:{id:"editor"}}),i("div",{attrs:{id:"scene-setting"}},[i("div",[i("div",[i("div",{staticClass:"tab"},[i("div",{staticClass:"tab-item",class:{active:0===e.selectedSceneTab},on:{click:function(t){e.selectedSceneTab=0}}},[e._v("部件\n                    ")]),i("div",{staticClass:"tab-item",class:{active:1===e.selectedSceneTab},on:{click:function(t){e.selectedSceneTab=1}}},[e._v("\n                        全局面料\n                    ")]),i("div",{staticClass:"tab-item",class:{active:2===e.selectedSceneTab},on:{click:function(t){e.selectedSceneTab=2}}},[e._v("面料组\n                    ")]),i("div",{staticClass:"tab-item",class:{active:3===e.selectedSceneTab},on:{click:function(t){e.selectedSceneTab=3}}},[e._v("\n                        绣花\n                    ")]),i("div",{staticClass:"tab-item",class:{active:4===e.selectedSceneTab},on:{click:function(t){e.selectedSceneTab=4}}},[e._v("\n                        模特\n                    ")])]),0===e.selectedSceneTab?i("div",[i("ul",{staticClass:"list"},e._l(e.partList,function(t,a){return i("li",{staticClass:"list-item",class:{active:e.selectedPart==a},on:{click:function(t){if(t.target!==t.currentTarget)return null;e.selectPart(a)}}},[e._v("\n                            "+e._s(t.name)+"\n                            "),i("el-dropdown",{staticStyle:{float:"right"},attrs:{trigger:"click"},on:{command:e.handleRightMenu}},[i("span",{staticClass:"icon el-dropdown-link",on:{click:function(t){e.cacheIndex(a)}}},[e._v("")]),i("el-dropdown-menu",{slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"edit"}},[e._v("修改")]),i("el-dropdown-item",{attrs:{command:"remove"}},[e._v("删除")])],1)],1)],1)})),i("div",{staticClass:"slide-bar"},[i("span",{staticClass:"slide-label"},[e._v("Repeat")]),i("span",{staticClass:"slide"},[i("el-slider",{attrs:{min:1,max:50,step:.1,disabled:-1===e.selectedPart},on:{change:e.changePartRepeat},model:{value:e.partRepeat,callback:function(t){e.partRepeat=t},expression:"partRepeat"}}),[i("el-checkbox",{staticStyle:{"text-indent":"-30px"},attrs:{disabled:-1===e.selectedPart},on:{change:e.changeCastShadow},model:{value:e.castShadow,callback:function(t){e.castShadow=t},expression:"castShadow"}},[e._v("castShadow")])]],2)]),i("div",{staticClass:"tool-bar"},[i("i",{staticClass:"icon",attrs:{title:"添加部件"},on:{click:e.addPart}},[e._v("")])])]):e._e(),1===e.selectedSceneTab?i("div",[i("ul",{staticClass:"list"},e._l(e.sceneFabricList,function(t,a){return i("li",{staticClass:"list-item",class:{active:e.selectedSceneFabric==a},on:{click:function(t){if(t.target!==t.currentTarget)return null;e.selectSceneFabric(a)}}},[e._v("\n                            "+e._s(t.name)+"\n                            "),i("el-dropdown",{staticStyle:{float:"right"},attrs:{trigger:"click"},on:{command:e.handleRightMenu}},[i("span",{staticClass:"icon el-dropdown-link",on:{click:function(t){e.dropdownSceneFabricIndex=a}}},[e._v("")]),i("el-dropdown-menu",{slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"removeSceneFabric"}},[e._v("删除")])],1)],1),i("span",{staticClass:"image-box",staticStyle:{width:"26px",height:"26px"}},[t.image?i("img",{staticStyle:{width:"26px",height:"26px"},attrs:{src:e.getImagePath("/min/"+t.image)}}):e._e()])],1)})),i("div",{staticClass:"slide-bar"},[i("span",{staticClass:"slide-label"},[e._v("Repeat")]),i("span",{staticClass:"slide"},[i("el-slider",{attrs:{min:1,max:50,step:.1},on:{change:e.changeGlobalRepeat},model:{value:e.sceneFabricRepeat,callback:function(t){e.sceneFabricRepeat=t},expression:"sceneFabricRepeat"}})],1)]),i("div",{staticClass:"tool-bar"},[i("i",{staticClass:"icon",attrs:{title:"添加全局面料"},on:{click:e.addGlobalMaterial}},[e._v("")])])]):e._e(),2===e.selectedSceneTab?i("div",[i("ul",{staticClass:"list"},e._l(e.fabricGroupList,function(t,a){return i("li",{staticClass:"list-item",class:{active:e.selectedFabricGroup==a},on:{click:function(t){if(t.target!==t.currentTarget)return null;e.selectFabricGroup(a)}}},[e._v("\n                            "+e._s(t.name)+"\n                            "),i("el-dropdown",{staticStyle:{float:"right"},attrs:{trigger:"click"},on:{command:e.handleRightMenu}},[i("span",{staticClass:"icon el-dropdown-link",on:{click:function(t){e.dropdownFabricGroupIndex=a}}},[e._v("")]),i("el-dropdown-menu",{slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"editFabricGroup"}},[e._v("修改")]),i("el-dropdown-item",{attrs:{command:"removeFabricGroup"}},[e._v("删除")])],1)],1)],1)})),i("div",{staticClass:"slide-bar"},[i("span",{staticClass:"slide-label"},[e._v("Repeat")]),i("span",{staticClass:"slide"},[i("el-slider",{attrs:{min:1,max:30,step:.1,disabled:-1===e.selectedFabricGroup},on:{change:e.changeFabricGroupRepeat},model:{value:e.fabricGroupRepeat,callback:function(t){e.fabricGroupRepeat=t},expression:"fabricGroupRepeat"}})],1)]),i("div",{staticClass:"tool-bar"},[i("i",{staticClass:"icon",attrs:{title:"添加面料组"},on:{click:e.addFabricGroup}},[e._v("")])])]):e._e(),3===e.selectedSceneTab?i("div",[i("ul",{staticClass:"list"},e._l(e.$store.state.combination.data.embroideries,function(t,a){return i("li",{staticClass:"list-item"},[e._v("\n                            "+e._s(t.name)+"\n                            "),i("el-dropdown",{staticStyle:{float:"right"},attrs:{trigger:"click"},on:{command:e.handleRightMenu}},[i("span",{staticClass:"icon el-dropdown-link",on:{click:e.dropdownEmbroideryIndex}},[e._v("\n                                ")]),i("el-dropdown-menu",{slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"removeEmbroidery"}},[e._v("删除")])],1)],1),i("span",{staticClass:"image-box",staticStyle:{width:"26px",height:"26px"}},[t.image?i("img",{staticStyle:{width:"26px",height:"26px"},attrs:{src:e.getImagePath(t.image)}}):e._e()])],1)})),i("div",{staticClass:"tool-bar"},[i("i",{staticClass:"icon",attrs:{title:"添加绣花图案"},on:{click:e.addEmbroidery}},[e._v("")])])]):e._e(),4===e.selectedSceneTab?i("div",[e.model?i("div",{staticClass:"list-title"},[e._v(e._s(e.model.name))]):e._e(),e.model?i("ul",{staticClass:"list"},e._l(e.model.child,function(t,a){return i("li",{staticClass:"list-item"},[e._v("\n                            "+e._s(t.name)+"\n                            "),i("span",{staticClass:"image-box",staticStyle:{width:"26px",height:"26px"}},[t.preview?i("img",{staticStyle:{width:"26px",height:"26px"},attrs:{src:e.getImagePath(t.preview)}}):e._e()])])})):e._e(),i("div",{staticClass:"tool-bar"},[i("i",{staticClass:"icon",attrs:{title:"绑定模特"},on:{click:function(t){e.bindModel()}}},[e._v("")])])]):e._e()]),-1!=e.selectedPart&&0===e.selectedSceneTab?i("div",[i("div",{staticClass:"tab"},[i("div",{staticClass:"tab-item",class:{active:0===e.selectedTab},on:{click:function(t){e.selectedTab=0}}},[e._v("组件")]),i("div",{staticClass:"tab-item",class:{active:1===e.selectedTab},on:{click:function(t){e.selectedTab=1}}},[e._v("面料")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.selectedTab,expression:"selectedTab === 0"}]},[i("ul",{staticClass:"component-list"},e._l(e.componentList,function(t,a){return i("li",{staticClass:"component-item",class:{active:e.selectedComponents===a},on:{click:function(t){if(t.target!==t.currentTarget)return null;e.selectComponent(a)}}},[e._v("\n                            "+e._s(t.name)+"\n                            "),i("el-dropdown",{staticStyle:{float:"right"},attrs:{trigger:"click"},on:{command:e.handleRightMenu}},[i("span",{staticClass:"icon el-dropdown-link",on:{click:function(t){e.cacheComponentIndex(a)}}},[e._v("")]),i("el-dropdown-menu",{slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"editComponent"}},[e._v("修改")]),i("el-dropdown-item",{attrs:{command:"removeComponent"}},[e._v("删除")])],1)],1),i("span",{staticClass:"image-box"},[t.image?i("img",{attrs:{src:e.getImagePath("/min/"+t.image)}}):e._e()]),i("span",{staticClass:"image-box"},[t.preview?i("img",{attrs:{src:e.getImagePath(t.preview)}}):e._e()])],1)})),i("div",{staticClass:"tool-bar"},[i("i",{staticClass:"icon",attrs:{title:"添加组件"},on:{click:function(t){e.addComponent()}}},[e._v("")])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.selectedTab,expression:"selectedTab === 1"}]},[i("ul",{staticClass:"component-list"},e._l(e.fabricList,function(t,a){return i("li",{staticClass:"component-item",class:{active:e.selectedMaterial===a},on:{click:function(t){if(t.target!==t.currentTarget)return null;e.selectMaterial(a)}}},[e._v("\n                            "+e._s(t.name)+"\n                            "),i("el-dropdown",{staticStyle:{float:"right"},attrs:{trigger:"click"},on:{command:e.handleRightMenu}},[i("span",{staticClass:"icon el-dropdown-link",on:{click:function(t){e.dropdownFabricIndex=a}}},[e._v("")]),i("el-dropdown-menu",{slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"openFabricController"}},[e._v("修改")]),i("el-dropdown-item",{attrs:{command:"removeFabric"}},[e._v("删除")])],1)],1),i("span",{staticClass:"image-box"},[t.image?i("img",{attrs:{src:e.getImagePath("/min/"+t.image)}}):e._e()])],1)})),i("div",{staticClass:"slide-bar"},[i("span",{staticClass:"slide-label"},[e._v("Repeat")]),i("span",{staticClass:"slide"},[i("el-slider",{attrs:{min:1,max:30,step:.1},on:{change:e.changeFabricRepeat},model:{value:e.fabricRepeat,callback:function(t){e.fabricRepeat=t},expression:"fabricRepeat"}})],1)]),i("div",{staticClass:"tool-bar"},[i("i",{staticClass:"icon",attrs:{title:"添加面料"},on:{click:function(t){e.addMaterial()}}},[e._v("")])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.selectedTab,expression:"selectedTab === 0"}]},[e._m(0),i("ul",{staticClass:"component-list"},e._l(e.childComponentList,function(t,a){return i("li",{staticClass:"component-item",on:{click:function(t){if(t.target!==t.currentTarget)return null;e.selectChildComponent(a)}}},[e._v("\n                            子组件\n                            "),i("el-dropdown",{staticStyle:{float:"right"},attrs:{trigger:"click"},on:{command:e.handleRightMenu}},[i("span",{staticClass:"icon el-dropdown-link"},[e._v("")]),i("el-dropdown-menu",{slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"editChildComponent"}},[e._v("修改")]),i("el-dropdown-item",{attrs:{command:"removeChildComponent"}},[e._v("删除")])],1)],1),i("span",{staticClass:"image-box"},[t.preview?i("img",{attrs:{src:e.getImagePath(t.preview)}}):e._e()]),i("span",{staticClass:"image-box",on:{click:function(i){e.addChildMaterial(t.id)}}},[t.fabric?i("img",{attrs:{src:e.getImagePath(t.fabric.image)}}):e._e()])],1)})),i("div",{staticClass:"slide-bar"},[i("span",{staticClass:"slide-label"},[e._v("Repeat")]),i("span",{staticClass:"slide"},[i("el-slider",{attrs:{min:1,max:30,step:.1},on:{change:e.changeChildFabricRepeat},model:{value:e.childFabricRepeat,callback:function(t){e.childFabricRepeat=t},expression:"childFabricRepeat"}})],1)]),i("div",{staticClass:"tool-bar"},[i("i",{staticClass:"icon",attrs:{title:"添加子组件"},on:{click:function(t){e.addChildComponent()}}},[e._v("")])])])]):e._e(),-1!=e.selectedFabricGroup&&2===e.selectedSceneTab?i("div",[i("div",{staticClass:"tab"},[i("div",{staticClass:"tab-item",class:{active:0===e.selectedGroupTab},on:{click:function(t){e.selectedGroupTab=0}}},[e._v("面料")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.selectedGroupTab,expression:"selectedGroupTab === 0"}],key:"group_fabric"},[i("ul",{staticClass:"component-list"},e._l(e.groupFabricList,function(t,a){return i("li",{staticClass:"component-item",class:{active:e.selectedGroupFabric===a},on:{click:function(t){if(t.target!==t.currentTarget)return null;e.selectGroupFabric(a)}}},[e._v("\n                        "+e._s(t.name)+"\n                            "),i("el-dropdown",{staticStyle:{float:"right"},attrs:{trigger:"click"},on:{command:e.handleRightMenu}},[i("span",{staticClass:"icon el-dropdown-link",on:{click:function(t){e.dropdownGroupFabricIndex=a}}},[e._v("")]),i("el-dropdown-menu",{slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"removeFabricGroupFabric"}},[e._v("删除")])],1)],1),i("span",{staticClass:"image-box"},[t.image?i("img",{attrs:{src:e.getImagePath("/min/"+t.image)}}):e._e()])],1)})),i("div",{staticClass:"slide-bar"},[i("span",{staticClass:"slide-label"},[e._v("Repeat")]),i("span",{staticClass:"slide"},[i("el-slider",{attrs:{min:1,max:30,step:.1},on:{change:e.changeGroupFabricRepeat},model:{value:e.groupFabricRepeat,callback:function(t){e.groupFabricRepeat=t},expression:"groupFabricRepeat"}})],1)]),i("div",{staticClass:"tool-bar"},[i("i",{staticClass:"icon",attrs:{title:"添加面料"},on:{click:function(t){e.addGroupMaterial()}}},[e._v("")])])])]):e._e()])]),i("el-card",{staticClass:"box-card",staticStyle:{width:"310px",height:"100%",position:"absolute",top:"0px",left:"-315px"},attrs:{id:"rightSlideSidebar"}},[i("div",{staticClass:"clearfix",slot:"header"},[i("span",{staticStyle:{"line-height":"36px"}},[e._v("面料调整")]),i("i",{staticClass:"el-icon-close",staticStyle:{float:"right",margin:"8px 0 0 0"},on:{click:function(t){e.closeFabricController()}}})]),i("div",{staticClass:"text item"},[i("div",[i("div",[i("table",{staticClass:"settings-widget"},[i("tbody",[i("tr",[i("td",[e._v("Color")]),i("td",[i("el-color-picker",{attrs:{"color-format":"hex"},model:{value:e.form.color,callback:function(t){e.form.color=t},expression:"form.color"}})],1)]),i("tr",[i("td",[e._v("Emissive")]),i("td",[i("el-color-picker",{attrs:{"color-format":"hex"},model:{value:e.form.emissive,callback:function(t){e.form.emissive=t},expression:"form.emissive"}})],1)]),i("tr",[i("td",[e._v("Specular")]),i("td",[i("el-color-picker",{attrs:{"color-format":"hex"},model:{value:e.form.specular,callback:function(t){e.form.specular=t},expression:"form.specular"}})],1)])])]),i("table",{staticClass:"settings-widget"},[i("tbody",[i("tr",[i("td",[e._v("Transparent")]),i("td",[i("el-switch",{model:{value:e.form.transparent,callback:function(t){e.form.transparent=t},expression:"form.transparent"}})],1)]),i("tr",[i("td",[e._v("Opacity")]),i("td",[i("el-slider",{staticStyle:{width:"120px"},attrs:{min:0,max:1,step:.01,id:"opacityInfo"},model:{value:e.form.opacity,callback:function(t){e.form.opacity=t},expression:"form.opacity"}})],1)]),i("tr",[i("td",[e._v("refractionRatio")]),i("td",[i("el-slider",{staticStyle:{width:"120px"},attrs:{min:.01,max:1,step:.01},model:{value:e.form.refractionRatio,callback:function(t){e.form.refractionRatio=t},expression:"form.refractionRatio"}})],1)]),i("tr",[i("td",[e._v("Reflectivity")]),i("td",[i("el-slider",{staticStyle:{width:"120px"},attrs:{min:.01,max:1,step:.01},model:{value:e.form.reflectivity,callback:function(t){e.form.reflectivity=t},expression:"form.reflectivity"}})],1)]),i("tr",[i("td",[e._v("aoMapIntensity")]),i("td",[i("el-slider",{staticStyle:{width:"120px"},attrs:{min:.01,max:3,step:.01},model:{value:e.form.aoMapIntensity,callback:function(t){e.form.aoMapIntensity=t},expression:"form.aoMapIntensity"}})],1)]),i("tr",[i("td",[e._v("metalness")]),i("td",[i("el-slider",{staticStyle:{width:"120px"},attrs:{min:.01,max:1,step:.01},model:{value:e.form.metalness,callback:function(t){e.form.metalness=t},expression:"form.metalness"}})],1)]),i("tr",[i("td",[e._v("roughness")]),i("td",[i("el-slider",{staticStyle:{width:"120px"},attrs:{min:.01,max:1,step:.01},model:{value:e.form.roughness,callback:function(t){e.form.roughness=t},expression:"form.roughness"}})],1)]),i("tr",[i("td",[e._v("clearCoat")]),i("td",[i("el-slider",{attrs:{min:0,max:1,step:.01},model:{value:e.form.clearCoat,callback:function(t){e.form.clearCoat=t},expression:"form.clearCoat"}})],1)]),i("tr",[i("td",[e._v("clearCoatRoughness")]),i("td",[i("el-slider",{attrs:{min:0,max:1,step:.01},model:{value:e.form.clearCoatRoughness,callback:function(t){e.form.clearCoatRoughness=t},expression:"form.clearCoatRoughness"}})],1)])])])]),i("div",{attrs:{id:"save"}},[i("div",{attrs:{id:"save-btn"},on:{click:e.saveConfig}},[e._v("\n            保存更改\n        ")])])])])]),i("el-card",{staticClass:"box-card",staticStyle:{position:"absolute",top:"0",right:"311px"}},[i("ul",{staticClass:"card-list"},[i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("阴影")]),i("el-switch",{attrs:{"on-text":"开","off-text":"关"},on:{change:e.changeShadow},model:{value:e.shadowSwitch,callback:function(t){e.shadowSwitch=t},expression:"shadowSwitch"}})],1),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("开启环境")]),i("el-switch",{attrs:{"on-text":"开","off-text":"关"},on:{change:e.changeEnvMaps},model:{value:e.bg.isEnv,callback:function(t){e.bg.isEnv=t},expression:"bg.isEnv"}})],1),i("li",{directives:[{name:"show",rawName:"v-show",value:e.bg.isEnv,expression:"bg.isEnv"}]},[i("span",{staticClass:"demonstration card-item-margin",staticStyle:{display:"inline-block"}},[e._v("环境贴图")]),[i("el-select",{attrs:{placeholder:"默认"},on:{change:e.changeEnvMaps},model:{value:e.bg.envController,callback:function(t){e.bg.envController=t},expression:"bg.envController"}},e._l(e.envMaps,function(e){return i("el-option",{key:e.envController,attrs:{label:e.label,value:e.envController}})}))]],2),i("li",{directives:[{name:"show",rawName:"v-show",value:e.bg.isEnv,expression:"bg.isEnv"}]},[i("span",{staticClass:"demonstration card-item-margin"},[e._v("环境强度")]),i("el-slider",{attrs:{min:0,max:10,step:.01},on:{change:e.changeEnvMaps},model:{value:e.bg.envMapIntensity,callback:function(t){e.bg.envMapIntensity=t},expression:"bg.envMapIntensity"}})],1),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("背景")]),[i("el-select",{attrs:{placeholder:"默认"},on:{change:e.changeBackground},model:{value:e.bg.bgController,callback:function(t){e.bg.bgController=t},expression:"bg.bgController"}},e._l(e.options,function(e){return i("el-option",{key:e.bgController,attrs:{label:e.label,value:e.bgController,disabled:e.disabled}})}))]],2),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("环境灯")]),i("el-slider",{attrs:{min:0,max:2,step:.01},on:{change:e.changeClothesLight},model:{value:e.clothesLight.hemisphere,callback:function(t){e.clothesLight.hemisphere=t},expression:"clothesLight.hemisphere"}})],1),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("前照灯")]),i("el-slider",{attrs:{min:0,max:2,step:.01},on:{change:e.changeClothesLight},model:{value:e.clothesLight.spot,callback:function(t){e.clothesLight.spot=t},expression:"clothesLight.spot"}})],1),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("后背灯")]),i("el-slider",{attrs:{min:0,max:2,step:.01},on:{change:e.changeClothesLight},model:{value:e.clothesLight.point,callback:function(t){e.clothesLight.point=t},expression:"clothesLight.point"}})],1),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("曝光")]),i("el-slider",{attrs:{min:0,max:2,step:.01},on:{change:e.changeExposure},model:{value:e.exposure,callback:function(t){e.exposure=t},expression:"exposure"}})],1),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("环境光")]),i("el-slider",{attrs:{min:0,max:2,step:.01},on:{change:e.changeClothesLight},model:{value:e.clothesLight.ambient,callback:function(t){e.clothesLight.ambient=t},expression:"clothesLight.ambient"}})],1),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("阴影设置")]),i("el-slider",{attrs:{min:-28e-5,max:28e-6,step:-2e-6},on:{change:e.changeLightBias},model:{value:e.LightBias,callback:function(t){e.LightBias=t},expression:"LightBias"}})],1)])]),i("div",{staticStyle:{margin:"20px 0",position:"fixed",top:"90%",right:"380px"},on:{click:e.saveCamera}},[i("el-button",{attrs:{type:"primary",plain:""}},[e._v("保存视角")])],1),i("part-dialog",{ref:"partDialog"}),i("component-dialog",{ref:"componentDialog"}),i("material-dialog",{ref:"materialDialog"}),i("child-component-dialog",{ref:"childComponentDialog"}),i("global-material-dialog",{ref:"globalMaterialDialog"}),i("embroidery-select",{ref:"embroiderySelect"}),i("fabric-group-dialog",{ref:"fabricGroupDialog"}),i("group-fabric-dialog",{ref:"groupFabricDialog"}),i("mote-select",{ref:"modelSelect"}),i("shelves-dialog",{ref:"shelvesDialog"})],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tab"},[i("div",{staticClass:"tab-item active"},[e._v("子组件")])])}]}},862:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"新增面料",visible:e.show,"custom-class":"material-dialog"},on:{"update:visible":function(t){e.show=t}}},[i("div",{staticStyle:{width:"600px",overflow:"hidden"}},[i("ul",{staticClass:"material-left-menu"},e._l(e.$store.state.category.list,function(t,a){return i("li",{class:{active:a===e.selectedIndex},on:{click:function(t){e.change(a)}}},[e._v("\n                "+e._s(t.name)+"\n            ")])})),i("ul",{staticClass:"material-right"},e._l(e.data[e.selectedIndex],function(t,a){return i("li",{class:{active:t.active},on:{click:function(t){e.select(a)}}},[i("img",{attrs:{src:e.getImagePath("/min/"+t.image)}}),i("div",[e._v(e._s(t.name))])])}))]),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.postMaterial}},[e._v("确 定")])],1)])},staticRenderFns:[]}},875:function(e,t,i){var a=i(755);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(77)("33f9f721",a,!0)},883:function(e,t,i){var a=i(763);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(77)("c35c7db6",a,!0)},884:function(e,t,i){var a=i(764);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(77)("34ca07ea",a,!0)},896:function(e,t,i){var a=i(776);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(77)("ca4639aa",a,!0)},897:function(e,t,i){var a=i(777);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(77)("309b86ed",a,!0)}});