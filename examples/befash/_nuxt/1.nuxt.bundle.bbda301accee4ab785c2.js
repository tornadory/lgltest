webpackJsonp([1],{612:function(e,t,i){function a(e){i(890)}var n=i(75)(i(724),i(853),a,null,null);e.exports=n.exports},634:function(e,t,i){function a(e){return i(n(e))}function n(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./background0.jpg":635,"./background2.jpg":636,"./background3.jpg":637,"./background4.jpg":638};a.keys=function(){return Object.keys(r)},a.resolve=n,e.exports=a,a.id=634},635:function(e,t,i){e.exports=i.p+"img/background0.b0eab6f.jpg"},636:function(e,t,i){e.exports=i.p+"img/background2.06aef60.jpg"},637:function(e,t,i){e.exports=i.p+"img/background3.1891c8e.jpg"},638:function(e,t,i){e.exports=i.p+"img/background4.cb0fbbe.jpg"},639:function(e,t,i){function a(e){i(644)}var n=i(75)(i(640),i(643),a,null,null);e.exports=n.exports},640:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{value:String},data:function(){return{progress:0}},methods:{handleUplaadSuccess:function(e,t){this.progress=0,this.$emit("input",e.data)},on_upload:function(e){this.progress=parseInt(e.percent)}}}},641:function(e,t,i){t=e.exports=i(76)(!0),t.push([e.i,".el-upload-dragger{width:200px;height:200px}","",{version:3,sources:["/var/gdpublic/gdpublic/components/my-upload.vue"],names:[],mappings:"AACA,mBACI,YAAa,AACb,YAAc,CACjB",file:"my-upload.vue",sourcesContent:["\n.el-upload-dragger {\n    width: 200px;\n    height: 200px;\n}\n"],sourceRoot:""}])},643:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-upload",{attrs:{drag:"",action:"/upload/image","show-file-list":!1,"on-success":e.handleUplaadSuccess,"on-progress":e.on_upload}},[e.progress?i("div",{staticStyle:{height:"200px",background:"#fff"}},[i("el-progress",{staticStyle:{padding:"40px 0"},attrs:{type:"circle",percentage:e.progress}})],1):e._e(),e.value?i("img",{staticStyle:{width:"100%"},attrs:{src:e.getImagePath(e.value)}}):e._e(),i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),i("em",[e._v("点击上传")])])])},staticRenderFns:[]}},644:function(e,t,i){var a=i(641);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(77)("2cd85ac2",a,!0)},647:function(e,t,i){function a(e){i(660)}var n=i(75)(i(650),i(657),a,null,null);e.exports=n.exports},648:function(e,t,i){"use strict";var a=i(11),n=i.n(a),r=i(103),s=i.n(r),o=i(102),l=i.n(o),d=i(162),_=i.n(d),c=i(163),h=i.n(c),u=function(){function e(t){_()(this,e),this.view=t,this.width=parseInt(this.view.style.width),this.height=parseInt(this.view.style.height),this.load=new THREE.CBMLoader;var i={};i.type="js",this.drcLoad=new THREE.DRACOLoader("/upload/js/",i),this.init()}return h()(e,[{key:"init",value:function(){this.initScene(),this.initCamera(),this.initRender(),this.initLight(),this.view.appendChild(this.renderer.domElement),this.render()}},{key:"initScene",value:function(){this.scene=new THREE.Scene}},{key:"initCamera",value:function(){this.camera=new THREE.PerspectiveCamera(60,this.width/this.height,.01,20),this.camera.position.z=.8,this.camera.position.y=0,this.camera.lookAt({x:0,y:0,z:0}),this.camera.up.x=this.camera.up.z=0,this.camera.up.y=1}},{key:"initRender",value:function(){this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(13421772),this.renderer.setSize(this.width,this.height),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,this.renderer.shadowMapSoft=!0,this.renderer.setPixelRatio(window.devicePixelRatio)}},{key:"initLight",value:function(){var e=new THREE.AmbientLight(16777215,.5);this.scene.add(e);var t=new THREE.SpotLight(16777215,.5,100,1,.2,1.5);t.position.set(0,0,5),this.scene.add(t)}},{key:"loadModel",value:function(){function e(e){return t.apply(this,arguments)}var t=l()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadModelPromise(t);case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadModelPromise",value:function(e){var t=this;return new n.a(function(i,a){t.mesh&&(t.scene.remove(t.mesh),t.clearScene(t.mesh)),/(.drc|.bf)$/.test(e.toLowerCase())?t.drcLoad.load(e,function(e){var a=new THREE.Mesh(e,new THREE.MeshPhysicalMaterial);(new THREE.Box3).setFromObject(a).getCenter(a.position),a.position.multiplyScalar(-1),t.mesh=a,t.scene.add(a),t.render(),i()}):t.load.load(e,function(e){(new THREE.Box3).setFromObject(e).getCenter(e.position),e.position.multiplyScalar(-1),t.mesh=e,t.scene.add(e),t.render(),i()})})}},{key:"clearScene",value:function(e){if(e.isMesh)e.geometry.dispose(),e.geometry=null,e.material.dispose(),e.material=null,e=null;else if(void 0!==e.children)for(;e.children.length>0;)this.clearScene(e.children[0]),e.remove(e.children[0])}},{key:"renderToBase64",value:function(){return this.render(),this.view.getElementsByTagName("canvas")[0].toDataURL("image/png")}},{key:"renderToImage",value:function(){return this.dataURLtoBlob(this.renderToBase64())}},{key:"dataURLtoBlob",value:function(e){for(var t=e.split(","),i=t[0].match(/:(.*?);/)[1],a=atob(t[1]),n=a.length,r=new Uint8Array(n);n--;)r[n]=a.charCodeAt(n);return new Blob([r],{type:i})}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}();t.a=u},650:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(648),n=i(12),r=i.n(n);t.default={mounted:function(){this.$preview=new a.a(document.getElementById("upload-model")),this.value&&this.$preview.loadModel("/upload/"+this.value)},props:{value:String},data:function(){return{progress:0}},methods:{handleUplaadSuccess:function(e,t){var i=this;this.$preview.loadModelPromise("/upload/"+e.data).then(function(){i.$emit("input",e.data);var t=i.$preview.renderToImage(),a=new FormData;a.append("file",t),a.append("name",e.data.substr(0,e.data.lastIndexOf("."))),r.a.post("/upload/blob",a).then(function(e){i.$emit("preview",e.data.data)})})},on_progress:function(e){this.progress=parseInt(e.percent)},on_upload:function(e){this.value=""}}}},652:function(e,t,i){t=e.exports=i(76)(!0),t.push([e.i,"#upload-model,.model-upload .el-upload-dragger{width:200px;height:200px}","",{version:3,sources:["/var/gdpublic/gdpublic/components/model-upload.vue"],names:[],mappings:"AACA,+CACI,YAAa,AACb,YAAc,CACjB",file:"model-upload.vue",sourcesContent:["\n#upload-model, .model-upload .el-upload-dragger {\n    width: 200px;\n    height: 200px;\n}\n"],sourceRoot:""}])},657:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-upload",{staticClass:"model-upload",attrs:{drag:"",action:"/upload/model","show-file-list":!1,"on-success":e.handleUplaadSuccess,"before-upload":e.on_upload,"on-progress":e.on_progress}},[e.progress?i("div",{staticStyle:{height:"200px",background:"#fff"}},[i("el-progress",{staticStyle:{padding:"40px 0"},attrs:{type:"circle",percentage:e.progress}})],1):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticStyle:{width:"200px",height:"200px"},attrs:{id:"upload-model"}}),i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),i("em",[e._v("点击上传")])])])},staticRenderFns:[]}},660:function(e,t,i){var a=i(652);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(77)("b3db3178",a,!0)},668:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator__=__webpack_require__(103),__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator__),__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise__=__webpack_require__(11),__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise__),__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator__=__webpack_require__(102),__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator__),__WEBPACK_IMPORTED_MODULE_3__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_classCallCheck__=__webpack_require__(162),__WEBPACK_IMPORTED_MODULE_3__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_classCallCheck___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_classCallCheck__),__WEBPACK_IMPORTED_MODULE_4__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_createClass__=__webpack_require__(163),__WEBPACK_IMPORTED_MODULE_4__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_createClass___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_createClass__),Editor=function(){function Editor(e,t,i,a){__WEBPACK_IMPORTED_MODULE_3__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_classCallCheck___default()(this,Editor),this.view=e,this.tag=t,this.briefView=a;var n=new THREE.LoadingManager;n.onProgress=function(e,t,a){var n=parseInt(t/a*100)+"%";i&&i(!0,n)},n.onLoad=function(){i&&i(!1,"0%")},this.load=new THREE.CBMLoader(n);var r={};r.type="js",this.drcLoad=new THREE.DRACOLoader("/upload/js/",r,n),this.textureLoad=new THREE.TextureLoader(n),this.raycaster=new THREE.Raycaster,this.mouse=new THREE.Vector2,this.ModelsChild=[],this.testModels=[],this.models=[],this.material={},this.globalMaterial=[],this.selectedMaterial=[],this.waitLoad=[],this.spotLight=[],this.spotLight1=[],this.exposure=[],this.materials={},this.ambient=[],this.currentMaterial={},this.motes={},this.num=45,this.preGlobalMaterial={},this.bgController=[],this.isEnv=!1,this.curEnv=0,this.envMaps=[],this.mobile=!1,this.envMapIntensity=0,this.isSkyBox=!1,this.isOnclick=!1,this.isOpen=!0,this.urls=[["room/posx.jpg","room/negx.jpg","room/posy.jpg","room/negy.jpg","room/posz.jpg","room/negz.jpg"],["Bridge2/posx.jpg","Bridge2/negx.jpg","Bridge2/posy.jpg","Bridge2/negy.jpg","Bridge2/posz.jpg","Bridge2/negz.jpg"],["skybox/px.jpg","skybox/nx.jpg","skybox/py.jpg","skybox/ny.jpg","skybox/pz.jpg","skybox/nz.jpg"],["Castle/px.jpg","Castle/nx.jpg","Castle/py.jpg","Castle/ny.jpg","Castle/pz.jpg","Castle/nz.jpg"]],this._meshList=[],this.init(),window.addEventListener("resize",function(){this.renderer.setSize(this.view.offsetWidth,this.view.offsetHeight),this.camera.aspect=this.view.offsetWidth/this.view.offsetHeight,this.camera.updateProjectionMatrix(),this.render()}.bind(this)),this.view.addEventListener("mousedown",this.onMouseDown.bind(this),!1),this.view.addEventListener("click",this.onClick.bind(this),!1),this.view.addEventListener("mousemove",this.onMouseMove.bind(this),!1)}return __WEBPACK_IMPORTED_MODULE_4__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_createClass___default()(Editor,[{key:"init",value:function(){this.initScene(),this.initCamera(),this.initRender(),this.initLight(),this.initControls(),this.initPatternManager(),this.view.appendChild(this.renderer.domElement),this.render()}},{key:"initScene",value:function(){this.scene=new THREE.Scene,this.group=new THREE.Group,this.scene.background=(new THREE.Color).setHSL(.6,0,1),this.scene.fog=new THREE.Fog(this.scene.background,1,5e3),this.scene.add(this.group)}},{key:"initCamera",value:function(){this.camera=new THREE.PerspectiveCamera(60,this.view.offsetWidth/this.view.offsetHeight,.01,800),this.camera.position.z=1,this.camera.position.y=0,this.camera.lookAt({x:0,y:0,z:0}),this.camera.up.x=this.camera.up.z=0,this.camera.up.y=1}},{key:"initPatternManager",value:function(){var e=this;this.homePatternManager=new THREE.HomePatternManger(this.view,this.group,this.raycaster,this.controls,function(){return e.camera},this.render.bind(this))}},{key:"initRender",value:function(){this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(16777215),this.renderer.setSize(this.view.offsetWidth,this.view.offsetHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,this.renderer.shadowMapSoft=!0,this.renderer.setPixelRatio(window.devicePixelRatio)}},{key:"initControls",value:function(){this.controls=new THREE.OrbitControls(this.camera,this.view,this.group),this.controls.enableDamping=!0,1==this.mobile?(this.controls.rotateSpeed=.005,this.controls.dampingFactor=2.5):(this.controls.rotateSpeed=.2,this.controls.dampingFactor=.07),this.controls.minDistance=.3,this.controls.maxDistance=20,this.controls.maxPolarAngle=1.5,this.controls.addEventListener("change",this.render.bind(this)),this.controls.addEventListener("start",this.inertiaStart.bind(this)),this.controls.addEventListener("end",this.inertiaEnd.bind(this))}},{key:"saveCamera",value:function(e){this.camera.position.x=e[0],this.camera.position.y=e[1],this.camera.position.z=e[2],this.controls.update()}},{key:"onClick",value:function(e){if(this.isOnclick){this.mouse.x=(e.clientX-380)/this.view.offsetWidth*2-1,this.mouse.y=-e.clientY/this.view.offsetHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var t=this.raycaster.intersectObjects(this.homePatternManager.get_meshList());if(t.length>0){if(this.currentClickMesh&&(this.isOpen?(this.currentClickMesh.material.emissive.setHex(6881537),this.currentClickMesh.material.color.set(this.currentClickMesh.currentColor)):this.currentClickMesh.material.emissive.setHex(0)),this.currentClickMesh=t[0].object,this.isOpen?(this.currentClickMesh.currentColor=this.currentClickMesh.material.color.getHex(),this.currentClickMesh.material.emissive.setHex(0),this.currentClickMesh.material.color.set(5363808)):this.currentClickMesh.material.emissive.setHex(16711680),this.currentClickMesh.brief||this.currentClickMesh.households){var i=this.currentClickMesh.brief?JSON.parse(this.currentClickMesh.brief):"";this.briefView(i,this.currentClickMesh.households,this.currentClickMesh.name)}}else this.currentClickMesh&&(this.isOpen?(this.currentClickMesh.material.emissive.setHex(6881537),this.currentClickMesh.material.color.set(this.currentClickMesh.currentColor)):this.currentClickMesh.material.emissive.setHex(0)),this.currentClickMesh=null;this.render()}}},{key:"onMouseDown",value:function(){this.isOnclick=!0}},{key:"onMouseMove",value:function(e){this.mouse.x=(e.clientX-380)/this.view.offsetWidth*2-1,this.mouse.y=-e.clientY/this.view.offsetHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var t=this.raycaster.intersectObjects(this.homePatternManager.get_meshList());t.length>0&&t[0].object!=this.currentClickMesh?(this.currentMesh&&this.currentMesh!=this.currentClickMesh&&this.currentMesh.material.emissive.setHex(this.currentMesh.currentHex),this.currentMesh=t[0].object,this.tag(this.currentMesh.name,e),this.currentMesh.currentHex=this.currentMesh.material.emissive.getHex(),this.currentMesh.material.emissive.setHex(16711680)):(this.currentMesh&&this.currentMesh!=this.currentClickMesh&&this.currentMesh.material.emissive.setHex(this.currentMesh.currentHex),this.currentMesh=null),this.isOnclick=!1,this.render()}},{key:"initLight",value:function(){this.hemiLight=new THREE.HemisphereLight(16777215,16777215,.29),this.hemiLight.color.setHSL(.6,1,.6),this.hemiLight.groundColor.setHSL(.095,1,.75),this.hemiLight.position.set(0,50,0),this.scene.add(this.hemiLight),this.dirLight=new THREE.DirectionalLight(16777215,.73),this.dirLight.color.setHSL(.1,1,.95),this.dirLight.position.set(0,1,1),this.dirLight.position.multiplyScalar(30),this.scene.add(this.dirLight),this.dirLight1=new THREE.DirectionalLight(16777215,.75),this.dirLight1.color.setHSL(.1,1,.95),this.dirLight1.position.set(0,1,-1),this.dirLight1.position.multiplyScalar(30),this.scene.add(this.dirLight1),this.dirLight.shadow.mapSize.width=2048,this.dirLight.shadow.mapSize.height=2048,this.dirLight.shadow.bias=-1e-4,this.ambient=new THREE.AmbientLight(16777215,.2),this.scene.add(this.ambient)}},{key:"openHot",value:function(e){if(this.isOpen=e,e){for(var t=0;t<this.models.length;t++)if(this.models[t][0]){if(this.models[t][0].hotLevel)switch(this.models[t][0].hotLevel){case 1:this.models[t][0].material.color.set(16774645),this.models[t][0].material.emissive.set(6881537);break;case 2:this.models[t][0].material.color.set(16742520),this.models[t][0].material.emissive.set(6881537);break;case 3:this.models[t][0].material.color.set(16711680),this.models[t][0].material.emissive.set(6881537)}if(this.models[t][0].childComponent)for(var i=0;i<this.models[t][0].childComponent.length;i++)if(this.models[t][0].childComponent[i]&&this.models[t][0].childComponent[i].hotLevel)switch(this.models[t][0].childComponent[i].hotLevel){case 1:this.models[t][0].childComponent[i].material.color.set(16774645),this.models[t][0].childComponent[i].material.emissive.set(6881537);break;case 2:this.models[t][0].childComponent[i].material.color.set(16742520),this.models[t][0].childComponent[i].material.emissive.set(6881537);break;case 3:this.models[t][0].childComponent[i].material.color.set(16711680),this.models[t][0].childComponent[i].material.emissive.set(6881537)}}}else for(var a=0;a<this.models.length;a++)if(this.models[a][0]&&(this.models[a][0].hotLevel&&(this.models[a][0].material.color.set(16777215),this.models[a][0].material.emissive.set(0)),this.models[a][0].childComponent))for(var n=0;n<this.models[a][0].childComponent.length;n++)this.models[a][0].childComponent[n]&&this.models[a][0].childComponent[n].hotLevel&&(this.models[a][0].childComponent[n].material.color.set(16777215),this.models[a][0].childComponent[n].material.emissive.set(0));this.render()}},{key:"initModel",value:function(){function e(e,i,a,n,r){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,a,n,r){var s,o,l,d,_,c=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.models[t]=[],s=void 0,!/(.drc|.bf)$/.test(a.toLowerCase())){e.next=9;break}return e.next=5,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){c.drcLoad.load(a,function(t){e(t)})});case 5:o=e.sent,s=new THREE.Mesh(o,new THREE.MeshPhongMaterial),e.next=12;break;case 9:return e.next=11,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){c.load.load(a,function(t){e(t)})});case 11:s=e.sent;case 12:s.isMesh?(s.castShadow=!0,s.receiveShadow=!0):s.traverse(function(e){e.geometry&&(e.geometry.attributes.uv2=e.geometry.attributes.uv),e.castShadow=!0,e.receiveShadow=!0,c.testModels.push(e),e.isMesh&&c.ModelsChild.push(e)}),s.brief=r.brief,s.name=r.name,s.households=r.households,s.hotLevel=r.hotLevel,e.t0=s.hotLevel,e.next=1===e.t0?20:2===e.t0?23:3===e.t0?26:29;break;case 20:return s.material.color.set(16774645),s.material.emissive.set(6881537),e.abrupt("break",29);case 23:return s.material.color.set(16742520),s.material.emissive.set(6881537),e.abrupt("break",29);case 26:return s.material.color.set(16711680),s.material.emissive.set(6881537),e.abrupt("break",29);case 29:if(this.models[t][i]=s,void 0===this.selectedMaterial[t]){e.next=44;break}e.t1=s.hotLevel,e.next=1===e.t1?34:2===e.t1?37:3===e.t1?40:43;break;case 34:return this.material[t][this.selectedMaterial[t]].color.set(16774645),this.material[t][this.selectedMaterial[t]].emissive.set(6881537),e.abrupt("break",43);case 37:return this.material[t][this.selectedMaterial[t]].color.set(16742520),this.material[t][this.selectedMaterial[t]].emissive.set(6881537),e.abrupt("break",43);case 40:return this.material[t][this.selectedMaterial[t]].color.set(16711680),this.material[t][this.selectedMaterial[t]].emissive.set(6881537),e.abrupt("break",43);case 43:this.setMaterial(t,this.material[t][this.selectedMaterial[t]]);case 44:if(s.traverse(function(e){e.isMesh&&c.homePatternManager.pushMeshList(e)}),!n){e.next=55;break}this.models[t][i].childComponent=[],l=void 0,d=__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(a){var r,s;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/(.drc|.bf)$/.test(n[a].model.toLowerCase())){e.next=7;break}return e.next=3,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){c.drcLoad.load("/upload/"+n[a].model,function(t){e(t)})});case 3:r=e.sent,l=new THREE.Mesh(r,new THREE.MeshPhongMaterial({color:0})),e.next=10;break;case 7:return e.next=9,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){c.load.load("/upload/"+n[a].model,function(t){e(t)})});case 9:l=e.sent;case 10:if(l.isMesh?(l.castShadow=!0,l.receiveShadow=!0):l.traverse(function(e){e.geometry&&(e.geometry.attributes.uv2=e.geometry.attributes.uv),e.castShadow=!0,e.receiveShadow=!0}),l.brief=n[a].brief,l.name=n[a].name,l.households=n[a].households,l.hotLevel=n[a].hotLevel,s=c.currentMaterial[l.tag],!n[a].fabric){e.next=20;break}return e.next=19,c.getMaterial(JSON.parse(n[a].fabric.material),n[a].repeat||1);case 19:s=e.sent;case 20:if(!s){e.next=34;break}e.t0=l.hotLevel,e.next=1===e.t0?24:2===e.t0?27:3===e.t0?30:33;break;case 24:return s.color.set(16774645),s.emissive.set(6881537),e.abrupt("break",33);case 27:return s.color.set(16742520),s.emissive.set(6881537),e.abrupt("break",33);case 30:return s.color.set(16711680),s.emissive.set(6881537),e.abrupt("break",33);case 33:l.isMesh?(l.material=s,l.material.needsUpdate=!0):l.traverse(function(e){e.isMesh&&(e.material=s,e.material.needsUpdate=!0)});case 34:c.group.add(l),c.models[t][i].childComponent.push(l);case 36:case"end":return e.stop()}},e,c)}),_=0;case 50:if(!(_<n.length)){e.next=55;break}return e.delegateYield(d(_),"t2",52);case 52:_++,e.next=50;break;case 55:this.group.add(s),this.render();case 57:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadModel",value:function(){function e(e,i,a,n,r,s){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,a,n,r,s){var o,l,d,_,c,h,u,p,m,b=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.models[t]||(this.models[t]=[]),!this.models[t][i]){e.next=6;break}for(o=0;o<this.models[t].length;o++)if(this.models[t][o]&&(this.models[t][o].visible=o===i,this.models[t][o].childComponent))for(l=0;l<this.models[t][o].childComponent.length;l++)this.models[t][o].childComponent[l].visible=o===i;this.render(),e.next=39;break;case 6:if(d=void 0,!/(.drc|.bf)$/.test(a.toLowerCase())){e.next=14;break}return e.next=10,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){b.drcLoad.load(a,function(t){e(t)})});case 10:_=e.sent,d=new THREE.Mesh(_,new THREE.MeshPhongMaterial),e.next=17;break;case 14:return e.next=16,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){b.load.load(a,function(t){e(t)})});case 16:d=e.sent;case 17:for(d.isMesh?(d.castShadow=!0,d.receiveShadow=!0):d.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,e.geometry&&(e.geometry.attributes.uv2=e.geometry.attributes.uv),b.testModels.push(e),e.isMesh&&b.ModelsChild.push(e)}),c=0;c<this.models[t].length;c++)if(this.models[t][c]&&(this.models[t][c].visible=!1,this.models[t][c].childComponent))for(h=0;h<this.models[t][c].childComponent.length;h++)this.models[t][c].childComponent[h].visible=c===i,this.models[t][c].childComponent[h].tag;if(d.brief=r.brief,d.name=r.name,d.households=r.households,d.hotLevel=r.hotLevel,this.models[t][i]=d,s&&this.loadPattern(t,i,s),void 0!==this.selectedMaterial[t]&&this.setMaterial(t,this.material[t][this.selectedMaterial[t]]),this.group.add(d),d.traverse(function(e){e.isMesh&&b.homePatternManager.pushMeshList(e)}),!n){e.next=38;break}this.models[t][i].childComponent=[],u=void 0,p=__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(a){var r,s;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/(.drc|.bf)$/.test(n[a].model.toLowerCase())){e.next=7;break}return e.next=3,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){b.drcLoad.load("/upload/"+n[a].model,function(t){e(t)})});case 3:r=e.sent,u=new THREE.Mesh(r,new THREE.MeshPhongMaterial),e.next=10;break;case 7:return e.next=9,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){b.load.load("/upload/"+n[a].model,function(t){e(t)})});case 9:u=e.sent;case 10:if(u.isMesh?(u.castShadow=!0,u.receiveShadow=!0):u.traverse(function(e){e.geometry&&(e.geometry.attributes.uv2=e.geometry.attributes.uv),e.castShadow=!0,e.receiveShadow=!0}),u.brief=n[a].brief,u.name=n[a].name,u.households=n[a].households,u.hotLevel=n[a].hotLevel,s=void 0,!n[a].fabric){e.next=20;break}return e.next=19,b.getMaterial(JSON.parse(n[a].fabric.material),n[a].repeat||1);case 19:s=e.sent;case 20:s&&(u.isMesh?(u.material=s,u.material.needsUpdate=!0):u.traverse(function(e){e.isMesh&&(e.material=s,e.material.needsUpdate=!0)})),b.group.add(u),b.models[t][i].childComponent.push(u);case 23:case"end":return e.stop()}},e,b)}),m=0;case 33:if(!(m<n.length)){e.next=38;break}return e.delegateYield(p(m),"t0",35);case 35:m++,e.next=33;break;case 38:this.render();case 39:case"end":return e.stop()}},e,this)}));return e}()},{key:"initGroupMaterial",value:function(){function e(e,i,a,n){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,a,n){var r,s,o,l=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMaterial(a,n);case 2:for(this.material[t+i]=e.sent,this.currentMaterial[i]=this.material[t+i],this.changeGroupFabricRepeat(t,i,n),r=0;r<this.models.length;r++)if(this.models[r])for(s=0;s<this.models[r].length;s++)if(this.models[r][s]&&this.models[r][s].tag===i&&(this.models[r][s].isMesh?this.models[r][s].material=this.material[t+i]:this.models[r][s].traverse(function(e){e.isMesh&&(e.material=l.material[t+i])})),this.models[r][s]&&this.models[r][s].childComponent)for(o=0;o<this.models[r][s].childComponent.length;o++)this.models[r][s].childComponent[o].tag===i&&(this.models[r][s].childComponent[o].isMesh?this.models[r][s].childComponent[o].material=this.material[t+i]:this.models[r][s].childComponent[o].traverse(function(e){e.isMesh&&(e.material=l.material[t+i])}));this.material[t+i].repeat=n,this.render();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadGroupMaterial",value:function(){function e(e,i,a,n){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,a,n){var r,s,o,l=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.material[t+i]){e.next=4;break}return e.next=3,this.getMaterial(a,n);case 3:this.material[t+i]=e.sent;case 4:for(this.currentMaterial[i]=this.material[t+i],this.material[t+i].repeat!==n&&this.changeGroupFabricRepeat(t,i,n),r=0;r<this.models.length;r++)if(this.models[r])for(s=0;s<this.models[r].length;s++)if(this.models[r][s]&&this.models[r][s].tag===i&&(this.models[r][s].isMesh?this.models[r][s].material=this.material[t+i]:this.models[r][s].traverse(function(e){e.isMesh&&(e.material=l.material[t+i])})),this.models[r][s]&&this.models[r][s].childComponent)for(o=0;o<this.models[r][s].childComponent.length;o++)this.models[r][s].childComponent[o].tag===i&&(this.models[r][s].childComponent[o].isMesh?this.models[r][s].childComponent[o].material=this.material[t+i]:this.models[r][s].childComponent[o].traverse(function(e){e.isMesh&&(e.material=l.material[t+i])}));this.material[t+i].repeat=n,this.render();case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"initMaterial",value:function(){function e(e,i,a,n){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,a,n){return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.material[t]=[],e.next=3,this.getMaterial(a,n);case 3:if(this.material[t][i]=e.sent,this.material[t][i].repeat=n,!this.models[t][i]){e.next=18;break}e.t0=this.models[t][i].hotLevel,e.next=1===e.t0?9:2===e.t0?12:3===e.t0?15:18;break;case 9:return this.material[t][i].color.set(16774645),this.material[t][i].emissive.set(6881537),e.abrupt("break",18);case 12:return this.material[t][i].color.set(16742520),this.material[t][i].emissive.set(6881537),e.abrupt("break",18);case 15:return this.material[t][i].color.set(16711680),this.material[t][i].emissive.set(6881537),e.abrupt("break",18);case 18:this.setMaterial(t,this.material[t][i]),this.selectedMaterial[t]=i,this.render();case 21:case"end":return e.stop()}},e,this)}));return e}()},{key:"initEnv",value:function(){function e(e,i){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i){return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnv=t,!t){e.next=7;break}if(this.curEnv=i,this.envMaps[i]){e.next=7;break}return e.next=6,this.loadEnvMap(this.urls[i]);case 6:this.envMaps[i]=e.sent;case 7:this.render();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadMaterial",value:function(){function e(e,i,a,n){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,a,n){var r,s,o;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(clearInterval(this.changeOpacity),this.changeOpacity=null,r=a.opacity,this.material[t]||(this.material[t]=[]),!this.material[t][i]){e.next=8;break}(this.material[t][i].repeat||n)&&this.changeRepeat(t,i,n),e.next=11;break;case 8:return e.next=10,this.getMaterial(a,n);case 10:this.material[t][i]=e.sent;case 11:this.material[t][i].repeat=n,this.selectedMaterial[t]||this.setMaterial(t,this.material[t][i]),void 0!==this.selectedMaterial[t]&&i!==this.selectedMaterial[t]?(this.setMaterial(t,this.material[t][i]),s=this.material[t][i].transparent,this.material[t][i].transparent=!0,this.material[t][i].opacity=.8,o=this,this.changeOpacity=setInterval(function(){o.material[t][i].opacity+=.1,o.material[t][i].opacity>=1&&(o.material[t][i].transparent=s,o.material[t][i].opacity=r,clearInterval(o.changeOpacity),o.changeOpacity=null),o.render()},150)):this.material[t][i].opacity=r,this.selectedMaterial[t]=i,this.render();case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadGlobalMaterial",value:function(){function e(e,i,a){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i,a){var n,r,s,o;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.globalMaterial[t]){e.next=5;break}(this.globalMaterial[t].repeat||a)&&this.changeGlobalRepeat(t,a),this.setGlobalMaterial(this.globalMaterial[t]),e.next=9;break;case 5:return e.next=7,this.getMaterial(JSON.parse(i),a);case 7:this.globalMaterial[t]=e.sent,this.setGlobalMaterial(this.globalMaterial[t]);case 9:this.preGlobalMaterial!==this.globalMaterial[t]&&(n=this.globalMaterial[t].transparent,r=this.globalMaterial[t].opacity,this.globalMaterial[t].transparent=!0,this.globalMaterial[t].opacity=.8,s=this,o=setInterval(function(){s.globalMaterial[t].opacity+=.1,s.globalMaterial[t].opacity>=1&&(s.globalMaterial[t].transparent=n,s.globalMaterial[t].opaciyt=r,clearInterval(o),o=null),s.render()},150),this.globalMaterial[t].repeat=a,this.preGlobalMaterial=this.globalMaterial[t],this.currentMaterial=this.globalMaterial[t],this.render());case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"getMaterial",value:function(){function e(e,i){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i){var a,n;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a={side:THREE.DoubleSide},e.t0=__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.keys(t);case 2:if((e.t1=e.t0()).done){e.next=18;break}if(n=e.t1.value,!t.hasOwnProperty(n)||!t[n]||"#000"===t[n]){e.next=16;break}if(!n.includes("map")&&!n.includes("Map")){e.next=15;break}if(!n.includes("aoMapIntensity")){e.next=10;break}a[n]=t[n],e.next=13;break;case 10:return e.next=12,this.loadTexture(t[n],i);case 12:a[n]=e.sent;case 13:e.next=16;break;case 15:a[n]=t[n];case 16:e.next=2;break;case 18:return this.isEnv&&(a.envMap=this.envMaps[this.curEnv],a.envMapIntensity=this.envMapIntensity),e.abrupt("return",new THREE.MeshPhysicalMaterial(a));case 20:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateMaterialColor",value:function(e,t,i,a){this.material[e][t]&&"#000"!==a&&(this.material[e][t][i]=new THREE.Color(a)),this.render()}},{key:"updateMaterialNumber",value:function(e,t,i,a){this.material[e][t]&&(this.material[e][t][i]=a),this.render()}},{key:"loadEnvMap",value:function(e){var t=this;return this.loader=(new THREE.CubeTextureLoader).setPath("/upload/"),new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(i,a){t.loader.load(e,function(e){i(e)})})}},{key:"loadTexture",value:function(e,t){var i=this;return new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(a,n){i.textureLoad.load("/upload/"+e,function(e){e.wrapS=e.wrapT=THREE.RepeatWrapping,e.repeat.set(t,t),a(e)})})}},{key:"inspectMobile",value:function(){this.mobile=!0}},{key:"changeRepeat",value:function(e,t,i){if(this.material[e]&&this.material[e][t]&&this.material[e][t].repeat!==i){var a=this.material[e][t];a.map&&a.map.repeat.set(i,i),a.normalMap&&a.normalMap.repeat.set(i,i),a.specularMap&&a.specularMap.repeat.set(i,i),a.lightMap&&a.lightMap.repeat.set(i,i),a.needsUpdate=!0,this.render()}}},{key:"changeChildFabricRepeat",value:function(e,t,i,a){if(this.models[e]&&this.models[e][t]&&this.models[e][t].childComponent&&this.models[e][t].childComponent[i]){var n=this.models[e][t].childComponent[i].material;n.map&&n.map.repeat.set(a,a),n.normalMap&&n.normalMap.repeat.set(a,a),n.specularMap&&n.specularMap.repeat.set(a,a),n.lightMap&&n.lightMap.repeat.set(a,a),n.needsUpdate=!0,this.render()}}},{key:"changeBloom",value:function(e,t){this.bloomPass[e]=t,this.render()}},{key:"changeShadow",value:function(e){this.dirLight.castShadow=e,this.render()}},{key:"changeposition",value:function(e,t,i,a){switch(e){case 1:this.spotLight.position.set(t,i,a);break;case 2:this.hemisphereLight.position.set(t,i,a);break;case 3:this.pointLight.position.set(t,i,a)}this.render()}},{key:"changeLightBias",value:function(e){this.dirLight.shadow.bias=e,this.render()}},{key:"initBulindindBg",value:function(){function e(){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(){var t,i=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,t){i.textureLoad.load(__webpack_require__(680),function(t){e(t)})});case 2:t=e.sent,this.scene.background=t;case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"initEnv",value:function(){function e(e,i){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i){return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnv=t,!t){e.next=7;break}if(this.curEnv=i,this.envMaps[i]){e.next=7;break}return e.next=6,this.loadEnvMap(this.urls[i]);case 6:this.envMaps[i]=e.sent;case 7:this.render();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeBackground",value:function(){function e(e){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t){var i=this;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=t){e.next=9;break}if(this.isSkyBox=!0,this.envMaps[this.curEnv]){e.next=6;break}return e.next=5,this.loadEnvMap(this.urls[this.curEnv]);case 5:this.envMaps[this.curEnv]=e.sent;case 6:this.scene.background=this.envMaps[this.curEnv],e.next=15;break;case 9:if(this.isSkyBox=!1,this.bgController[t]){e.next=14;break}return e.next=13,new __WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_promise___default.a(function(e,a){i.textureLoad.load(__webpack_require__(634)("./background"+t+".jpg"),function(t){e(t)})});case 13:this.bgController[t]=e.sent;case 14:this.scene.background=this.bgController[t];case 15:this.render();case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeEnvMaps",value:function(){function e(e,i){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i){return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnv=t,!t){e.next=8;break}if(this.curEnv=i,this.envMaps[i]){e.next=7;break}return e.next=6,this.loadEnvMap(this.urls[i]);case 6:this.envMaps[i]=e.sent;case 7:this.isSkyBox&&(this.scene.background=this.envMaps[this.curEnv]);case 8:this.updateModels(),this.render();case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeEnvMapIntensity",value:function(e){this.envMapIntensity=e,this.updateModels()}},{key:"updateModels",value:function(){if(this.isEnv)for(var e in this.material)for(var t=0;t<this.material[e].length;t++)this.material[e][t].envMap=this.envMaps[this.curEnv],this.material[e][t].envMapIntensity=this.envMapIntensity,this.material[e][t].needsUpdate=!0;else for(var i in this.material)for(var a=0;a<this.material[i].length;a++)this.material[i][a].envMap=null,this.material[i][a].envMapIntensity=0,this.material[i][a].needsUpdate=!0;for(var n=0;n<this.models.length;n++)this.selectedMaterial[n]&&this.material[n][this.selectedMaterial[n]]&&this.setMaterial(n,this.material[n][this.selectedMaterial[n]]);this.render()}},{key:"changeExposure",value:function(e){this.renderer.toneMappingExposure=Math.pow(e,.1),this.render()}},{key:"changeClothesLight",value:function(e,t){switch(e){case"spot":this.dirLight.intensity=t;break;case"hemisphere":this.hemiLight.intensity=t;break;case"point":this.dirLight1.intensity=t;break;case"ambient":this.ambient.intensity=t;break;case"spotLight1":this.spotLight1.intensity=t}this.render()}},{key:"changeGroupFabricRepeat",value:function(e,t,i){if(this.material[e+t]&&this.material[e+t].repeat!==i){var a=this.material[e+t];a.map&&a.map.repeat.set(i,i),a.normalMap&&a.normalMap.repeat.set(i,i),a.specularMap&&a.specularMap.repeat.set(i,i),a.lightMap&&a.lightMap.repeat.set(i,i),a.needsUpdate=!0,this.render()}}},{key:"shadowSwitch",value:function(e,t){for(var i=0;i<this.testModels.length;i++)this.models[e]&&this.models[e][0]===this.testModels[i]&&(this.testModels[i+1].castShadow=t);this.render()}},{key:"changeGlobalRepeat",value:function(e,t){if(this.globalMaterial[e]&&this.globalMaterial[e].repeat!==t){var i=this.globalMaterial[e];i.map&&i.map.repeat.set(t,t),i.normalMap&&i.normalMap.repeat.set(t,t),i.specularMap&&i.specularMap.repeat.set(t,t),i.lightMap&&i.lightMap.repeat.set(t,t),i.needsUpdate=!0,this.render()}}},{key:"setMaterial",value:function(e,t){if(this.models[e])for(var i=0;i<this.models[e].length;i++)this.models[e][i]&&(this.models[e][i].isMesh?(this.models[e][i].material=t,this.models[e][i].material.needsUpdate=!0):this.models[e][i].traverse(function(e){e.isMesh&&(e.material=t,e.material.needsUpdate=!0)}))}},{key:"setGlobalMaterial",value:function(e){if(this.models.length>0)for(var t=0;t<this.models.length;t++)this.models[t]&&this.models[t].length&&this.setMaterial(t,e)}},{key:"loadPattern",value:function(e,t,i){i&&(i=JSON.parse(i),this.patternManager.drawDefault(this.models[e][t],this.models[e][t].children[i.mesh],new THREE.Vector3(i.position.x,i.position.y,i.position.z),new THREE.Euler(i.rotation.x,i.rotation.y,i.rotation.z),new THREE.Vector3(i.dimensions.x,i.dimensions.y,i.dimensions.z)))}},{key:"homeBeginPattern",value:function(){function e(e,i){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t,i){var a;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=JSON.parse(i),i.depthTest=!0,i.depthWrite=!1,i.polygonOffset=!0,i.polygonOffsetFactor=-1,e.next=7,this.getMaterial(i,1);case 7:a=e.sent,console.log(a),this.homePatternManager.setEnable(!0),this.homePatternManager.changeMaterial(t,a);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"homeScalePattern",value:function(e){this.homePatternManager.scalePattern(e)}},{key:"homeEndPattern",value:function(){this.homePatternManager.setEnable(!1)}},{key:"homeRemovePattern",value:function(){this.homePatternManager.removePattern()}},{key:"beginPattern",value:function(e,t){this.patternManager.setEnable(!0,this.models[e][t])}},{key:"endPattern",value:function(e,t){this.patternManager.setEnable(!1,this.models[e][t])}},{key:"getPatternParams",value:function(e){this.patterns=[];for(var t=0;t<this.models.length;t++)if(this.models[t])for(var i=0;i<this.models[t].length;i++)if(this.models[t][i].pattern){var a=this.models[t][i].pattern.params;this.patterns.push({id:e[t].components[i].id,params:{position:{x:a.position.x,y:a.position.y,z:a.position.z},rotation:{x:a.rotation.x,y:a.rotation.y,z:a.rotation.z},dimensions:{x:a.dimensions.x,y:a.dimensions.y,z:a.dimensions.z},mesh:a.index}})}else this.patterns.push({id:e[t].components[i].id,params:void 0});return this.patterns}},{key:"scalePattern",value:function(e){this.patternManager.scalePattern(e)}},{key:"removePattern",value:function(){this.patternManager.removePattern()}},{key:"loadPatternMaterial",value:function(){function e(e){return t.apply(this,arguments)}var t=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function e(t){var i;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMaterial(JSON.parse(t),1);case 2:i=e.sent,this.patternManager.changeMaterial(i);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeTarget",value:function(e,t){this.models[e][t]||this.waitLoad.push({pIndex:e,cIndex:t,fun:function(){}})}},{key:"setModelRepeat",value:function(e,t){e.map&&e.map.repeat.set(t,t),e.normalMap&&e.normalMap.repeat.set(t,t),e.specularMap&&e.specularMap.repeat.set(t,t),e.lightMap&&e.lightMap.repeat.set(t,t),e.needsUpdate=!0}},{key:"initMote",value:function initMote(mote){var _this10=this,child=mote.child;mote.models=[];for(var _loop3=function _loop3(j){/(.drc|.bf)$/.test(child[j].model)?_this10.drcLoad.load("/upload/"+child[j].model,function(){var _ref16=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function _callee16(geometry){var cbm,_material,materials,repeatString,repeat,materialinfo;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function _callee16$(_context18){for(;;)switch(_context18.prev=_context18.next){case 0:if(cbm=new THREE.Mesh(geometry,new THREE.MeshPhongMaterial),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0):cbm.traverse(function(e){e.receiveShadow=!0,e.castShadow=!0}),!child[j].material){_context18.next=14;break}return _context18.next=5,_this10.getMaterial(JSON.parse(child[j].material),1);case 5:_material=_context18.sent,_this10.materials[child[j].id]=_material,_this10.materials[child[j].id].config=child[j].material||child[j].fabric.material,materials=_this10.materials[child[j].id].config,repeatString=eval("("+materials+")"),repeat=repeatString.repeat,materialinfo=_this10.materials[child[j].id],_this10.setModelRepeat(materialinfo,repeat),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0,cbm.material=_material,cbm.material.needsUpdate=!0):cbm.traverse(function(e){e.isMesh&&(e.receiveShadow=!0,e.castShadow=!0,e.material=_material,e.material.needsUpdate=!0)});case 14:_this10.group.add(cbm),mote.models.push(cbm),_this10.render();case 17:case"end":return _context18.stop()}},_callee16,_this10)}));return function(e){return _ref16.apply(this,arguments)}}()):_this10.load.load("/upload/"+child[j].model,function(){var _ref17=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function _callee17(cbm){var _material2,materials,repeatString,repeat,materialinfo;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function _callee17$(_context19){for(;;)switch(_context19.prev=_context19.next){case 0:if(cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0):cbm.traverse(function(e){e.receiveShadow=!0,e.castShadow=!0}),!child[j].material){_context19.next=13;break}return _context19.next=4,_this10.getMaterial(JSON.parse(child[j].material),1);case 4:_material2=_context19.sent,_this10.materials[child[j].id]=_material2,_this10.materials[child[j].id].config=child[j].material||child[j].fabric.material,materials=_this10.materials[child[j].id].config,repeatString=eval("("+materials+")"),repeat=repeatString.repeat,materialinfo=_this10.materials[child[j].id],_this10.setModelRepeat(materialinfo,repeat),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0,cbm.material=_material2,cbm.material.needsUpdate=!0):cbm.traverse(function(e){e.isMesh&&(e.receiveShadow=!0,e.castShadow=!0,e.material=_material2,e.material.needsUpdate=!0)});case 13:_this10.group.add(cbm),mote.models.push(cbm),_this10.render();case 16:case"end":return _context19.stop()}},_callee17,_this10)}));return function(e){return _ref17.apply(this,arguments)}}())},j=0;j<child.length;j++)_loop3(j);this.motes[mote.id]=mote,this.selectedMotes=mote.id}},{key:"loadMote",value:function loadMote(mote){var _this11=this;if(this.motes[mote.id]){if(this.selectedMotes!==mote.id){for(var i=0;i<this.motes[this.selectedMotes].models.length;i++)this.motes[this.selectedMotes].models[i].visible=!1;for(var _i5=0;_i5<this.motes[mote.id].models.length;_i5++)this.motes[mote.id].models[_i5].visible=!0;this.render()}}else!function(){if(_this11.motes[_this11.selectedMotes])for(var _i6=0;_i6<_this11.motes[_this11.selectedMotes].models.length;_i6++)_this11.motes[_this11.selectedMotes].models[_i6].visible=!1;var child=mote.child;mote.models=[];for(var _loop4=function _loop4(j){/(.drc|.bf)$/.test(child[j].model)?_this11.drcLoad.load("/upload/"+child[j].model,function(){var _ref18=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function _callee18(geometry){var cbm,_material3,materials,repeatString,repeat,materialinfo;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function _callee18$(_context20){for(;;)switch(_context20.prev=_context20.next){case 0:if(cbm=new THREE.Mesh(geometry,new THREE.MeshPhongMaterial),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0):cbm.traverse(function(e){e.receiveShadow=!0,e.castShadow=!0}),!child[j].material){_context20.next=14;break}return _context20.next=5,_this11.getMaterial(JSON.parse(child[j].material),1);case 5:_material3=_context20.sent,_this11.materials[child[j].id]=_material3,_this11.materials[child[j].id].config=child[j].material||child[j].fabric.material,materials=_this11.materials[child[j].id].config,repeatString=eval("("+materials+")"),repeat=repeatString.repeat,materialinfo=_this11.materials[child[j].id],_this11.setModelRepeat(materialinfo,repeat),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0,cbm.material=_material3,cbm.material.needsUpdate=!0):cbm.traverse(function(e){e.isMesh&&(e.receiveShadow=!0,e.castShadow=!0,e.material=_material3,e.material.needsUpdate=!0)});case 14:_this11.group.add(cbm),mote.models.push(cbm),_this11.render();case 17:case"end":return _context20.stop()}},_callee18,_this11)}));return function(e){return _ref18.apply(this,arguments)}}()):_this11.load.load("/upload/"+child[j].model,function(){var _ref19=__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.mark(function _callee19(cbm){var _material4,materials,repeatString,repeat,materialinfo;return __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_regenerator___default.a.wrap(function _callee19$(_context21){for(;;)switch(_context21.prev=_context21.next){case 0:if(cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0):cbm.traverse(function(e){e.receiveShadow=!0,e.castShadow=!0}),!child[j].material){_context21.next=13;break}return _context21.next=4,_this11.getMaterial(JSON.parse(child[j].material),1);case 4:_material4=_context21.sent,_this11.materials[child[j].id]=_material4,_this11.materials[child[j].id].config=child[j].material||child[j].fabric.material,materials=_this11.materials[child[j].id].config,repeatString=eval("("+materials+")"),repeat=repeatString.repeat,materialinfo=_this11.materials[child[j].id],_this11.setModelRepeat(materialinfo,repeat),cbm.isMesh?(cbm.receiveShadow=!0,cbm.castShadow=!0,cbm.material=_material4,cbm.material.needsUpdate=!0):cbm.traverse(function(e){e.isMesh&&(e.receiveShadow=!0,e.castShadow=!0,e.material=_material4,e.material.needsUpdate=!0)});case 13:_this11.group.add(cbm),mote.models.push(cbm),_this11.render();case 16:case"end":return _context21.stop()}},_callee19,_this11)}));return function(e){return _ref19.apply(this,arguments)}}())},j=0;j<child.length;j++)_loop4(j);_this11.motes[mote.id]=mote}();this.selectedMotes=mote.id}},{key:"inertiaEnd",value:function(){var e=this;this.inertia=setInterval(function(){e.controls.update()},30),this.clearInert=setTimeout(function(){clearInterval(e.inertia)},3e3)}},{key:"inertiaStart",value:function(){clearInterval(this.inertia),clearInterval(this.clearInert)}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}}]),Editor}();__webpack_exports__.a=Editor},672:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(12),n=i.n(a);t.default={data:function(){return{show:!1,data:{},selectedIndex:0}},methods:{open:function(e){var t=this;return this.$callback=e,this.$store.dispatch("category/refresh","manager-mote-id").then(function(){n.a.get("/model/all/list/"+t.$store.state.category.allCategory["manager-mote-id"][0].id).then(function(e){if(e.data.code)t.$message.error("获取数据失败");else{for(var i=0;i<e.data.data.length;i++)e.data.data[i].active=!1;t.data[0]=e.data.data,t.show=!0}})})},changeCategory:function(e){var t=this;n.a.get("/model/all/list/"+this.$store.state.category.allCategory["manager-mote-id"][e].id).then(function(i){if(i.data.code)t.$message.error("获取数据失败");else{for(var a=0;a<i.data.data.length;a++)i.data.data[a].active=!1;t.data[e]=i.data.data,t.selectedIndex=e}})},selectModel:function(e){console.log("this.selectedIndex = ",this.selectedIndex),console.log("index = ",e),console.log(this.data[this.selectedIndex][e]),this.$callback(this.data[this.selectedIndex][e]),this.show=!1}}}},674:function(e,t,i){t=e.exports=i(76)(!0),t.push([e.i,".line-left-menu{width:140px;float:left;min-height:300px;padding:0;margin:0;list-style:none;border-right:1px solid #eee;color:#999;font-size:14px;cursor:pointer}.line-left-menu li{padding:8px 0}.line-left-menu .active{color:#333;font-size:16px;cursor:default}.line-right{float:left;width:410px;padding:16px;margin:0;list-style:none;max-height:400px;overflow-y:auto}.line-right li{width:92px;height:114px;margin:4px;border:1px solid #eee;font-size:12px;float:left}.line-right li img{width:92px;height:92px}.line-right .active{border-color:#20a0ff}.line-dialog{width:612px!important}","",{version:3,sources:["/var/gdpublic/gdpublic/components/editor/mote-select.vue"],names:[],mappings:"AACA,gBACI,YAAa,AACb,WAAY,AACZ,iBAAkB,AAClB,UAAW,AACX,SAAU,AACV,gBAAiB,AACjB,4BAA6B,AAC7B,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,mBACI,aAAe,CAClB,AACD,wBACI,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,YACI,WAAY,AACZ,YAAa,AACb,aAAc,AACd,SAAU,AACV,gBAAiB,AACjB,iBAAkB,AAClB,eAAiB,CACpB,AACD,eACI,WAAY,AACZ,aAAc,AACd,WAAY,AACZ,sBAAuB,AACvB,eAAgB,AAChB,UAAY,CACf,AACD,mBACI,WAAY,AACZ,WAAa,CAChB,AACD,oBACI,oBAAsB,CACzB,AACD,aACI,qBAAwB,CAC3B",file:"mote-select.vue",sourcesContent:["\n.line-left-menu {\n    width: 140px;\n    float: left;\n    min-height: 300px;\n    padding: 0;\n    margin: 0;\n    list-style: none;\n    border-right: 1px solid #eee;\n    color: #999;\n    font-size: 14px;\n    cursor: pointer;\n}\n.line-left-menu li {\n    padding: 8px 0;\n}\n.line-left-menu .active {\n    color: #333;\n    font-size: 16px;\n    cursor: default;\n}\n.line-right {\n    float: left;\n    width: 410px;\n    padding: 16px;\n    margin: 0;\n    list-style: none;\n    max-height: 400px;\n    overflow-y: auto;\n}\n.line-right li {\n    width: 92px;\n    height: 114px;\n    margin: 4px;\n    border: 1px solid #eee;\n    font-size: 12px;\n    float: left;\n}\n.line-right li img {\n    width: 92px;\n    height: 92px;\n}\n.line-right .active {\n    border-color: #20a0ff;\n}\n.line-dialog {\n    width: 612px !important;\n}\n"],sourceRoot:""}])},680:function(e,t,i){e.exports=i.p+"img/buildingbg.7a444d1.jpg"},684:function(e,t,i){function a(e){i(690)}var n=i(75)(i(672),i(686),a,null,null);e.exports=n.exports},686:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"选择模特",visible:e.show,"custom-class":"select-line-dialog","modal-append-to-body":!0,modal:!1},on:{"update:visible":function(t){e.show=t}}},[i("div",{staticStyle:{overflow:"hidden"}},[i("ul",{staticClass:"line-left-menu"},e._l(e.$store.state.category.allCategory["manager-mote-id"],function(t,a){return i("li",{class:{active:a===e.selectedIndex},on:{click:function(t){e.changeCategory(a)}}},[e._v("\n                "+e._s(t.name)+"\n            ")])})),i("ul",{staticClass:"line-right"},e._l(e.data[e.selectedIndex],function(t,a){return i("li",{class:{active:t.active},on:{click:function(t){e.selectModel(a)}}},[t.image?i("img",{attrs:{src:e.getImagePath(t.image)}}):e._e(),i("div",[e._v(e._s(t.name))])])}))]),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")])],1)])},staticRenderFns:[]}},690:function(e,t,i){var a=i(674);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(77)("c3c87efa",a,!0)},695:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(67),n=i.n(a);t.default={data:function(){return{show:!1,index:0,formList:[{label:"楼栋编号",brief:""},{label:"建设年份",brief:""},{label:"管理员姓名",brief:""},{label:"管理员电话",brief:""},{label:"楼栋实有人口",brief:""},{label:"楼栋出入口数量",brief:""},{label:"楼栋实有车辆数量",brief:""},{label:"出租屋数量",brief:""},{label:"空置房间数量",brief:""},{label:"楼栋电梯数量",brief:""},{label:"楼栋消防栓数量",brief:""},{label:"楼栋消防箱数量",brief:""},{label:"楼栋灭火器数量",brief:""},{label:"消防水管数量",brief:""},{label:"干粉量",brief:""}]}},methods:{open:function(e,t){var i=this.$store.state.building;this.index=t,this.type=e,e?i.data.buildings[i.selectedPart].child_buildings[t].brief?(this.formList=JSON.parse(i.data.buildings[i.selectedPart].child_buildings[t].brief),12==this.formList.length&&(this.formList.pop(),this.formList.push({label:"楼栋消防箱数量",brief:""}),this.formList.push({label:"楼栋灭火器数量",brief:""}),this.formList.push({label:"消防水管数量",brief:""}),this.formList.push({label:"干粉量",brief:""}))):this.formList=[{label:"楼栋编号",brief:""},{label:"建设年份",brief:""},{label:"管理员姓名",brief:""},{label:"管理员电话",brief:""},{label:"楼栋实有人口",brief:""},{label:"楼栋出入口数量",brief:""},{label:"楼栋实有车辆数量",brief:""},{label:"出租屋数量",brief:""},{label:"空置房间数量",brief:""},{label:"楼栋电梯数量",brief:""},{label:"楼栋消防栓数量",brief:""},{label:"楼栋消防箱数量",brief:""},{label:"楼栋灭火器数量",brief:""},{label:"消防水管数量",brief:""},{label:"干粉量",brief:""}]:i.data.buildings[t].brief?this.formList=JSON.parse(i.data.buildings[t].brief):this.formList=[{label:"层数",brief:""},{label:"楼梯出入口数",brief:""},{label:"消防栓数量",brief:""}],this.show=!0},postComponent:function(){var e=this;this.type?this.$store.dispatch("building/changeChildComponent",{index:this.index,form:{brief:n()(this.formList)}}).then(function(){e.$store.dispatch("building/refresh")}):this.$store.dispatch("building/changeBuilding",{index:this.index,form:{brief:n()(this.formList)}}).then(function(){e.$store.dispatch("building/refresh")}),this.show=!1}}}},696:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(647),n=i.n(a);t.default={components:{modelUpload:n.a},data:function(){return{edit:!1,show:!1,index:0,form:{name:"",model:"",brief:"",preview:"",hotLevel:0},rules:{image:[{required:!0,message:"请上传封面图",trigger:"blur"}],model:[{required:!0,message:"请上传模型",trigger:"blur"}]}}},methods:{open:function(e,t){var i=this.$store.state.building;e?(this.index=t,this.form=i.data.buildings[i.selectedPart].child_buildings[t]):this.form={name:"",model:"",brief:"",preview:"",hotLevel:0},this.edit=e,this.show=!0},postComponent:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.edit?e.$store.dispatch("building/changeChildComponent",{index:e.index,form:e.form}).then(function(){e.$refs.form.resetFields()}).then(function(){e.$store.dispatch("building/refresh")}):e.$store.dispatch("building/addChildComponent",e.form).then(function(){e.$refs.form.resetFields()}).then(function(){e.$store.dispatch("building/refresh")}),e.show=!1)})},previewChange:function(e){this.form.preview=e}}}},697:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(12),n=i.n(a);t.default={data:function(){return{id:0,show:!1,selectedIndex:0,data:[],list:[]}},methods:{open:function(e){var t=this;this.selectedIndex=0,this.data=[],this.id=e,n.a.get("/building/household/child/"+e).then(function(e){if(e.data.code)t.$message.error("获取数据失败");else{for(var i=0;i<e.data.data.length;i++)e.data.data[i].active=!1;t.data[0]=e.data.data,t.list=e.data.list,t.show=!0}})},change:function(e){var t=this;this.data[e]?this.selectedIndex=e:n.a.get("/building/household/child/"+this.id+"/"+this.list[e].buildNumber).then(function(i){if(i.data.code)t.$message.error("获取数据失败");else{for(var a=0;a<i.data.data.length;a++)i.data.data[a].active=!1;t.data[e]=i.data.data,t.selectedIndex=e,t.show=!0}})},select:function(e){var t=this.data[this.selectedIndex];t[e].active=!this.data[this.selectedIndex][e].active,this.data.splice(this.selectedIndex,1,t)},postMaterial:function(){for(var e=this,t="",i=0;i<this.data.length;i++)if(this.data[i])for(var a=0;a<this.data[i].length;a++)this.data[i][a].active&&(t+=this.data[i][a].id+",");t&&(t=t.substr(0,t.length-1),this.$store.dispatch("building/addChildHousehold",t).then(function(){e.$message.success("添加成功"),e.show=!1}).then(function(){e.$store.dispatch("building/refresh")}))}}}},698:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(67),n=i.n(a),r=i(647),s=i.n(r),o=i(639),l=i.n(o);t.default={components:{modelUpload:s.a,myUpload:l.a},data:function(){return{edit:!1,show:!1,index:0,form:{name:"",number:"",model:"",preview:"",position:{x:0,y:0,z:0},hotLevel:0},rules:{name:[{required:!0,message:"请输入组件名称",trigger:"blur"}],model:[{required:!0,message:"请上传模型",trigger:"blur"}]}}},methods:{open:function(e,t){var i=this.$store.state.building;e?(this.index=t,this.form=i.data.buildings[t],this.form.position&&this.form.position=={x:0,y:0,z:0}?this.form.position=JSON.parse(this.form.position):this.form.position={x:0,y:0,z:0}):this.form={name:"",number:"",tag:"",model:"",preview:"",position:{x:0,y:0,z:0},hotLevel:0},this.edit=e,this.show=!0},postComponent:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.form.position=n()(e.form.position),e.edit?e.$store.dispatch("building/changeBuilding",{index:e.index,form:e.form}).then(function(){e.$refs.form.resetFields()}).then(function(){e.$store.dispatch("building/refresh")}):e.$store.dispatch("building/addBuilding",e.form).then(function(){e.$refs.form.resetFields()}),e.show=!1)})},previewChange:function(e){this.form.preview=e}}}},699:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(12),n=i.n(a);t.default={data:function(){return{id:0,show:!1,selectedIndex:0,data:[],list:[]}},methods:{open:function(e){var t=this;this.selectedIndex=0,this.data=[],this.id=e,n.a.get("/building/household/"+e).then(function(e){if(e.data.code)t.$message.error("获取数据失败");else{for(var i=0;i<e.data.data.length;i++)e.data.data[i].active=!1;t.data[0]=e.data.data,t.list=e.data.list,t.show=!0}})},change:function(e){var t=this;this.data[e]?this.selectedIndex=e:n.a.get("/building/household/"+this.id+"/"+this.list[e].buildNumber).then(function(i){if(i.data.code)t.$message.error("获取数据失败");else{for(var a=0;a<i.data.data.length;a++)i.data.data[a].active=!1;t.data[e]=i.data.data,t.selectedIndex=e,t.show=!0}})},select:function(e){var t=this.data[this.selectedIndex];t[e].active=!this.data[this.selectedIndex][e].active,this.data.splice(this.selectedIndex,1,t)},posthousehold:function(){for(var e=this,t="",i=0;i<this.data.length;i++)if(this.data[i])for(var a=0;a<this.data[i].length;a++)this.data[i][a].active&&(t+=this.data[i][a].id+",");t&&(t=t.substr(0,t.length-1),this.$store.dispatch("building/addHousehold",t).then(function(){e.$message.success("添加成功"),e.show=!1}).then(function(){e.$store.dispatch("building/refresh")}))}}}},700:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{show:!1,index:0,href:"",isChild:!1}},methods:{open:function(e,t,i){this.isChild=e;var a=this.$store.state.building;this.index=t,e?a.data.buildings[i].child_buildings[t].href?this.href=a.data.buildings[i].child_buildings[t].href:this.href="":a.data.buildings[t].href?this.href=a.data.buildings[t].href:this.href="",this.show=!0},postComponent:function(){var e=this;this.isChild?this.$store.dispatch("building/changeChildComponent",{index:this.index,form:{href:this.href}}).then(function(){e.$store.dispatch("building/refresh")}):this.$store.dispatch("building/changeBuilding",{index:this.index,form:{href:this.href}}).then(function(){e.$store.dispatch("building/refresh")}),this.show=!1}}}},701:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(12),n=i.n(a);t.default={data:function(){return{multiple:!1,id:0,show:!1,selectedIndex:0,data:[]}},methods:{open:function(e,t){var i=this;return this.multiple=e,this.selectedIndex=0,this.data=[],e?this.$store.dispatch("category/refresh","manager/fabric").then(function(){n.a.get("/fabric/all/list/building/"+i.$store.state.category.list[0].id+"/"+i.$store.state.building.data.buildings[i.$store.state.building.selectedPart].id).then(function(e){if(e.data.code)i.$message.error("获取数据失败");else{for(var t=0;t<e.data.data.length;t++)e.data.data[t].active=!1;i.data[0]=e.data.data,i.show=!0}})}):(this.id=t,this.$store.dispatch("category/refresh","manager/fabric").then(function(){n.a.get("/fabric/all/list/"+i.$store.state.category.list[0].id+"/all").then(function(e){if(e.data.code)i.$message.error("获取数据失败");else{for(var t=0;t<e.data.data.length;t++)e.data.data[t].active=!1;i.data[0]=e.data.data,i.show=!0}})}))},change:function(e){var t=this;this.multiple?this.data[e]?this.selectedIndex=e:n.a.get("/fabric/all/list/building/"+this.$store.state.category.list[e].id+"/"+this.$store.state.building.data.buildings[this.$store.state.building.selectedPart].id).then(function(i){if(i.data.code)t.$message.error("获取数据失败");else{t.data[e]=i.data.data;for(var a=0;a<i.data.data.length;a++)i.data.data[a].active=!1;t.selectedIndex=e}}):this.data[e]?this.selectedIndex=e:n.a.get("/fabric/all/list/building/"+this.$store.state.category.list[e].id+"/all").then(function(i){if(i.data.code)t.$message.error("获取数据失败");else{t.data[e]=i.data.data;for(var a=0;a<i.data.data.length;a++)i.data.data[a].active=!1;t.selectedIndex=e}})},select:function(e){var t=this;if(this.multiple){var i=this.data[this.selectedIndex];i[e].active=!this.data[this.selectedIndex][e].active,this.data.splice(this.selectedIndex,1,i)}else this.$store.dispatch("building/addChildFabric",{id:this.id,fabricId:this.data[this.selectedIndex][e].id}).then(function(){t.$message.success("添加成功"),t.show=!1}).then(function(){t.$store.dispatch("building/refresh")})},postMaterial:function(){var e=this;if(!this.multiple)return void(this.show=!1);for(var t="",i=0;i<this.data.length;i++)if(this.data[i])for(var a=0;a<this.data[i].length;a++)this.data[i][a].active&&(t+=this.data[i][a].id+",");t&&(t=t.substr(0,t.length-1),this.$store.dispatch("building/addFabric",t).then(function(){e.$message.success("添加成功"),e.show=!1}).then(function(){e.$store.dispatch("building/refresh")}))}}}},724:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify__=__webpack_require__(67),__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_object_assign__=__webpack_require__(68),__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_object_assign___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_object_assign__),__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_typeof__=__webpack_require__(78),__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_typeof___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_typeof__),__WEBPACK_IMPORTED_MODULE_3_vuex__=__webpack_require__(104),__WEBPACK_IMPORTED_MODULE_4__components_building_component_dialog_vue__=__webpack_require__(793),__WEBPACK_IMPORTED_MODULE_4__components_building_component_dialog_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__components_building_component_dialog_vue__),__WEBPACK_IMPORTED_MODULE_5__components_building_child_component_dialog__=__webpack_require__(791),__WEBPACK_IMPORTED_MODULE_5__components_building_child_component_dialog___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__components_building_child_component_dialog__),__WEBPACK_IMPORTED_MODULE_6__components_building_material_dialog_vue__=__webpack_require__(796),__WEBPACK_IMPORTED_MODULE_6__components_building_material_dialog_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__components_building_material_dialog_vue__),__WEBPACK_IMPORTED_MODULE_7__components_three_building__=__webpack_require__(668),__WEBPACK_IMPORTED_MODULE_8__components_building_brief_dialog_vue__=__webpack_require__(790),__WEBPACK_IMPORTED_MODULE_8__components_building_brief_dialog_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8__components_building_brief_dialog_vue__),__WEBPACK_IMPORTED_MODULE_9__components_editor_mote_select_vue__=__webpack_require__(684),__WEBPACK_IMPORTED_MODULE_9__components_editor_mote_select_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9__components_editor_mote_select_vue__),__WEBPACK_IMPORTED_MODULE_10__components_building_household_dialog_vue__=__webpack_require__(794),__WEBPACK_IMPORTED_MODULE_10__components_building_household_dialog_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10__components_building_household_dialog_vue__),__WEBPACK_IMPORTED_MODULE_11__components_building_child_household_dialog_vue__=__webpack_require__(792),__WEBPACK_IMPORTED_MODULE_11__components_building_child_household_dialog_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11__components_building_child_household_dialog_vue__),__WEBPACK_IMPORTED_MODULE_12__components_building_href_dialog_vue__=__webpack_require__(795),__WEBPACK_IMPORTED_MODULE_12__components_building_href_dialog_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12__components_building_href_dialog_vue__);__webpack_exports__.default={middleware:"check-auth",head:function(){return{title:"场景编辑器",meta:[{hid:"keyword",name:"keyword",content:"场景编辑器,百丰网络科技有限公司,3d"},{hid:"description",name:"description",content:"场景编辑器,百丰网络科技有限公司"}]}},components:{componentDialog:__WEBPACK_IMPORTED_MODULE_4__components_building_component_dialog_vue___default.a,materialDialog:__WEBPACK_IMPORTED_MODULE_6__components_building_material_dialog_vue___default.a,childComponentDialog:__WEBPACK_IMPORTED_MODULE_5__components_building_child_component_dialog___default.a,briefDialog:__WEBPACK_IMPORTED_MODULE_8__components_building_brief_dialog_vue___default.a,moteSelect:__WEBPACK_IMPORTED_MODULE_9__components_editor_mote_select_vue___default.a,childHouseholdDialog:__WEBPACK_IMPORTED_MODULE_11__components_building_child_household_dialog_vue___default.a,householdDialog:__WEBPACK_IMPORTED_MODULE_10__components_building_household_dialog_vue___default.a,hrefDialog:__WEBPACK_IMPORTED_MODULE_12__components_building_href_dialog_vue___default.a},mounted:function(){var e=this;this.$editor=new __WEBPACK_IMPORTED_MODULE_7__components_three_building__.a(document.getElementById("editor"),function(t,i){e.tag=t,e.positionx=i.clientX,e.positiony=i.clientY},function(t,i){if(e.loadding=t,e.progress=i,"100%"==e.progress)for(var a=0;a<e.buildingList.length;a++)e.$editor.shadowSwitch(a,e.buildingList[a].castShadow)},function(t,i){e.brief=t,e.household=i}),this.mobile={version:function(){var e=navigator.userAgent;navigator.appVersion;return{mobile:!!e.match(/AppleWebKit.*Mobile.*/)}}()},this.mobile.version.mobile&&this.$editor.inspectMobile();for(var t=0;t<this.buildingList.length;t++)this.buildingList.length&&this.$editor.loadModel(t,0,"/upload/"+this.buildingList[t].model,this.buildingList[t].child_buildings,this.buildingList[t]),this.buildingList[t].fabrics.length&&this.$editor.loadMaterial(t,0,JSON.parse(this.buildingList[t].fabrics[0].material),this.buildingList[t].fabrics[0].building_fabric.repeat||1);if(this.model&&this.model.child.length&&this.$editor.loadMote(this.model),this.shadowSwitch=this.shadow,"object"===__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_typeof___default()(JSON.parse(this.light))&&(this.clothesLight=JSON.parse(this.light)),this.exposure=this.Eexposure,this.background&&"object"===__WEBPACK_IMPORTED_MODULE_2__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_helpers_typeof___default()(JSON.parse(this.background))&&(this.bg=JSON.parse(this.background)),this.camera){var i=JSON.parse(this.camera);this.$editor.saveCamera(i)}},computed:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3_vuex__.mapState)({data:function(e){return e.building.data||[]},background:function(e){return e.building.data.background},camera:function(e){return e.building.data.camera},buildingList:function(e){return e.building.data.buildings||[]},light:function(e){return e.building.data.light||'{"spot": 0.97, "hemisphere": 0.27, "point": 0.67,"ambient":0.32}'},Eexposure:function(e){return e.building.data.exposure||1},childBuildingList:function(e){return e.building.data.buildings[e.building.selectedPart]?e.building.data.buildings[e.building.selectedPart].child_buildings:[]},fabricList:function(e){return e.building.data.buildings[e.building.selectedPart]?e.building.data.buildings[e.building.selectedPart].fabrics:[]},householdList:function(e){return e.building.data.buildings[e.building.selectedPart]?e.building.data.buildings[e.building.selectedPart].households:[]},childHouseholdList:function(e){return e.building.data.buildings[e.building.selectedPart]&&e.building.data.buildings[e.building.selectedPart].child_buildings?e.building.data.buildings[e.building.selectedPart].child_buildings[e.building.selectedChildPart[e.building.selectedPart]].households:[]},selectedPart:function(e){return e.building.selectedPart},selectedChildPart:function(e){return e.building.selectedChildPart[e.building.selectedPart]},selectedMaterial:function(e){return e.building.selectedMaterial[e.building.selectedPart]},model:function(e){return e.building.data.model}}),fetch:function(e){var t=e.route;return e.store.dispatch("building/one",t.params.id)},data:function(){return{options:[{bgController:0,label:"默认"},{bgController:1,label:"天空盒",disabled:!0},{bgController:2,label:"背景1"},{bgController:3,label:"背景2"},{bgController:4,label:"背景3"}],envMaps:[{envController:0,label:"设计室"},{envController:1,label:"大桥"},{envController:2,label:"天空"},{envController:3,label:"教堂"}],bg:{isEnv:!1,bgController:"",envController:"",envMapIntensity:0},form:__WEBPACK_IMPORTED_MODULE_1__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_object_assign___default()({transparent:!1,refractionRatio:.01,reflectivity:.01,opacity:1,metalness:.01,roughness:.01,clearCoat:0,clearCoatRoughness:0,color:"#FFFFFF",emissive:"#000",specular:"#000",shininess:1,shading:2,wireframe:!1,map:"",lightMap:"",specularMap:"",normalMap:"",displacementMap:"",displacementScale:void 0,normalScale:void 0,aoMap:"",envMap:""},this.$store.state.fabric.material),castShadow:!1,LightBias:-18e-5,fabricId:0,selectedTab:0,dropdownIndex:0,dropdownPartIndex:0,dropdownFabricIndex:0,dropdownChildPartIndex:0,dropdownHouseholdIndex:0,dropdownChildHouseholdIndex:0,fabricRepeat:.1,childFabricRepeat:.1,selectedSceneTab:0,selectedChild:0,aoMapIntensity:0,selectedSceneFabric:0,sceneFabricRepeat:0,fabricGroupRepeat:.1,edit:!1,shadowSwitch:!1,progress:"0%",loadding:!0,envSwitch:!1,embroideryDimensions:.05,exposure:1.2,clothesLight:{spot:.97,hemisphere:.27,point:.67,ambient:.32},selectedGoodsIndex:0,tag:"",positionx:"",positiony:"",brief:[]}},watch:{"form.color":function(e){this.$editor.updateMaterialColor(this.selectedPart,this.dropdownFabricIndex,"color",e)},"form.emissive":function(e){this.$editor.updateMaterialColor(this.selectedPart,this.dropdownFabricIndex,"emissive",e)},"form.specular":function(e){this.$editor.updateMaterialColor(this.selectedPart,this.dropdownFabricIndex,"specular",e)},"form.transparent":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"transparent",e)},"form.opacity":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"opacity",e)},"form.reflectivity":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"reflectivity",e)},"form.refractionRatio":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"refractionRatio",e)},"form.aoMapIntensity":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"aoMapIntensity",e)},"form.shading":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"shading",e)},"form.wireframe":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"wireframe",e)},"form.metalness":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"metalness",e)},"form.roughness":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"roughness",e)},"form.clearCoat":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"clearCoat",e)},"form.clearCoatRoughness":function(e){this.$editor.updateMaterialNumber(this.selectedPart,this.dropdownFabricIndex,"clearCoatRoughness",e)},partRepeat:function(e){this.fabricList&&this.fabricList[this.selectedMaterial]&&this.fabricList[this.selectedMaterial].part_fabric.repeat||this.$editor.changeRepeat(this.selectedPart,this.selectedMaterial,e)},castShadow:function(e){this.$editor.shadowSwitch(this.selectedPart,e)},fabricRepeat:function(e){this.$editor.changeRepeat(this.selectedPart,this.selectedMaterial,e)},childFabricRepeat:function(e){this.$editor.changeChildFabricRepeat(this.selectedPart,0,this.selectedChildPart,e)},LightBias:function(e){this.$editor.changeLightBias(e)},shadowSwitch:function(e){this.$editor.changeShadow(e)},exposure:function(e){this.$editor.changeExposure(e)},"bg.envMapIntensity":function(e){this.$editor.changeEnvMapIntensity(e)},"clothesLight.spot":function(e){this.$editor.changeClothesLight("spot",e)},"clothesLight.hemisphere":function(e){this.$editor.changeClothesLight("hemisphere",e)},"clothesLight.ambient":function(e){this.$editor.changeClothesLight("ambient",e)},"clothesLight.spotLight1":function(e){this.$editor.changeClothesLight("spotLight1",e)},"clothesLight.point":function(e){this.$editor.changeClothesLight("point",e)}},methods:{saveCamera:function(){var e=this,t={},i=this.$editor.camera.position.x,a=this.$editor.camera.position.y,n=this.$editor.camera.position.z;t[0]=i.toPrecision(8),t[1]=a.toPrecision(8),t[2]=n.toPrecision(8),this.$store.dispatch("building/saveCamera",{id:this.data.id,config:__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify___default()(t)}).then(function(){e.$message.success("保存成功")})},saveConfig:function(){var e=this,t={};for(var i in this.form)t[i]=this.form[i];this.$store.dispatch("fabric/saveMaterial",{id:this.fabricId,config:__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify___default()(t)}).then(function(){e.$store.dispatch("building/refresh"),e.$message.success("保存成功"),e.closeFabricController()})},openFabricController:function openFabricController(fabric){var timer=null,slideFabric=document.getElementById("rightSlideSidebar");this.form=eval("("+fabric+")"),timer=setInterval(function(){slideFabric.style.left=parseFloat(slideFabric.style.left)+10+"px",parseFloat(slideFabric.style.left)>=0&&(slideFabric.style.left="0",window.clearInterval(timer))},10)},closeFabricController:function(){var e=null,t=document.getElementById("rightSlideSidebar");clearInterval(e),e=setInterval(function(){t.style.left=parseFloat(t.style.left)-10+"px",parseFloat(t.style.left)<=-100&&(t.style.left="-315px",window.clearInterval(e))},10)},cacheIndex:function(e){this.dropdownPartIndex=e},cacheChildIndex:function(e){this.dropdownChildPartIndex=e},selectBuilding:function(e){this.$store.commit("building/selectPart",e),this.buildingList[e].fabrics[this.selectedMaterial]&&this.buildingList[e].fabrics[this.selectedMaterial].building_fabric.repeat&&(this.fabricRepeat=this.buildingList[e].fabrics[this.selectedMaterial].building_fabric.repeat)},selectMaterial:function(e){this.$store.commit("building/selectedMaterial",e)},selectChildBuilding:function(e){this.$store.commit("building/selectChildPart",e),this.buildingList[this.selectedPart].child_buildings[e]&&this.buildingList[this.selectedPart].child_buildings[e].repeat&&(this.childFabricRepeat=this.buildingList[this.selectedPart].child_buildings[e].repeat)},changePartRepeat:function(e){this.buildingList[this.selectedPart]&&this.buildingList[this.selectedPart].repeat!==e&&this.$store.dispatch("building/changePartRepeat",{index:this.selectedPart,repeat:e})},changeChildFabricRepeat:function(e){this.buildingList[this.selectedPart]&&this.buildingList[this.selectedPart].repeat!==e&&this.$store.dispatch("building/changeChildFabricRepeat",{pIndex:this.selectedPart,cIndex:this.selectedChildPart,repeat:e})},changeCastShadow:function(){this.$store.dispatch("building/changeCastShadow",{index:this.selectedPart,castShadow:this.castShadow})},changeShadow:function(){this.$store.dispatch("building/changeShadow",{index:this.data.id,shadowSwitch:this.shadowSwitch})},changeLightBias:function(){this.$store.dispatch("building/changeLightBias",{index:this.data.id,lightBias:this.LightBias})},changeBackground:function(){this.$editor.changeBackground(this.bg.bgController),this.$store.dispatch("building/changeBackground",{index:this.data.id,bgController:__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify___default()(this.bg)})},changeEnvMaps:function(){this.bg.envController?this.$editor.changeEnvMaps(this.bg.isEnv,this.bg.envController):this.$editor.changeEnvMaps(this.bg.isEnv,0),this.bg.isEnv?this.options[1].disabled=!1:(this.options[1].disabled=!0,1==this.bg.bgController&&(this.bg.bgController=0))},changeClothesLight:function(){this.$store.dispatch("building/changeClothesLight",{index:this.data.id,clothesLight:__WEBPACK_IMPORTED_MODULE_0__var_gdpublic_gdpublic_node_modules_babel_runtime_6_26_0_babel_runtime_core_js_json_stringify___default()(this.clothesLight)})},changeExposure:function(){this.$store.dispatch("building/changeExposure",{index:this.data.id,exposure:this.exposure})},changeFabricRepeat:function(e){this.buildingList[this.selectedPart].fabrics[this.selectedMaterial].building_fabric.repeat!==e&&this.$store.dispatch("building/changeFabricRepeat",{index:this.selectedMaterial,repeat:e})},addComponent:function(){this.$refs.componentDialog.open(!1)},addChildComponent:function(){this.$refs.childComponentDialog.open(!1)},addMaterial:function(){this.$refs.materialDialog.open(!0)},addHousehold:function(){this.$refs.householdDialog.open(this.buildingList[this.selectedPart].id)},addChildHousehold:function(){this.$refs.childHouseholdDialog.open(this.childBuildingList[this.selectedChildPart].id)},addChildMaterial:function(e){this.$refs.materialDialog.open(!1,e)},bindModel:function(){var e=this;this.$refs.modelSelect.open(function(t){e.$store.dispatch("building/bindModel",t.id).then(function(){e.$editor.loadMote(e.model),e.$message.success("绑定成功")})})},handleRightMenu:function(e){var t=this;switch(e){case"removeComponent":this.$confirm("此操作将永久删除该组件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("building/removeBuilding",t.dropdownPartIndex).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(e){t.$message({type:"error",message:"删除失败!"+e})})}).catch(function(e){});break;case"editComponent":this.$refs.componentDialog.open(!0,this.dropdownPartIndex);break;case"editBrief":this.$refs.briefDialog.open(!1,this.dropdownPartIndex);break;case"editHref":this.$refs.hrefDialog.open(!1,this.dropdownPartIndex);break;case"editChildBrief":this.$refs.briefDialog.open(!0,this.dropdownChildPartIndex);break;case"editChildHref":this.$refs.hrefDialog.open(!0,this.dropdownChildPartIndex,this.selectedPart);break;case"removeFabric":this.$confirm("此操作将从选中部件永久删除该面料, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("building/removeFabric",t.dropdownFabricIndex).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(e){t.$message({type:"error",message:"删除失败!"+e})})}).catch(function(e){});break;case"editChildComponent":this.$refs.childComponentDialog.open(!0,this.dropdownChildPartIndex);break;case"removeChildComponent":this.$store.dispatch("building/removeChildComponent",this.dropdownChildPartIndex).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(e){t.$message({type:"error",message:"删除失败!"+e})});break;case"openFabricController":var i=this.dropdownFabricIndex,a=this.data.buildings[this.selectedPart].fabrics[i].material;this.fabricId=this.data.buildings[this.selectedPart].fabrics[i].id,this.openFabricController(a);break;case"deleteHousehold":var n=this.buildingList[this.selectedPart].id,r=this.householdList[this.dropdownHouseholdIndex].id;this.$store.dispatch("building/deleteHousehold",{cid:n,hid:r,index:this.dropdownHouseholdIndex}).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(e){t.$message({type:"error",message:"删除失败!"+e})});break;case"deleteChildHousehold":var s=this.childBuildingList[this.selectedChildPart].id,o=this.householdList[this.dropdownChildHouseholdIndex].id;this.$store.dispatch("building/deleteChildHousehold",{cid:s,hid:o,index:this.dropdownChildHouseholdIndex}).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(e){t.$message({type:"error",message:"删除失败!"+e})})}}}}},746:function(e,t,i){t=e.exports=i(76)(!0),t.push([e.i,".material-left-menu{width:140px;float:left;min-height:300px;padding:0;margin:0;list-style:none;border-right:1px solid #eee;color:#999;font-size:14px;cursor:pointer}.material-left-menu li{padding:8px 0}.material-left-menu .active{color:#333;font-size:16px;cursor:default}.material-right{float:left;width:410px;padding:16px;margin:0;list-style:none;max-height:400px;overflow-y:auto}.material-right li{width:92px;height:114px;margin:4px;border:1px solid #eee;font-size:12px;float:left}.material-right li img{width:92px;height:92px}.material-right .active{border-color:#20a0ff}.material-dialog{width:612px}","",{version:3,sources:["/var/gdpublic/gdpublic/components/building/material-dialog.vue"],names:[],mappings:"AACA,oBACI,YAAa,AACb,WAAY,AACZ,iBAAkB,AAClB,UAAW,AACX,SAAU,AACV,gBAAiB,AACjB,4BAA6B,AAC7B,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,uBACI,aAAe,CAClB,AACD,4BACI,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,gBACI,WAAY,AACZ,YAAa,AACb,aAAc,AACd,SAAU,AACV,gBAAiB,AACjB,iBAAkB,AAClB,eAAiB,CACpB,AACD,mBACI,WAAY,AACZ,aAAc,AACd,WAAY,AACZ,sBAAuB,AACvB,eAAgB,AAChB,UAAY,CACf,AACD,uBACI,WAAY,AACZ,WAAa,CAChB,AACD,wBACI,oBAAsB,CACzB,AACD,iBACI,WAAa,CAChB",file:"material-dialog.vue",sourcesContent:["\n.material-left-menu {\n    width: 140px;\n    float: left;\n    min-height: 300px;\n    padding: 0;\n    margin: 0;\n    list-style: none;\n    border-right: 1px solid #eee;\n    color: #999;\n    font-size: 14px;\n    cursor: pointer;\n}\n.material-left-menu li {\n    padding: 8px 0;\n}\n.material-left-menu .active {\n    color: #333;\n    font-size: 16px;\n    cursor: default;\n}\n.material-right {\n    float: left;\n    width: 410px;\n    padding: 16px;\n    margin: 0;\n    list-style: none;\n    max-height: 400px;\n    overflow-y: auto;\n}\n.material-right li {\n    width: 92px;\n    height: 114px;\n    margin: 4px;\n    border: 1px solid #eee;\n    font-size: 12px;\n    float: left;\n}\n.material-right li img {\n    width: 92px;\n    height: 92px;\n}\n.material-right .active {\n    border-color: #20a0ff;\n}\n.material-dialog {\n    width: 612px;\n}\n"],sourceRoot:""}])},749:function(e,t,i){t=e.exports=i(76)(!0),t.push([e.i,".household-left-menu{width:140px;float:left;min-height:300px;padding:0;margin:0;list-style:none;border-right:1px solid #eee;color:#999;font-size:14px;cursor:pointer}.household-left-menu li{padding:8px 0}.household-left-menu .active{color:#333;font-size:16px;cursor:default}.household-right{float:left;width:410px;padding:16px;margin:0;list-style:none;max-height:400px;overflow-y:auto}.household-right li{width:90px;height:39px;margin:4px;border:1px solid #eee;font-size:12px;float:left;cursor:pointer}.household-right li img{width:92px;height:92px}.household-right .active{border-color:#20a0ff}.household-dialog{width:612px}","",{version:3,sources:["/var/gdpublic/gdpublic/components/building/household-dialog.vue"],names:[],mappings:"AACA,qBACI,YAAa,AACb,WAAY,AACZ,iBAAkB,AAClB,UAAW,AACX,SAAU,AACV,gBAAiB,AACjB,4BAA6B,AAC7B,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,wBACI,aAAe,CAClB,AACD,6BACI,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,iBACI,WAAY,AACZ,YAAa,AACb,aAAc,AACd,SAAU,AACV,gBAAiB,AACjB,iBAAkB,AAClB,eAAiB,CACpB,AACD,oBACI,WAAY,AACZ,YAAa,AACb,WAAY,AACZ,sBAAuB,AACvB,eAAgB,AAChB,WAAY,AACZ,cAAgB,CACnB,AACD,wBACI,WAAY,AACZ,WAAa,CAChB,AACD,yBACI,oBAAsB,CACzB,AACD,kBACI,WAAa,CAChB",file:"household-dialog.vue",sourcesContent:["\n.household-left-menu {\n    width: 140px;\n    float: left;\n    min-height: 300px;\n    padding: 0;\n    margin: 0;\n    list-style: none;\n    border-right: 1px solid #eee;\n    color: #999;\n    font-size: 14px;\n    cursor: pointer;\n}\n.household-left-menu li {\n    padding: 8px 0;\n}\n.household-left-menu .active {\n    color: #333;\n    font-size: 16px;\n    cursor: default;\n}\n.household-right {\n    float: left;\n    width: 410px;\n    padding: 16px;\n    margin: 0;\n    list-style: none;\n    max-height: 400px;\n    overflow-y: auto;\n}\n.household-right li {\n    width: 90px;\n    height: 39px;\n    margin: 4px;\n    border: 1px solid #eee;\n    font-size: 12px;\n    float: left;\n    cursor: pointer;\n}\n.household-right li img {\n    width: 92px;\n    height: 92px;\n}\n.household-right .active {\n    border-color: #20a0ff;\n}\n.household-dialog {\n    width: 612px;\n}\n"],sourceRoot:""}])},757:function(e,t,i){t=e.exports=i(76)(!0),t.push([e.i,".material-left-menu{width:140px;float:left;min-height:300px;padding:0;margin:0;list-style:none;border-right:1px solid #eee;color:#999;font-size:14px;cursor:pointer}.material-left-menu li{padding:8px 0}.material-left-menu .active{color:#333;font-size:16px;cursor:default}.material-right{float:left;width:410px;padding:16px;margin:0;list-style:none;max-height:400px;overflow-y:auto}.material-right li{width:90px;height:39px;margin:4px;border:1px solid #eee;font-size:12px;float:left;cursor:pointer}.material-right li img{width:92px;height:92px}.material-right .active{border-color:#20a0ff}.material-dialog{width:612px}","",{version:3,sources:["/var/gdpublic/gdpublic/components/building/child-household-dialog.vue"],names:[],mappings:"AACA,oBACI,YAAa,AACb,WAAY,AACZ,iBAAkB,AAClB,UAAW,AACX,SAAU,AACV,gBAAiB,AACjB,4BAA6B,AAC7B,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,uBACI,aAAe,CAClB,AACD,4BACI,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACnB,AACD,gBACI,WAAY,AACZ,YAAa,AACb,aAAc,AACd,SAAU,AACV,gBAAiB,AACjB,iBAAkB,AAClB,eAAiB,CACpB,AACD,mBACI,WAAY,AACZ,YAAa,AACb,WAAY,AACZ,sBAAuB,AACvB,eAAgB,AAChB,WAAY,AACZ,cAAgB,CACnB,AACD,uBACI,WAAY,AACZ,WAAa,CAChB,AACD,wBACI,oBAAsB,CACzB,AACD,iBACI,WAAa,CAChB",file:"child-household-dialog.vue",sourcesContent:["\n.material-left-menu {\n    width: 140px;\n    float: left;\n    min-height: 300px;\n    padding: 0;\n    margin: 0;\n    list-style: none;\n    border-right: 1px solid #eee;\n    color: #999;\n    font-size: 14px;\n    cursor: pointer;\n}\n.material-left-menu li {\n    padding: 8px 0;\n}\n.material-left-menu .active {\n    color: #333;\n    font-size: 16px;\n    cursor: default;\n}\n.material-right {\n    float: left;\n    width: 410px;\n    padding: 16px;\n    margin: 0;\n    list-style: none;\n    max-height: 400px;\n    overflow-y: auto;\n}\n.material-right li {\n    width: 90px;\n    height: 39px;\n    margin: 4px;\n    border: 1px solid #eee;\n    font-size: 12px;\n    float: left;\n    cursor: pointer;\n}\n.material-right li img {\n    width: 92px;\n    height: 92px;\n}\n.material-right .active {\n    border-color: #20a0ff;\n}\n.material-dialog {\n    width: 612px;\n}\n"],sourceRoot:""}])},770:function(e,t,i){t=e.exports=i(76)(!0),t.push([e.i,"#bqy{position:fixed;background-color:#fff;display:inline-block;padding:0 10px;height:32px;line-height:30px;font-size:12px;color:#409eff;border-radius:4px;-webkit-box-sizing:border-box;box-sizing:border-box;border:3px solid rgba(64,158,255,.2);white-space:nowrap}.editor-bottom-btn-box-right{width:228px;position:fixed;right:16px;overflow:hidden;background:#f5f5f5;border-top:1px solid #ccc;height:48px;bottom:0;z-index:2000;padding:0 16px;margin-top:8px;line-height:22px}.editor-bottom-btn{width:100%;margin-top:8px;line-height:34px;border-radius:4px;background:#373d41;text-align:center;cursor:pointer;color:#fff;-webkit-transition:background .3s;-o-transition:background .3s;transition:background .3s}#scene-setting{right:0;background:#eee;width:310px;overflow-y:auto;padding-bottom:50px;border-left:1px solid #ccc}#editor,#scene-setting{position:absolute;top:0;bottom:0}#editor{left:0;right:260px}.tab{height:24px;border-bottom:1px solid #ccc;border-top:1px solid #fff;padding-top:10px;margin-bottom:1px}.tab-item{height:24px;line-height:24px;float:left;padding:0 8px;margin:0 4px;border-left:1px solid #ccc;border-right:1px solid #ccc;border-top-right-radius:4px;border-top-left-radius:4px;background:#ddd;border-top:1px solid #ccc;font-size:12px;cursor:pointer;color:#666}.tab-item.active{background:#eee;height:25px;cursor:default}.tool-bar{background:#e5e5e5;border-top:1px solid #ccc;border-bottom:1px solid rgba(0,0,0,.25)}.tool-bar,.tool-bar .icon{height:30px;line-height:30px}.tool-bar .icon{width:30px;text-align:center;float:right;cursor:pointer;color:#666}.component-list,.list{list-style:none;padding:0;margin:0;height:180px;overflow-y:auto}.component-item,.list-item{font-size:14px;height:38px;line-height:38px;padding:0 16px;background:#ebebeb;-webkit-transition:background .3s;-o-transition:background .3s;transition:background .3s;cursor:pointer;color:#888;border-bottom:1px solid #e5e5e5}.list-item:hover{background:#f5f5f5;color:#666}.component-item.active,.component-item:active,.list-item.active,.list-item:active{background:#f9f9f9;color:#333}.list-item .icon{float:right}.component-item{height:50px;line-height:50px;overflow:hidden}.image-box{display:block;float:right;margin:5px;border:1px solid #ccc}.image-box,.image-box img{width:38px;height:38px}.slide-bar{padding:0 16px;height:34px;line-height:34px}.slide-label{font-size:12px;color:#999;margin-right:16px;width:42px}.slide,.slide-label{display:block;float:left}.slide{width:170px}#progress-bar{position:fixed;top:100px;left:50px;width:100px}#embroidery-editor{position:absolute;bottom:18px;width:400px;height:36px;margin:0 auto;left:0;right:260px;background:#fff;padding:16px}#embroidery-editor .el-slider{width:300px}.list-title{text-align:center;line-height:50px;color:#666}.box-card{width:280px;padding:0}.card-list{margin:0;list-style:none;padding:0}.card-list li{height:50px}.card-list li>span{width:30%;margin:8px 0;display:inline-block}.card-list li>div{width:65%;float:right}.card-item-margin{margin:8px 6px 8px 0}.settings-widget{width:280px;border-bottom:1px solid rgba(0,0,0,.25);border-top:1px solid #fff}.settings-widget tr{line-height:25px}#save-btn{width:100%;margin-top:38px;line-height:34px;border-radius:4px;background:#f53;text-align:center;cursor:pointer;color:#fff;-webkit-transition:background .3s;-o-transition:background .3s;transition:background .3s}.bottom-btn-box-right{width:228px;position:fixed;right:0;overflow:hidden;background:#f5f5f5;border-top:1px solid #ccc;height:100px;bottom:0;z-index:2000;padding:0 16px;margin-top:8px;line-height:22px}.bottom-btn{width:100%;margin-top:8px;line-height:34px;border-radius:4px;background:#373d41;text-align:center;cursor:pointer;color:#fff;-webkit-transition:background .3s;-o-transition:background .3s;transition:background .3s}","",{version:3,sources:["/var/gdpublic/gdpublic/pages/editor/building/_id.vue"],names:[],mappings:"AACA,KACI,eAAgB,AAChB,sBAAuB,AACvB,qBAAsB,AACtB,eAAgB,AAChB,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,cAAe,AACf,kBAAmB,AACnB,8BAA+B,AACvB,sBAAuB,AAC/B,qCAAsC,AACtC,kBAAoB,CACvB,AACD,6BACI,YAAa,AACb,eAAgB,AAChB,WAAY,AACZ,gBAAiB,AACjB,mBAAoB,AACpB,0BAA2B,AAC3B,YAAa,AACb,SAAU,AACV,aAAc,AACd,eAAgB,AAChB,eAAgB,AAChB,gBAAkB,CACrB,AACD,mBACI,WAAY,AACZ,eAAgB,AAChB,iBAAkB,AAClB,kBAAmB,AACnB,mBAAoB,AACpB,kBAAmB,AACnB,eAAgB,AAChB,WAAY,AACZ,kCAAmC,AACnC,6BAA8B,AAC9B,yBAA2B,CAC9B,AACD,eAGI,QAAS,AAET,gBAAiB,AACjB,YAAa,AACb,gBAAiB,AACjB,oBAAqB,AACrB,0BAA4B,CAC/B,AACD,uBAVI,kBAAmB,AACnB,MAAO,AAEP,QAAU,CAab,AAND,QAGI,OAAQ,AACR,WAAa,CAEhB,AACD,KACI,YAAa,AACb,6BAA8B,AAC9B,0BAA2B,AAC3B,iBAAkB,AAClB,iBAAmB,CACtB,AACD,UACI,YAAa,AACb,iBAAkB,AAClB,WAAY,AACZ,cAAe,AACf,aAAc,AACd,2BAA4B,AAC5B,4BAA6B,AAC7B,4BAA6B,AAC7B,2BAA4B,AAC5B,gBAAiB,AACjB,0BAA2B,AAC3B,eAAgB,AAChB,eAAgB,AAChB,UAAY,CACf,AACD,iBACI,gBAAiB,AACjB,YAAa,AACb,cAAgB,CACnB,AACD,UAGI,mBAAoB,AACpB,0BAA2B,AAE3B,uCAA4C,CAE/C,AACD,0BARI,YAAa,AACb,gBAAkB,CAerB,AARD,gBAEI,WAAY,AACZ,kBAAmB,AAEnB,YAAa,AACb,eAAgB,AAChB,UAAY,CACf,AACD,sBACI,gBAAiB,AACjB,UAAW,AACX,SAAU,AACV,aAAc,AACd,eAAiB,CACpB,AACD,2BACI,eAAgB,AAChB,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,mBAAoB,AACpB,kCAAmC,AACnC,6BAA8B,AAC9B,0BAA2B,AAC3B,eAAgB,AAChB,WAAY,AACZ,+BAAiC,CACpC,AACD,iBACI,mBAAoB,AACpB,UAAW,CACd,AACD,kFAII,mBAAoB,AACpB,UAAY,CACf,AACD,iBACI,WAAY,CACf,AACD,gBACI,YAAa,AACb,iBAAkB,AAClB,eAAiB,CACpB,AACD,WAGI,cAAe,AACf,YAAa,AACb,WAAY,AACZ,qBAAuB,CAC1B,AACD,0BAPI,WAAY,AACZ,WAAa,CAShB,AACD,WACI,eAAgB,AAChB,YAAa,AACb,gBAAkB,CACrB,AACD,aACI,eAAgB,AAChB,WAAY,AAGZ,kBAAmB,AACnB,UAAY,CACf,AACD,oBALI,cAAe,AACf,UAAY,CAQf,AAJD,OAGI,WAAa,CAChB,AAGD,cACI,eAAgB,AAChB,UAAW,AACX,UAAW,AACX,WAAa,CAChB,AACD,mBACI,kBAAmB,AACnB,YAAa,AACb,YAAa,AACb,YAAa,AACb,cAAe,AACf,OAAQ,AACR,YAAa,AACb,gBAAiB,AACjB,YAAc,CACjB,AACD,8BACI,WAAa,CAChB,AACD,YACI,kBAAmB,AACnB,iBAAkB,AAClB,UAAY,CACf,AAED,UACI,YAAa,AACb,SAAU,CACb,AACD,WACI,SAAU,AACV,gBAAiB,AACjB,SAAW,CACd,AACD,cACI,WAAa,CAChB,AACD,mBACI,UAAW,AACX,aAAc,AACd,oBAAsB,CACzB,AACD,kBACI,UAAW,AACX,WAAa,CAChB,AAED,kBACI,oBAAsB,CACzB,AACD,iBACI,YAAa,AACb,wCAA4C,AAC5C,yBAA2B,CAC9B,AACD,oBACI,gBAAkB,CACrB,AACD,UACI,WAAY,AACZ,gBAAiB,AACjB,iBAAkB,AAClB,kBAAmB,AACnB,gBAAiB,AACjB,kBAAmB,AACnB,eAAgB,AAChB,WAAY,AACZ,kCAAmC,AACnC,6BAA8B,AAC9B,yBAA2B,CAC9B,AACD,sBACI,YAAa,AACb,eAAgB,AAChB,QAAS,AACT,gBAAiB,AACjB,mBAAoB,AACpB,0BAA2B,AAC3B,aAAc,AACd,SAAU,AACV,aAAc,AACd,eAAgB,AAChB,eAAgB,AAChB,gBAAkB,CACrB,AACD,YACI,WAAY,AACZ,eAAgB,AAChB,iBAAkB,AAClB,kBAAmB,AACnB,mBAAoB,AACpB,kBAAmB,AACnB,eAAgB,AAChB,WAAY,AACZ,kCAAmC,AACnC,6BAA8B,AAC9B,yBAA2B,CAC9B",file:"_id.vue",sourcesContent:["\n#bqy{\n    position: fixed;\n    background-color: #fff;\n    display: inline-block;\n    padding: 0 10px;\n    height: 32px;\n    line-height: 30px;\n    font-size: 12px;\n    color: #409eff;\n    border-radius: 4px;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    border: 3px solid rgba(64,158,255,.2);\n    white-space: nowrap;\n}\n.editor-bottom-btn-box-right {\n    width: 228px;\n    position: fixed;\n    right: 16px;\n    overflow: hidden;\n    background: #f5f5f5;\n    border-top: 1px solid #ccc;\n    height: 48px;\n    bottom: 0;\n    z-index: 2000;\n    padding: 0 16px;\n    margin-top: 8px;\n    line-height: 22px;\n}\n.editor-bottom-btn {\n    width: 100%;\n    margin-top: 8px;\n    line-height: 34px;\n    border-radius: 4px;\n    background: #373d41;\n    text-align: center;\n    cursor: pointer;\n    color: #fff;\n    -webkit-transition: background .3s;\n    -o-transition: background .3s;\n    transition: background .3s;\n}\n#scene-setting {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    background: #eee;\n    width: 310px;\n    overflow-y: auto;\n    padding-bottom: 50px;\n    border-left: 1px solid #ccc;\n}\n#editor {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 260px;\n    bottom: 0\n}\n.tab {\n    height: 24px;\n    border-bottom: 1px solid #ccc;\n    border-top: 1px solid #fff;\n    padding-top: 10px;\n    margin-bottom: 1px;\n}\n.tab-item {\n    height: 24px;\n    line-height: 24px;\n    float: left;\n    padding: 0 8px;\n    margin: 0 4px;\n    border-left: 1px solid #ccc;\n    border-right: 1px solid #ccc;\n    border-top-right-radius: 4px;\n    border-top-left-radius: 4px;\n    background: #ddd;\n    border-top: 1px solid #ccc;\n    font-size: 12px;\n    cursor: pointer;\n    color: #666;\n}\n.tab-item.active {\n    background: #eee;\n    height: 25px;\n    cursor: default;\n}\n.tool-bar {\n    height: 30px;\n    line-height: 30px;\n    background: #e5e5e5;\n    border-top: 1px solid #ccc;\n    /*border-bottom:2px solid #ccc;*/\n    border-bottom: 1px solid rgba(0, 0, 0, .25);\n    /*border-top: 1px solid #fff;*/\n}\n.tool-bar .icon {\n    height: 30px;\n    width: 30px;\n    text-align: center;\n    line-height: 30px;\n    float: right;\n    cursor: pointer;\n    color: #666;\n}\n.list, .component-list {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n    height: 180px;\n    overflow-y: auto;\n}\n.list-item, .component-item {\n    font-size: 14px;\n    height: 38px;\n    line-height: 38px;\n    padding: 0 16px;\n    background: #ebebeb;\n    -webkit-transition: background .3s;\n    -o-transition: background .3s;\n    transition: background .3s;\n    cursor: pointer;\n    color: #888;\n    border-bottom: 1px solid #e5e5e5;\n}\n.list-item:hover {\n    background: #f5f5f5;\n    color: #666\n}\n.list-item:active,\n.list-item.active,\n.component-item:active,\n.component-item.active {\n    background: #f9f9f9;\n    color: #333;\n}\n.list-item .icon {\n    float: right\n}\n.component-item {\n    height: 50px;\n    line-height: 50px;\n    overflow: hidden;\n}\n.image-box {\n    width: 38px;\n    height: 38px;\n    display: block;\n    float: right;\n    margin: 5px;\n    border: 1px solid #ccc;\n}\n.image-box img {\n    width: 38px;\n    height: 38px;\n}\n.slide-bar {\n    padding: 0 16px;\n    height: 34px;\n    line-height: 34px;\n}\n.slide-label {\n    font-size: 12px;\n    color: #999;\n    display: block;\n    float: left;\n    margin-right: 16px;\n    width: 42px;\n}\n.slide {\n    display: block;\n    float: left;\n    width: 170px;\n}\n\n/*光照交互进度条*/\n#progress-bar {\n    position: fixed;\n    top: 100px;\n    left: 50px;\n    width: 100px;\n}\n#embroidery-editor {\n    position: absolute;\n    bottom: 18px;\n    width: 400px;\n    height: 36px;\n    margin: 0 auto;\n    left: 0;\n    right: 260px;\n    background: #fff;\n    padding: 16px;\n}\n#embroidery-editor .el-slider {\n    width: 300px;\n}\n.list-title {\n    text-align: center;\n    line-height: 50px;\n    color: #666;\n}\n/* 场景调试器 */\n.box-card {\n    width: 280px;\n    padding:0;\n}\n.card-list{\n    margin: 0;\n    list-style: none;\n    padding: 0;\n}\n.card-list li{\n    height: 50px;\n}\n.card-list li>span{\n    width: 30%;\n    margin: 8px 0;\n    display: inline-block;\n}\n.card-list li>div{\n    width: 65%;\n    float: right;\n}\n/*场景调试器样式结束*/\n.card-item-margin{\n    margin: 8px 6px 8px 0;\n}\n.settings-widget {\n    width: 280px;\n    border-bottom: 1px solid rgba(0, 0, 0, .25);\n    border-top: 1px solid #fff;\n}\n.settings-widget tr {\n    line-height: 25px;\n}\n#save-btn {\n    width: 100%;\n    margin-top: 38px;\n    line-height: 34px;\n    border-radius: 4px;\n    background: #f53;\n    text-align: center;\n    cursor: pointer;\n    color: #fff;\n    -webkit-transition: background .3s;\n    -o-transition: background .3s;\n    transition: background .3s;\n}\n.bottom-btn-box-right {\n    width: 228px;\n    position: fixed;\n    right: 0;\n    overflow: hidden;\n    background: #F5F5F5;\n    border-top: 1px solid #ccc;\n    height: 100px;\n    bottom: 0;\n    z-index: 2000;\n    padding: 0 16px;\n    margin-top: 8px;\n    line-height: 22px;\n}\n.bottom-btn {\n    width: 100%;\n    margin-top: 8px;\n    line-height: 34px;\n    border-radius: 4px;\n    background: #373D41;\n    text-align: center;\n    cursor: pointer;\n    color: #fff;\n    -webkit-transition: background .3s;\n    -o-transition: background .3s;\n    transition: background .3s;\n}\n"],sourceRoot:""}])},790:function(e,t,i){var a=i(75)(i(695),i(854),null,null,null);e.exports=a.exports},791:function(e,t,i){var a=i(75)(i(696),i(817),null,null,null);e.exports=a.exports},792:function(e,t,i){function a(e){i(877)}var n=i(75)(i(697),i(829),a,null,null);e.exports=n.exports},793:function(e,t,i){var a=i(75)(i(698),i(836),null,null,null);e.exports=a.exports},794:function(e,t,i){function a(e){i(869)}var n=i(75)(i(699),i(818),a,null,null);e.exports=n.exports},795:function(e,t,i){var a=i(75)(i(700),i(865),null,null,null);e.exports=a.exports},796:function(e,t,i){function a(e){i(866)}var n=i(75)(i(701),i(814),a,null,null);e.exports=n.exports},814:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"新增面料",visible:e.show,"custom-class":"material-dialog"},on:{"update:visible":function(t){e.show=t}}},[i("div",{staticStyle:{width:"600px",overflow:"hidden"}},[i("ul",{staticClass:"material-left-menu"},e._l(e.$store.state.category.list,function(t,a){return i("li",{class:{active:a===e.selectedIndex},on:{click:function(t){e.change(a)}}},[e._v("\n                "+e._s(t.name)+"\n            ")])})),i("ul",{staticClass:"material-right"},e._l(e.data[e.selectedIndex],function(t,a){return i("li",{class:{active:t.active},on:{click:function(t){e.select(a)}}},[i("img",{attrs:{src:e.getImagePath("/min/"+t.image)}}),i("div",[e._v(e._s(t.name))])])}))]),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.postMaterial}},[e._v("确 定")])],1)])},staticRenderFns:[]}},817:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.edit?"修改子组件":"新增子组件",visible:e.show},on:{"update:visible":function(t){e.show=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"名称"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"热力系数",prop:"hotLevel"}},[i("el-select",{attrs:{placeholder:"选择热力系数"},model:{value:e.form.hotLevel,callback:function(t){e.form.hotLevel=t},expression:"form.hotLevel"}},[i("el-option",{key:0,attrs:{label:"无热力",value:0}}),i("el-option",{key:1,attrs:{label:"等级1",value:1}}),i("el-option",{key:2,attrs:{label:"等级2",value:2}}),i("el-option",{key:3,attrs:{label:"等级3",value:3}})],1)],1),i("el-form-item",{attrs:{label:"模型",prop:"model"}},[i("div",[i("br"),i("model-upload",{attrs:{value:e.form.model},on:{preview:e.previewChange},model:{value:e.form.model,callback:function(t){e.form.model=t},expression:"form.model"}})],1)])],1),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.postComponent}},[e._v("确 定")])],1)],1)},staticRenderFns:[]}},818:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"添加住户",visible:e.show,"custom-class":"household-dialog"},on:{"update:visible":function(t){e.show=t}}},[i("div",{staticStyle:{width:"600px",overflow:"hidden"}},[i("ul",{staticClass:"household-left-menu"},e._l(e.list,function(t,a){return i("li",{class:{active:a===e.selectedIndex},on:{click:function(t){e.change(a)}}},[e._v("\n                "+e._s(t.buildNumber)+"栋\n            ")])})),i("ul",{staticClass:"household-right"},e._l(e.data[e.selectedIndex],function(t,a){return i("li",{class:{active:t.active},on:{click:function(t){e.select(a)}}},[i("div",[e._v(e._s(t.number))])])}))]),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.posthousehold}},[e._v("确 定")])],1)])},staticRenderFns:[]}},829:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"添加住户",visible:e.show,"custom-class":"material-dialog"},on:{"update:visible":function(t){e.show=t}}},[i("div",{staticStyle:{width:"600px",overflow:"hidden"}},[i("ul",{staticClass:"material-left-menu"},e._l(e.list,function(t,a){return i("li",{class:{active:a===e.selectedIndex},on:{click:function(t){e.change(a)}}},[e._v("\n                "+e._s(t.buildNumber)+"栋\n            ")])})),i("ul",{staticClass:"material-right"},e._l(e.data[e.selectedIndex],function(t,a){return i("li",{class:{active:t.active},on:{click:function(t){e.select(a)}}},[i("div",[e._v(e._s(t.number))])])}))]),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.postMaterial}},[e._v("确 定")])],1)])},staticRenderFns:[]}},836:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.edit?"修改组件":"新增组件",visible:e.show},on:{"update:visible":function(t){e.show=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"组件名称",prop:"name"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"部件编号",prop:"number"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.number,callback:function(t){e.form.number=t},expression:"form.number"}})],1),i("el-form-item",{attrs:{label:"热力系数",prop:"hotLevel"}},[i("el-select",{attrs:{placeholder:"选择热力系数"},model:{value:e.form.hotLevel,callback:function(t){e.form.hotLevel=t},expression:"form.hotLevel"}},[i("el-option",{key:0,attrs:{label:"无热力",value:0}}),i("el-option",{key:1,attrs:{label:"等级1",value:1}}),i("el-option",{key:2,attrs:{label:"等级2",value:2}}),i("el-option",{key:3,attrs:{label:"等级3",value:3}})],1)],1),i("el-form-item",{attrs:{label:"坐标",prop:"position"}},[i("el-input",{attrs:{size:"medium",placeholder:"请输入x坐标","auto-complete":"off"},model:{value:e.form.position.x,callback:function(t){e.form.position.x=t},expression:"form.position.x"}}),i("el-input",{attrs:{size:"medium",placeholder:"请输入y坐标","auto-complete":"off"},model:{value:e.form.position.y,callback:function(t){e.form.position.y=t},expression:"form.position.y"}}),i("el-input",{attrs:{size:"medium",placeholder:"请输入z坐标","auto-complete":"off"},model:{value:e.form.position.z,callback:function(t){e.form.position.z=t},expression:"form.position.z"}})],1),i("el-form-item",{attrs:{label:"模型",prop:"model"}},[i("div",[i("br"),i("model-upload",{attrs:{value:e.form.model},on:{preview:e.previewChange},model:{value:e.form.model,callback:function(t){e.form.model=t},expression:"form.model"}})],1)])],1),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.postComponent}},[e._v("确 定")])],1)],1)},staticRenderFns:[]}},853:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{attrs:{id:"editor"}}),i("div",{attrs:{id:"scene-setting"}},[i("div",[i("div",[i("div",{staticClass:"tab"},[i("div",{staticClass:"tab-item",class:{active:0===e.selectedSceneTab},on:{click:function(t){e.selectedSceneTab=0}}},[e._v("部件\n                    ")]),i("div",{staticClass:"tab-item",class:{active:1===e.selectedSceneTab},on:{click:function(t){e.selectedSceneTab=1}}},[e._v("\n                        面料\n                    ")]),i("div",{staticClass:"tab-item",class:{active:2===e.selectedSceneTab},on:{click:function(t){e.selectedSceneTab=2}}},[e._v("\n                        固定场景\n                    ")]),i("div",{staticClass:"tab-item",class:{active:3===e.selectedSceneTab},on:{click:function(t){e.selectedSceneTab=3}}},[e._v("\n                        住户\n                    ")])]),0===e.selectedSceneTab?i("div",[i("ul",{staticClass:"component-list"},e._l(e.buildingList,function(t,a){return i("li",{staticClass:"component-item",class:{active:e.selectedPart===a},on:{click:function(t){if(t.target!==t.currentTarget)return null;e.selectBuilding(a)}}},[e._v("\n                            "+e._s(t.name)+"\n                            "),i("el-dropdown",{staticStyle:{float:"right"},attrs:{trigger:"click"},on:{command:e.handleRightMenu}},[i("span",{staticClass:"icon el-dropdown-link",on:{click:function(t){e.cacheIndex(a)}}},[e._v("")]),i("el-dropdown-menu",{slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"editHref"}},[e._v("添加链接")]),i("el-dropdown-item",{attrs:{command:"editBrief"}},[e._v("添加信息")]),i("el-dropdown-item",{attrs:{command:"editComponent"}},[e._v("修改")]),i("el-dropdown-item",{attrs:{command:"removeComponent"}},[e._v("删除")])],1)],1),i("span",{staticClass:"image-box"},[t.image?i("img",{attrs:{src:e.getImagePath("/min/"+t.image)}}):e._e()]),i("span",{staticClass:"image-box"},[t.preview?i("img",{attrs:{src:e.getImagePath(t.preview)}}):e._e()])],1)})),i("div",{staticClass:"tool-bar"},[i("i",{staticClass:"icon",attrs:{title:"添加组件"},on:{click:function(t){e.addComponent()}}},[e._v("")])])]):e._e(),1===e.selectedSceneTab?i("div",[i("ul",{staticClass:"component-list"},e._l(e.fabricList,function(t,a){return i("li",{staticClass:"component-item",class:{active:e.selectedMaterial===a},on:{click:function(t){if(t.target!==t.currentTarget)return null;e.selectMaterial(a)}}},[e._v("\n                            "+e._s(t.name)+"\n                            "),i("el-dropdown",{staticStyle:{float:"right"},attrs:{trigger:"click"},on:{command:e.handleRightMenu}},[i("span",{staticClass:"icon el-dropdown-link",on:{click:function(t){e.dropdownFabricIndex=a}}},[e._v("")]),i("el-dropdown-menu",{slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"openFabricController"}},[e._v("修改")]),i("el-dropdown-item",{attrs:{command:"removeFabric"}},[e._v("删除")])],1)],1),i("span",{staticClass:"image-box"},[t.image?i("img",{attrs:{src:e.getImagePath("/min/"+t.image)}}):e._e()])],1)})),i("div",{staticClass:"slide-bar"},[i("span",{staticClass:"slide-label"},[e._v("Repeat")]),i("span",{staticClass:"slide"},[i("el-slider",{attrs:{min:1,max:30,step:.1},on:{change:e.changeFabricRepeat},model:{value:e.fabricRepeat,callback:function(t){e.fabricRepeat=t},expression:"fabricRepeat"}})],1)]),i("div",{staticClass:"tool-bar"},[i("i",{staticClass:"icon",attrs:{title:"添加面料"},on:{click:function(t){e.addMaterial()}}},[e._v("")])])]):e._e(),2===e.selectedSceneTab?i("div",[e.model?i("div",{staticClass:"list-title"},[e._v(e._s(e.model.name))]):e._e(),e.model?i("ul",{staticClass:"list"},e._l(e.model.child,function(t,a){return i("li",{staticClass:"list-item"},[e._v("\n                            "+e._s(t.name)+"\n                            "),i("span",{staticClass:"image-box",staticStyle:{width:"26px",height:"26px"}},[t.preview?i("img",{staticStyle:{width:"26px",height:"26px"},attrs:{src:e.getImagePath(t.preview)}}):e._e()])])})):e._e(),i("div",{staticClass:"tool-bar"},[i("i",{staticClass:"icon",attrs:{title:"绑定模特"},on:{click:function(t){e.bindModel()}}},[e._v("")])])]):e._e(),3===e.selectedSceneTab?i("div",[i("ul",{staticClass:"component-list"},e._l(e.householdList,function(t,a){return i("li",{staticClass:"component-item",class:{active:e.selectedMaterial===a}},[e._v("\n                            房间号 "+e._s(t.number)+"\n                            "),i("el-dropdown",{staticStyle:{float:"right"},attrs:{trigger:"click"},on:{command:e.handleRightMenu}},[i("span",{staticClass:"icon el-dropdown-link",on:{click:function(t){e.dropdownHouseholdIndex=a}}},[e._v("")]),i("el-dropdown-menu",{slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"deleteHousehold"}},[e._v("删除")])],1)],1)],1)})),i("div",{staticClass:"tool-bar"},[i("i",{staticClass:"icon",attrs:{title:"添加住户"},on:{click:function(t){e.addHousehold()}}},[e._v("")])])]):e._e()]),-1!=e.selectedPart&&0===e.selectedSceneTab?i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.selectedSceneTab,expression:"selectedSceneTab === 0"}]},[i("div",{staticClass:"tab"},[i("div",{staticClass:"tab-item",class:{active:0===e.selectedChild},on:{click:function(t){e.selectedChild=0}}},[e._v("子组件")]),i("div",{staticClass:"tab-item",class:{active:1===e.selectedChild},on:{click:function(t){e.selectedChild=1}}},[e._v("住户信息")])]),0===e.selectedChild?i("div",[i("ul",{staticClass:"component-list"},e._l(e.childBuildingList,function(t,a){return i("li",{staticClass:"component-item",on:{click:function(t){if(t.target!==t.currentTarget)return null;e.selectChildBuilding(a)}}},[e._v("\n                                "+e._s(t.name)+"\n                                "),i("el-dropdown",{staticStyle:{float:"right"},attrs:{trigger:"click"},on:{command:e.handleRightMenu}},[i("span",{staticClass:"icon el-dropdown-link",on:{click:function(t){e.cacheChildIndex(a)}}},[e._v("")]),i("el-dropdown-menu",{slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"editChildHref"}},[e._v("添加链接")]),i("el-dropdown-item",{attrs:{command:"editChildBrief"}},[e._v("添加信息")]),i("el-dropdown-item",{attrs:{command:"editChildComponent"}},[e._v("修改")]),i("el-dropdown-item",{attrs:{command:"removeChildComponent"}},[e._v("删除")])],1)],1),i("span",{staticClass:"image-box"},[t.preview?i("img",{attrs:{src:e.getImagePath(t.preview)}}):e._e()]),i("span",{staticClass:"image-box",on:{click:function(i){e.addChildMaterial(t.id)}}},[t.fabric?i("img",{attrs:{src:e.getImagePath(t.fabric.image)}}):e._e()])],1)})),i("div",{staticClass:"slide-bar"},[i("span",{staticClass:"slide-label"},[e._v("Repeat")]),i("span",{staticClass:"slide"},[i("el-slider",{attrs:{min:1,max:30,step:.1},on:{change:e.changeChildFabricRepeat},model:{value:e.childFabricRepeat,callback:function(t){e.childFabricRepeat=t},expression:"childFabricRepeat"}})],1)]),i("div",{staticClass:"tool-bar"},[i("i",{staticClass:"icon",attrs:{title:"添加子组件"},on:{click:function(t){e.addChildComponent()}}},[e._v("")])])]):e._e(),1===e.selectedChild?i("div",[i("ul",{staticClass:"component-list"},e._l(e.householdList,function(t,a){return i("li",{staticClass:"component-item",class:{active:e.selectedMaterial===a}},[e._v("\n                                房间号 "+e._s(t.number)+"\n                                "),i("el-dropdown",{staticStyle:{float:"right"},attrs:{trigger:"click"},on:{command:e.handleRightMenu}},[i("span",{staticClass:"icon el-dropdown-link",on:{click:function(t){e.dropdownHouseholdIndex=a}}},[e._v("")]),i("el-dropdown-menu",{slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"deleteHousehold"}},[e._v("删除")])],1)],1)],1)})),i("div",{staticClass:"tool-bar"},[i("i",{staticClass:"icon",attrs:{title:"添加住户"},on:{click:function(t){e.addChildHousehold()}}},[e._v("")])])]):e._e()])]):e._e()])]),i("el-card",{staticClass:"box-card",staticStyle:{width:"310px",height:"100%",position:"absolute",top:"0px",left:"-315px"},attrs:{id:"rightSlideSidebar"}},[i("div",{staticClass:"clearfix",slot:"header"},[i("span",{staticStyle:{"line-height":"36px"}},[e._v("面料调整")]),i("i",{staticClass:"el-icon-close",staticStyle:{float:"right",margin:"8px 0 0 0"},on:{click:function(t){e.closeFabricController()}}})]),i("div",{staticClass:"text item"},[i("div",[i("div",[i("table",{staticClass:"settings-widget"},[i("tbody",[i("tr",[i("td",[e._v("Color")]),i("td",[i("el-color-picker",{attrs:{"color-format":"hex"},model:{value:e.form.color,callback:function(t){e.form.color=t},expression:"form.color"}})],1)]),i("tr",[i("td",[e._v("Emissive")]),i("td",[i("el-color-picker",{attrs:{"color-format":"hex"},model:{value:e.form.emissive,callback:function(t){e.form.emissive=t},expression:"form.emissive"}})],1)]),i("tr",[i("td",[e._v("Specular")]),i("td",[i("el-color-picker",{attrs:{"color-format":"hex"},model:{value:e.form.specular,callback:function(t){e.form.specular=t},expression:"form.specular"}})],1)])])]),i("table",{staticClass:"settings-widget"},[i("tbody",[i("tr",[i("td",[e._v("Transparent")]),i("td",[i("el-switch",{model:{value:e.form.transparent,callback:function(t){e.form.transparent=t},expression:"form.transparent"}})],1)]),i("tr",[i("td",[e._v("Opacity")]),i("td",[i("el-slider",{staticStyle:{width:"120px"},attrs:{min:0,max:1,step:.01,id:"opacityInfo"},model:{value:e.form.opacity,callback:function(t){e.form.opacity=t},expression:"form.opacity"}})],1)]),i("tr",[i("td",[e._v("refractionRatio")]),i("td",[i("el-slider",{staticStyle:{width:"120px"},attrs:{min:.01,max:1,step:.01},model:{value:e.form.refractionRatio,callback:function(t){e.form.refractionRatio=t},expression:"form.refractionRatio"}})],1)]),i("tr",[i("td",[e._v("Reflectivity")]),i("td",[i("el-slider",{staticStyle:{width:"120px"},attrs:{min:.01,max:1,step:.01},model:{value:e.form.reflectivity,callback:function(t){e.form.reflectivity=t},expression:"form.reflectivity"}})],1)]),i("tr",[i("td",[e._v("aoMapIntensity")]),i("td",[i("el-slider",{staticStyle:{width:"120px"},attrs:{min:.01,max:3,step:.01},model:{value:e.form.aoMapIntensity,callback:function(t){e.form.aoMapIntensity=t},expression:"form.aoMapIntensity"}})],1)]),i("tr",[i("td",[e._v("metalness")]),i("td",[i("el-slider",{staticStyle:{width:"120px"},attrs:{min:.01,max:1,step:.01},model:{value:e.form.metalness,callback:function(t){e.form.metalness=t},expression:"form.metalness"}})],1)]),i("tr",[i("td",[e._v("roughness")]),i("td",[i("el-slider",{staticStyle:{width:"120px"},attrs:{min:.01,max:1,step:.01},model:{value:e.form.roughness,callback:function(t){e.form.roughness=t},expression:"form.roughness"}})],1)]),i("tr",[i("td",[e._v("clearCoat")]),i("td",[i("el-slider",{attrs:{min:0,max:1,step:.01},model:{value:e.form.clearCoat,callback:function(t){e.form.clearCoat=t},expression:"form.clearCoat"}})],1)]),i("tr",[i("td",[e._v("clearCoatRoughness")]),i("td",[i("el-slider",{attrs:{min:0,max:1,step:.01},model:{value:e.form.clearCoatRoughness,callback:function(t){e.form.clearCoatRoughness=t},expression:"form.clearCoatRoughness"}})],1)])])])]),i("div",{attrs:{id:"save"}},[i("div",{attrs:{id:"save-btn"},on:{click:e.saveConfig}},[e._v("\n                        保存更改\n                    ")])])])])]),i("el-card",{staticClass:"box-card",staticStyle:{position:"absolute",top:"0",right:"311px"}},[i("ul",{staticClass:"card-list"},[i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("阴影")]),i("el-switch",{attrs:{"on-text":"开","off-text":"关"},on:{change:e.changeShadow},model:{value:e.shadowSwitch,callback:function(t){e.shadowSwitch=t},expression:"shadowSwitch"}})],1),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("开启环境")]),i("el-switch",{attrs:{"on-text":"开","off-text":"关"},on:{change:e.changeEnvMaps},model:{value:e.bg.isEnv,callback:function(t){e.bg.isEnv=t},expression:"bg.isEnv"}})],1),i("li",{directives:[{name:"show",rawName:"v-show",value:e.bg.isEnv,expression:"bg.isEnv"}]},[i("span",{staticClass:"demonstration card-item-margin",staticStyle:{display:"inline-block"}},[e._v("环境贴图")]),[i("el-select",{attrs:{placeholder:"默认"},on:{change:e.changeEnvMaps},model:{value:e.bg.envController,callback:function(t){e.bg.envController=t},expression:"bg.envController"}},e._l(e.envMaps,function(e){return i("el-option",{key:e.envController,attrs:{label:e.label,value:e.envController}})}))]],2),i("li",{directives:[{name:"show",rawName:"v-show",value:e.bg.isEnv,expression:"bg.isEnv"}]},[i("span",{staticClass:"demonstration card-item-margin"},[e._v("环境强度")]),i("el-slider",{attrs:{min:0,max:10,step:.01},on:{change:e.changeEnvMaps},model:{value:e.bg.envMapIntensity,callback:function(t){e.bg.envMapIntensity=t},expression:"bg.envMapIntensity"}})],1),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("背景")]),[i("el-select",{attrs:{placeholder:"默认"},on:{change:e.changeBackground},model:{value:e.bg.bgController,callback:function(t){e.bg.bgController=t},expression:"bg.bgController"}},e._l(e.options,function(e){return i("el-option",{key:e.bgController,attrs:{label:e.label,value:e.bgController,disabled:e.disabled}})}))]],2),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("聚光灯")]),i("el-slider",{attrs:{min:0,max:30,step:.01},on:{change:e.changeClothesLight},model:{value:e.clothesLight.spot,callback:function(t){e.clothesLight.spot=t},expression:"clothesLight.spot"}})],1),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("环境灯")]),i("el-slider",{attrs:{min:0,max:2,step:.01},on:{change:e.changeClothesLight},model:{value:e.clothesLight.hemisphere,callback:function(t){e.clothesLight.hemisphere=t},expression:"clothesLight.hemisphere"}})],1),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("后背灯")]),i("el-slider",{attrs:{min:0,max:10,step:.01},on:{change:e.changeClothesLight},model:{value:e.clothesLight.point,callback:function(t){e.clothesLight.point=t},expression:"clothesLight.point"}})],1),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("曝光")]),i("el-slider",{attrs:{min:0,max:10,step:.01},on:{change:e.changeExposure},model:{value:e.exposure,callback:function(t){e.exposure=t},expression:"exposure"}})],1),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("环境光")]),i("el-slider",{attrs:{min:0,max:2,step:.01},on:{change:e.changeClothesLight},model:{value:e.clothesLight.ambient,callback:function(t){e.clothesLight.ambient=t},expression:"clothesLight.ambient"}})],1),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("头顶灯")]),i("el-slider",{attrs:{min:0,max:10,step:.01},on:{change:e.changeClothesLight},model:{value:e.clothesLight.spotLight1,callback:function(t){e.clothesLight.spotLight1=t},expression:"clothesLight.spotLight1"}})],1),i("li",[i("span",{staticClass:"demonstration card-item-margin"},[e._v("阴影设置")]),i("el-slider",{attrs:{min:-.0028,max:.0028,step:-2e-6},on:{change:e.changeLightBias},model:{value:e.LightBias,callback:function(t){e.LightBias=t},expression:"LightBias"}})],1)])]),i("div",{staticStyle:{margin:"20px 0",position:"fixed",top:"90%",right:"380px"},on:{click:e.saveCamera}},[i("el-button",{attrs:{type:"primary",plain:""}},[e._v("保存视角")])],1),i("div",{style:{top:e.positiony-110+"px",left:e.positionx-30+"px"},attrs:{id:"bqy"}},[e._v("\n        "+e._s(e.tag)+"\n    ")]),i("child-component-dialog",{ref:"childComponentDialog"}),i("component-dialog",{ref:"componentDialog"}),i("material-dialog",{ref:"materialDialog"}),i("brief-dialog",{ref:"briefDialog"}),i("mote-select",{ref:"modelSelect"}),i("child-household-dialog",{ref:"childHouseholdDialog"}),i("household-dialog",{ref:"householdDialog"}),i("href-dialog",{ref:"hrefDialog"})],1)},staticRenderFns:[]}},854:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"修改简要信息",visible:e.show},on:{"update:visible":function(t){e.show=t}}},[i("el-form",e._l(e.formList,function(t,a){return i("el-form-item",{key:a},[i("el-input",{attrs:{"auto-complete":"off",autosize:""},model:{value:t.brief,callback:function(e){t.brief=e},expression:"component.brief"}},[i("template",{slot:"prepend"},[e._v(e._s(t.label))])],2)],1)})),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.postComponent}},[e._v("确 定")])],1)],1)},staticRenderFns:[]}},865:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"修改简要信息",visible:e.show},on:{"update:visible":function(t){e.show=t}}},[i("el-form",[i("el-form-item",[i("el-input",{attrs:{"auto-complete":"off",autosize:""},model:{value:e.href,callback:function(t){e.href=t},expression:"href"}},[i("template",{slot:"prepend"},[e._v("链接地址")])],2)],1)],1),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.postComponent}},[e._v("确 定")])],1)],1)},staticRenderFns:[]}},866:function(e,t,i){var a=i(746);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(77)("5b5e6e5a",a,!0)},869:function(e,t,i){var a=i(749);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(77)("4cf9502a",a,!0)},877:function(e,t,i){var a=i(757);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(77)("72d7ba90",a,!0)},890:function(e,t,i){var a=i(770);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(77)("19717666",a,!0)}});