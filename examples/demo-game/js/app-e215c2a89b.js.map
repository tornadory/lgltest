{"version":3,"sources":["/source/index.config.js"],"names":["angular","module","call","this","directive","WebGLDetectorController","$scope","Detector","supportsWebGL","webgl","restrict","templateUrl","controller","controllerAs","replace","transclude","VersionInfoController","scope","info","filter","$sce","$sanitize","input","staggerWords","delay","stagger","arr","i","j","len","ret","totalDelay","word","split","length","indexOf","join","trustAsHtml","factory","WavingShader","uniforms","map","type","value","offsetRepeat","THREE","Vector4","fresnelIntensity","fresnelColor","Color","fresnelPow","wavingFactor","wavingAmplitude","wavingMax","wavingMin","vertexShader","fragmentShader","words","inputWords","isNaN","slice","$parse","$timeout","TweenMax","ScrollController","selectedChapter","pauseChapterDetection","headerHeight","hasScrolled","gotoTop","_this","to","element","scrollTop","gotoParagraph","index","h","trueScrollHeight","v","scrollHeight","clientHeight","product","locale","paragraphs","cancel","cancelPause","onComplete","onScroll","_","throttle","event","scrollFactor","trueScrollTop","Math","round","max","min","$apply","link","attrs","PreloadLogoController","removeOnDestroyListener","$on","init","opacity","scale","parentNode","removeChild","$watch","defer","ParticleShader","time","color","size","$element","$attrs","onDestroy","onTouchStart","$event","method","attr","eval","bind","unbind","onTouchEnd","onTouchMove","preventDefault","fn","ngScroll","data","me","apply","arguments","ElasticVector2","update","x","y","prototype","speed","delta","distx","disty","ElasticNumber","target","dist","$window","elasticNumber","destroyed","elasticRotateX","elasticRotateY","elasticTranslateX","mousePosition","onMouseMove","removeOnDestroy","main","platform","mobile","safari","translateZ","$eval","rotateXAmplitude","rotateYAmplitude","translateXAmplitude","clientX","innerWidth","clientY","innerHeight","css3dSettings","tx","rx","ry","addEventListener","removeEventListener","addSubRoutine","random","z","style","transform","MozTransform","MsTransform","WebkitTransform","AxisHelper","get","dashed","axes","Object3D","add","buildAxis","Vector3","src","dst","colorHex","geom","mat","Geometry","LineDashedMaterial","linewidth","dashSize","gapSize","LineBasicMaterial","vertices","push","clone","computeLineDistances","Line","LineSegments","AutoScrollerController","autoScrolling","killTweensOf","initscroll","ease","Power0","easeNone","scrollTo","onAutoKill","onMouseWheel","Modernizr","md","$state","SiteMenuController","$rootScope","selected","getParticlesColor","pid","ref","config","products","id","particles_color","scrollUp","playSound","scrollDown","onImageHover","onItemClick","dest","params","producturl","url","go","sound","getLabelStyle","diff","abs","cssanimations","top","fontSize","getLabelsTop","multiplier","phone","desktop","blockSmoothScrolling","lastDeltaMagnitude","deltaX","deltaY","deltaMagnitude","removeStateChangeListener","toState","toParams","fromState","fromParams","name","menuOpen","removeDestroyListener","e","ios","$stateParams","ShareVolumeMenuController","language","$log","$q","$interval","$urlRouter","elasticVector2","axisHelper","wavingShader","particleShader","pulseCircleStandalone","Scene3d","onMouseUp","onMouseDown","moveCamera","render","onResize","flapBack","flap","intro","preRenderScene","onLoadFinished","onLoadProgress","findCamera","findObjectByName","zoomIn","rotateToObj","zoomOut","getCameraForURL","getIdleSpherical","gotoIdleState","removeTransitionSubRoutines","onStateChange","initPointsCloud","init3DPins","createPinTexture","init2DPins","onMenuOpen","destroy","onSkyboxLoaded","removeOnInitListener","removeMenuOpenListener","STATE_IDLE","STATE_TRANSITION","STATE_FOCUSING","camera","scene","camerasScene","renderer","clock","composer","state","focusingObject","idleRadius","idleRadiusIntro","idleFOV","minRadius","maxRadius","cameraRadius","sceneMouseRotation","mouseWheelSensitivity","pinSize","loadingSceneY","finalSceneY","skyboxLoaded","introDone","idleCameraZoomSpeed","idleCameraMovementSpeed","zoomOutCameraZoomSpeed","zoomOutCameraMovementSpeed","rotateCameraZoomSpeed","rotateCameraMovementSpeed","zoomInCameraZoomSpeed","zoomInCameraMovementSpeed","isMouseDown","Vector2","mousePickingPosition","mouseDownPosition","phiThetaDownPosition","phiTheta","initialPhiTheta","cameraLookAt","mouseSensitivity","gui","raycaster","pinOpacity","pinMaterial","postponeFirstDrag","tempVec3_1","tempVec3_2","tempVec2_1","tempVec2_2","idleCameraName","productsToCameras","stupore","vermentino","rosato","cabernet-sauvignon","podere-277-syrah","campo-alle-comete-bolgheri-superiore","productsToPins","flappingStuff","parent","sx","dx","axis","extension","floatingStuff","wavingStuff","doubleFacedObjects","format","path","urls","removeLoadingListener","Raycaster","PI","ref1","rotation","PerspectiveCamera","set","Scene","position","updateMatrix","updateMatrixWorld","WebGLRenderer","antialias","alpha","canvas","sortObjects","Clock","setClearColor","setPixelRatio","devicePixelRatio","setSize","EffectComposer","renderPass","RenderPass","addPass","colorCorrection","ShaderPass","ColorCorrectionShader","powRGB","brightnessContrast","BrightnessContrastShader","fxaa","FXAAShader","renderToScreen","Cache","enabled","reflectionCube","CubeTextureLoader","load","RGBFormat","background","width","height","loader","ObjectLoader","console","log","dispose","traverse","object","ref2","ref3","ref4","ref5","ref6","ref7","ref8","ref9","material","program","geometry","firstDragged","sceneUpdateDeactivateTimeout","sceneUpdate","setupDebugGUI","dat","GUI","step","addFolder","onChange","fov","updateProjectionMatrix","deltaTime","locator","pinName","pos","prod","getWorldPosition","getScreenPos","visible","uiPins","checkPinVisibility","marker","L","cameraToMarker","cameraToScene","geometryRadius","sub","sqrt","pow","pin","sprite1","Texture","domElement","generateMipmaps","minFilter","LinearFilter","magFilter","needsUpdate","plane","texture","PlaneBufferGeometry","SpriteMaterial","transparent","depthTest","depthWrite","Sprite","elasticScale","productid","parentPosition","beforeOverPin","intersections","loc","p","threeDeePin","overPins","worldToLocal","copy","intersectObject","distance","sort","a","b","overPin","over","mx","my","vector","w","project","numParticles","orbitSizes","orbitSpeeds","particles","posIndex","positions","pulseSpeeds","textureLoader","TextureLoader","BufferGeometry","Float32Array","addAttribute","BufferAttribute","ShaderMaterial","UniformsUtils","blending","AdditiveBlending","Points","children","pop","unshift","cam","loading","gotoFocusingState","then","removeSubRoutine","idleSpherical","resolve","phi","theta","Power2","easeInOut","onUpdate","promise","getSphericalCoordinates","productURL","obj","objectName","pId","find","sp","lookat","radius","getWorldDirection","multiplyScalar","getCartesianCoordinates","sin","cos","ang","cp1","r","ta","threesixty","atan2","acos","floor","shortestAngle","targetA","sourceA","absmod","result","cameras","request","progressNormal","loaded","total","loadingProgress","scaleNegative","wMax","wMin","Mesh","lightMap","side","BackSide","DoubleSide","computeBoundingBox","boundingBox","wave","setupFlappingStuff","setupFloatingStuff","development","startFOV","startLookAt","startPosition","current","waveBack","floated","unfloated","floatBack","flapped","unflapped","flappingAxis","duration","aspect","resolution","setFromCamera","lookAt","clamp","distanceTo","number","originalEvent","touches","hasParentClass","className","parentElement","Scene3dController","threeJsScene","Scene2dController","fallback_position","canvasHeight","canvasWidth","invAspect","len1","waspect","xOffset","yOffset","PulseCircle","circle","numCircles","tweenLoop","document","createElement","colors","ctx","getContext","circles","Power4","easeOut","colorProps","center","sizeScaled","clearRect","fillStyle","beginPath","arc","fill","closePath","PulseCircleController","active","PulseCircleCssController","ProductCircleController","open","close","isOpen","isClose","PinLabelController","label","Pin2DController","zoomX","zoomY","pinSpeed","labelopened","loadingImageURL","loading_image","loadingInfo","loading_info","soundID","onMouseOver","onMouseOut","getLink","updateInfo","updateStyle","alwaysVisible","applyTransform","left","removeListener5","removeListener6","wasvisible","thisProduct","thisURL","horizontalPosition","transitionLength","focus_position","isVisible","PageParticlesController","initialScale","concentricsParticles","cameraX","cameraAmplitude","particleProgram","context","concentrics","particle","originX","angle","orbit","originY","orientationY","setBackgroundColor","setParticlesColor","removeBackgroundColorListener","removeColorListener","k","CanvasRenderer","container","SpriteCanvasMaterial","backgroundColor","LoadingIndicatorController","cancelCheck","totalSteps","internalStep","loadingStep","stepTime","Date","getTime","minSecondsPerStep","loadingStarted","now","checkViewVisibility","LanguageSelectorController","currentState","HamburgerMenuController","button_label","menu","clicked","toggleOpen","FooterController","$document","onElementClick","toggleFooter","isFooter","closeFooter","DragToDiscoverController","$location","encodeURIComponent","protocol","host","twitterText","share_page","twitter_text","getFBLink","getTWLink","getGLink","openWindow","provider","userLanguage","$get","$http","$cookies","code","cookiesLanguage","requestedLanguage","locales","default","response","error","page_style","background-color","page_color","FULLTILT","hidden","visibilityChange","showSubPage","viewVisible","orientationX","site_title","site_description","site_keywords","site_share_image","version","date","moment","fromNow","ci_build","ci_commit","ci_author","ci_branch","tablet","edge","test","navigator","userAgent","is","osx","toUpperCase","os","muted","subRoutines","subRoutinesNames","lastTime","sounds","onAllSoundsLoaded","numLoops","volume","stop","createjs","Sound","play","defaultVolume","on","onSoundfinished","alternateExtensions","registerSound","stats","Stats","body","appendChild","dom","func","splice","rm","subRoutine","toremove","getDeviceOrientation","deviceOrientation","euler","getScreenAdjustedEuler","beta","gamma","message","requestAnimationFrame","msHidden","webkitHidden","handleVisibilityChange","images","currentimage","currentimageW","imageW","imageH","animated","scrolling","mouseX","posX","containerstyle","holdTimeout","offsetX","px","stopPropagation","previousImage","nextImage","evdeltaY","shortdelay","imageClick","getItemPosition","getSize","elscale","isFirefox","isSafari","latestPost","num","opac","pevent","reducedh","reducedw","match","toLowerCase","pointerEvents","slideshowImageWidth","bounds","chapter","chapters","getElementsByClassName","getBoundingClientRect","getImageStyle","imageIndex","run","addTest","android","ipad","iphone","wphone","mobilegradea","mobileGrade","firefox","ie","audio","site_url","absUrl","$stateProvider","$urlRouterProvider","otherwise","constant","MobileDetect","TweenLite","$logProvider","$locationProvider","$animateProvider","$cookiesProvider","languageProvider","configProvider","userLang","debugEnabled","hashPrefix","html5Mode","classNameFilter","$templateCache","put"],"mappings":"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","file":"scripts/app-e215c2a89b.js","sourcesContent":["(function() {\n  angular.module('aquestCampoLeComete', ['ngAnimate', 'ngCookies', 'ngTouch', 'ngResize', 'ngSanitize', 'monospaced.mousewheel', 'ui.router', 'angulartics.google.analytics', 'swipe']);\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('webglDetector', function() {\n    'ngInject';\n    var WebGLDetectorController, directive;\n    WebGLDetectorController = function($scope, Detector) {\n      'ngInject';\n      this.supportsWebGL = Detector.webgl;\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/webgl-detector/webgl-detector.html',\n      controller: WebGLDetectorController,\n      controllerAs: \"webgldetector\",\n      replace: true,\n      transclude: true\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('versionInfo', function() {\n    'ngInject';\n    var VersionInfoController, directive;\n    VersionInfoController = function($scope) {\n      'ngInject';\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/version-info/version-info.html',\n      controller: VersionInfoController,\n      controllerAs: \"versioninfo\",\n      scope: {\n        info: \"=\"\n      },\n      replace: true\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').filter('wordseparation', function($sce, $sanitize) {\n    'ngInject';\n    return function(input, staggerWords, delay, stagger) {\n      var arr, i, j, len, ret, totalDelay, word;\n      if (delay == null) {\n        delay = 0;\n      }\n      if (stagger == null) {\n        stagger = .1;\n      }\n      input = $sanitize(input);\n      arr = input.split(\" \");\n      ret = \"\";\n      for (i = j = 0, len = arr.length; j < len; i = ++j) {\n        word = arr[i];\n        ret += \"<span class=\\\"\";\n        if (word.indexOf(\"[w]\") !== -1) {\n          word = word.split(\"[w]\").join(\"\");\n          ret += \"white\";\n        }\n        if (staggerWords) {\n          totalDelay = delay + (i * stagger);\n          ret += \" word\\\" style=\\\"transition-delay: \" + totalDelay + \"s; animation-delay: \" + totalDelay + \"s;\\\">\" + word + \" </span>\";\n        } else {\n          ret += \" word\\\" >\" + word + \" </span>\";\n        }\n      }\n      return $sce.trustAsHtml(ret);\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').factory('wavingShader', function() {\n    'ngInject';\n    var WavingShader;\n    return WavingShader = (function() {\n      function WavingShader() {}\n\n      WavingShader.uniforms = {\n        map: {\n          type: \"t\",\n          value: null\n        },\n        offsetRepeat: {\n          type: \"v4\",\n          value: new THREE.Vector4(0, 0, 1, 1)\n        },\n        fresnelIntensity: {\n          type: \"f\",\n          value: 5\n        },\n        fresnelColor: {\n          type: \"c\",\n          value: new THREE.Color(0xffffff)\n        },\n        fresnelPow: {\n          type: \"f\",\n          value: 1\n        },\n        wavingFactor: {\n          type: \"f\",\n          value: 0\n        },\n        wavingAmplitude: {\n          type: \"f\",\n          value: 1\n        },\n        wavingMax: {\n          type: \"f\",\n          value: 1\n        },\n        wavingMin: {\n          type: \"f\",\n          value: 1\n        }\n      };\n\n      WavingShader.vertexShader = \"uniform vec4 offsetRepeat; uniform float fresnelPow; uniform float fresnelIntensity; uniform float wavingFactor; uniform float wavingAmplitude; uniform float wavingMax; uniform float wavingMin; varying vec2 vUv; void main() { vec3 transformed = vec3( position ); float yNormalized = (position.y - wavingMin) / wavingMax; transformed.x = position.x + (yNormalized * (wavingFactor * wavingAmplitude)); vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 ); vUv = uv * offsetRepeat.zw + offsetRepeat.xy; gl_Position = projectionMatrix * mvPosition; }\";\n\n      WavingShader.fragmentShader = \"uniform vec3 fresnelColor; uniform sampler2D map; varying vec2 vUv; void main() { gl_FragColor = texture2D( map, vUv ); }\";\n\n      return WavingShader;\n\n    })();\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').filter('truncate', function() {\n    'ngInject';\n    return function(input, words) {\n      var inputWords;\n      if (isNaN(words)) {\n        return input;\n      }\n      if (words <= 0) {\n        return '';\n      }\n      if (input) {\n        inputWords = input.split(/\\s+/);\n        if (inputWords.length > words) {\n          input = inputWords.slice(0, words).join(' ') + '';\n        }\n      }\n      return input;\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('scrollController', function($parse, $timeout, TweenMax) {\n    'ngInject';\n    var ScrollController, directive;\n    ScrollController = function($scope) {\n      'ngInject';\n      this.selectedChapter = -1;\n      this.pauseChapterDetection = false;\n      this.headerHeight = 360;\n      this.hasScrolled = false;\n      this.gotoTop = (function(_this) {\n        return function() {\n          _this.selectedChapter = -1;\n          TweenMax.to($scope.element[0], .5, {\n            scrollTop: 0\n          });\n        };\n      })(this);\n      this.gotoParagraph = (function(_this) {\n        return function(index) {\n          var h, trueScrollHeight, v;\n          trueScrollHeight = $scope.element[0].scrollHeight - _this.headerHeight;\n          h = trueScrollHeight - $scope.element[0].clientHeight;\n          v = h / $scope.product.locale.paragraphs.length;\n          _this.hasScrolled = true;\n          _this.selectedChapter = index;\n          _this.pauseChapterDetection = true;\n          $timeout.cancel(_this.cancelPause);\n          TweenMax.to($scope.element[0], .5, {\n            scrollTop: _this.headerHeight + (v * index),\n            onComplete: function() {\n              return _this.cancelPause = $timeout(function() {\n                return _this.pauseChapterDetection = false;\n              }, 500);\n            }\n          });\n        };\n      })(this);\n      this.onScroll = _.throttle((function(_this) {\n        return function(event) {\n          var scrollFactor, trueScrollHeight, trueScrollTop;\n          if (_this.pauseChapterDetection) {\n            return;\n          }\n          _this.hasScrolled = $scope.element[0].scrollTop > 50;\n          trueScrollTop = $scope.element[0].scrollTop - _this.headerHeight;\n          trueScrollHeight = $scope.element[0].scrollHeight - _this.headerHeight;\n          scrollFactor = trueScrollTop / (trueScrollHeight - $scope.element[0].clientHeight);\n          _this.selectedChapter = Math.round(($scope.product.locale.paragraphs.length - 1) * scrollFactor);\n          _this.selectedChapter = Math.max(0, Math.min($scope.product.locale.paragraphs.length - 1, _this.selectedChapter));\n          if (!_this.hasScrolled) {\n            _this.selectedChapter = -1;\n          }\n          $timeout(function() {\n            return $scope.$apply();\n          }, 0);\n        };\n      })(this), 500);\n    };\n    return directive = {\n      restrict: 'A',\n      controller: ScrollController,\n      controllerAs: \"scrollcontroller\",\n      link: function(scope, element, attrs) {\n        scope.element = element;\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('preloadLogo', function($parse, $timeout, TweenMax) {\n    'ngInject';\n    var PreloadLogoController, directive;\n    PreloadLogoController = function($scope) {\n      'ngInject';\n      this.removeOnDestroyListener = $scope.$on(\"$destroy\", function() {});\n      this.init = function() {\n        TweenMax.to($scope.element[0], 2, {\n          opacity: 0,\n          scale: 1.4,\n          onComplete: function() {\n            return $scope.element[0].parentNode.removeChild($scope.element[0]);\n          }\n        });\n      };\n      $scope.$watch(\"element\", (function(_this) {\n        return function() {\n          _.defer(_this.init);\n        };\n      })(this));\n    };\n    return directive = {\n      restrict: 'A',\n      controller: PreloadLogoController,\n      controllerAs: \"autoscroller\",\n      link: function(scope, element, attrs) {\n        scope.element = element;\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').factory('particleShader', function() {\n    'ngInject';\n    var ParticleShader;\n    return ParticleShader = (function() {\n      function ParticleShader() {}\n\n      ParticleShader.uniforms = {\n        map: {\n          type: \"t\",\n          value: null\n        },\n        offsetRepeat: {\n          type: \"v4\",\n          value: new THREE.Vector4(0, 0, 1, 1)\n        },\n        time: {\n          type: \"f\",\n          value: 0\n        },\n        color: {\n          type: \"c\",\n          value: new THREE.Color(0xffffff)\n        },\n        size: {\n          type: \"f\",\n          value: .5\n        },\n        scale: {\n          type: \"f\",\n          value: 500\n        }\n      };\n\n      ParticleShader.vertexShader = \"uniform float time; uniform float size; uniform float scale; attribute float pulseSpeed; attribute float orbitSpeed; attribute float orbitSize; void main() { vec3 animatedPosition = position; animatedPosition.x += sin(time * orbitSpeed) * orbitSize; animatedPosition.y += cos(time * orbitSpeed) * orbitSize; animatedPosition.z += cos(time * orbitSpeed) * orbitSize; vec3 transformed = vec3( animatedPosition ); vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 ); gl_Position =  projectionMatrix * mvPosition; float animatedSize = size * ( scale / - mvPosition.z ); animatedSize *= 1.0 + sin(time * pulseSpeed); gl_PointSize = animatedSize; }\";\n\n      ParticleShader.fragmentShader = \"uniform sampler2D map; uniform vec4 offsetRepeat; uniform vec3 color; void main() { gl_FragColor = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy ); gl_FragColor.rgb *= color.rgb; }\";\n\n      return ParticleShader;\n\n    })();\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('ngTouchstart', function() {\n    return {\n      controller: function($scope, $element, $attrs) {\n        var onDestroy, onTouchStart;\n        onTouchStart = function($event) {\n          var method;\n          method = '$scope.' + $element.attr('ng-touchstart');\n          $scope.$apply(function() {\n            eval(method);\n          });\n        };\n        $element.bind('touchstart', onTouchStart);\n        onDestroy = $scope.$on('$destroy', function() {\n          $element.unbind('touchstart', onTouchStart);\n          return onDestroy();\n        });\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('ngTouchmove', function() {\n    return {\n      controller: function($scope, $element, $attrs) {\n        var onDestroy, onTouchEnd, onTouchMove, onTouchStart;\n        onTouchStart = function($event) {\n          $element.bind('touchmove', onTouchMove);\n          $element.bind('touchend', onTouchEnd);\n        };\n        onTouchMove = function($event) {\n          var method;\n          method = '$scope.' + $element.attr('ng-touchmove');\n          $scope.$apply(function() {\n            eval(method);\n          });\n        };\n        onTouchEnd = function($event) {\n          $event.preventDefault();\n          $element.unbind('touchmove', onTouchMove);\n          $element.unbind('touchend', onTouchEnd);\n        };\n        $element.bind('touchstart', onTouchStart);\n        onDestroy = $scope.$on('$destroy', function() {\n          $element.unbind('touchmove', onTouchMove);\n          $element.unbind('touchend', onTouchEnd);\n          return onDestroy();\n        });\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('ngTouchend', function() {\n    return {\n      controller: function($scope, $element, $attrs) {\n        var onDestroy, onTouchEnd;\n        onTouchEnd = function($event) {\n          var method;\n          method = '$scope.' + $element.attr('ng-touchend');\n          $scope.$apply(function() {\n            eval(method);\n          });\n        };\n        $element.bind('touchend', onTouchEnd);\n        onDestroy = $scope.$on('$destroy', function() {\n          $element.unbind('touchend', onTouchEnd);\n          return onDestroy();\n        });\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('ngScroll', function($parse) {\n    'ngInject';\n    return {\n      restrict: 'A',\n      link: function(scope, element, attrs) {\n        var fn;\n        fn = $parse(attrs.ngScroll);\n        element.bind('scroll', function(data) {\n          return scope.$apply(function() {\n            return fn(scope, {\n              $event: data\n            });\n          });\n        });\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  angular.module('aquestCampoLeComete').factory('elasticVector2', function() {\n    'ngInject';\n    var ElasticVector2;\n    return ElasticVector2 = (function() {\n      ElasticVector2.prototype.value = null;\n\n      ElasticVector2.prototype.x = 0;\n\n      ElasticVector2.prototype.y = 0;\n\n      ElasticVector2.prototype.speed = 3;\n\n      function ElasticVector2(value) {\n        this.value = value;\n        this.update = bind(this.update, this);\n        this.x = this.value.x;\n        this.y = this.value.y;\n        return;\n      }\n\n      ElasticVector2.prototype.update = function(delta) {\n        var distx, disty;\n        delta = Math.min(delta, .1);\n        distx = this.x - this.value.x;\n        disty = this.y - this.value.y;\n        this.value.x += distx * (this.speed * delta);\n        this.value.y += disty * (this.speed * delta);\n        return true;\n      };\n\n      return ElasticVector2;\n\n    })();\n  });\n\n}).call(this);\n\n\n\n(function() {\n  var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  angular.module('aquestCampoLeComete').factory('elasticNumber', function() {\n    'ngInject';\n    var ElasticNumber;\n    return ElasticNumber = (function() {\n      ElasticNumber.prototype.value = null;\n\n      ElasticNumber.prototype.target = 0;\n\n      ElasticNumber.prototype.speed = 3;\n\n      function ElasticNumber(value) {\n        this.value = value;\n        this.update = bind(this.update, this);\n        this.target = this.value;\n        return;\n      }\n\n      ElasticNumber.prototype.update = function(delta) {\n        var dist;\n        dist = this.target - this.value;\n        this.value += dist * (this.speed * Math.min(delta, .1));\n        return true;\n      };\n\n      return ElasticNumber;\n\n    })();\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('css3dRotationEffect', function($parse, $window, elasticNumber) {\n    'ngInject';\n    return {\n      restrict: 'A',\n      link: function(scope, element, attrs) {\n        var destroyed, elasticRotateX, elasticRotateY, elasticTranslateX, mousePosition, onMouseMove, removeOnDestroy;\n        if (scope.main.platform.mobile || scope.main.platform.safari) {\n          return;\n        }\n        scope.translateZ = scope.$eval(attrs.translateZ);\n        destroyed = false;\n        mousePosition = {\n          x: 0,\n          y: 0\n        };\n        elasticTranslateX = new elasticNumber(0);\n        elasticTranslateX.speed = 1;\n        elasticRotateX = new elasticNumber(0);\n        elasticRotateX.speed = 1;\n        elasticRotateY = new elasticNumber(0);\n        elasticRotateY.speed = 1;\n        onMouseMove = function(event) {\n          var rotateXAmplitude, rotateYAmplitude, translateXAmplitude;\n          mousePosition.x = (event.clientX / $window.innerWidth) * 2 - 1;\n          mousePosition.y = -(event.clientY / $window.innerHeight) * 2 + 1;\n          translateXAmplitude = scope.main.css3dSettings.tx;\n          rotateXAmplitude = scope.main.css3dSettings.rx;\n          rotateYAmplitude = scope.main.css3dSettings.ry;\n          elasticTranslateX.target = -mousePosition.x * translateXAmplitude;\n          elasticRotateX.target = -mousePosition.y * rotateXAmplitude;\n          elasticRotateY.target = -mousePosition.x * rotateYAmplitude;\n        };\n        $window.addEventListener('mousemove', onMouseMove);\n        removeOnDestroy = scope.$on(\"$destroy\", function() {\n          removeOnDestroy();\n          $window.removeEventListener('mousemove', onMouseMove);\n          destroyed = true;\n        });\n        scope.main.addSubRoutine(\"css3d-rotation-effect-\" + (Math.random()), function(delta) {\n          var z;\n          elasticTranslateX.update(delta);\n          elasticRotateX.update(delta);\n          elasticRotateY.update(delta);\n          z = scope.translateZ != null ? scope.translateZ + \"px\" : 10;\n          element[0].style.transform = element[0].style.MozTransform = element[0].style.MsTransform = element[0].style.WebkitTransform = \"translate3d(\" + elasticTranslateX.value + \"px,0,\" + z + \") rotateX(\" + elasticRotateX.value + \"deg) rotateY(\" + elasticRotateY.value + \"deg)\";\n          return !destroyed;\n        });\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').factory('axisHelper', function() {\n    'ngInject';\n    var AxisHelper;\n    return AxisHelper = (function() {\n      function AxisHelper() {}\n\n      AxisHelper.get = function(length, dashed) {\n        var axes;\n        if (length == null) {\n          length = 10;\n        }\n        if (dashed == null) {\n          dashed = false;\n        }\n        axes = new THREE.Object3D();\n        axes.add(AxisHelper.buildAxis(new THREE.Vector3(0, 0, 0), new THREE.Vector3(length, 0, 0), 0xFF0000, dashed));\n        axes.add(AxisHelper.buildAxis(new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, length, 0), 0x00FF00, dashed));\n        axes.add(AxisHelper.buildAxis(new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 0, length), 0x0000FF, dashed));\n        return axes;\n      };\n\n      AxisHelper.buildAxis = function(src, dst, colorHex, dashed) {\n        var geom, mat;\n        geom = new THREE.Geometry();\n        if (dashed) {\n          mat = new THREE.LineDashedMaterial({\n            linewidth: 3,\n            color: colorHex,\n            dashSize: 3,\n            gapSize: 3\n          });\n        } else {\n          mat = new THREE.LineBasicMaterial({\n            linewidth: 3,\n            color: colorHex\n          });\n        }\n        geom.vertices.push(src.clone());\n        geom.vertices.push(dst.clone());\n        geom.computeLineDistances();\n        return new THREE.Line(geom, mat, THREE.LineSegments);\n      };\n\n      return AxisHelper;\n\n    })();\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('autoScroller', function($parse, $timeout, TweenMax) {\n    'ngInject';\n    var AutoScrollerController, directive;\n    AutoScrollerController = function($scope) {\n      'ngInject';\n      this.autoScrolling = false;\n      this.removeOnDestroyListener = $scope.$on(\"$destroy\", (function(_this) {\n        return function() {\n          TweenMax.killTweensOf($scope.element[0]);\n          _this.removeOnDestroyListener();\n        };\n      })(this));\n      this.initscroll = (function(_this) {\n        return function() {\n          var scrollFactor;\n          TweenMax.killTweensOf($scope.element[0]);\n          scrollFactor = 1 - ($scope.element[0].scrollTop / ($scope.element[0].scrollHeight - $scope.element[0].clientHeight));\n          return TweenMax.to($scope.element[0], 120 * scrollFactor, {\n            ease: Power0.easeNone,\n            scrollTo: {\n              y: \"#end\",\n              onAutoKill: _this.initscroll\n            },\n            delay: 1\n          });\n        };\n      })(this);\n      $scope.$watch(\"element\", (function(_this) {\n        return function() {\n          _.defer(_this.initscroll);\n        };\n      })(this));\n      this.onMouseWheel = _.throttle(this.initscroll, 250);\n    };\n    return directive = {\n      restrict: 'A',\n      controller: AutoScrollerController,\n      controllerAs: \"autoscroller\",\n      link: function(scope, element, attrs) {\n        scope.element = element;\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('siteMenu', function($timeout, $window, Modernizr, md, $state) {\n    'ngInject';\n    var SiteMenuController, directive;\n    SiteMenuController = function($scope, $rootScope) {\n      'ngInject';\n      this.selected = 0;\n      this.destroyed = false;\n      this.getParticlesColor = (function(_this) {\n        return function() {\n          var pid, ref;\n          pid = (ref = $scope.main.config.products[_this.selected]) != null ? ref.id : void 0;\n          if (pid == null) {\n            return 0xaeb53e;\n          }\n          return $scope.main.locale[pid].particles_color;\n        };\n      })(this);\n      this.scrollUp = (function(_this) {\n        return function() {\n          if (_this.selected > 0) {\n            _this.selected--;\n            _this.playSound();\n          }\n        };\n      })(this);\n      this.scrollDown = (function(_this) {\n        return function() {\n          if (_this.selected < $scope.main.config.products.length) {\n            _this.selected++;\n            _this.playSound();\n          }\n        };\n      })(this);\n      this.onImageHover = (function(_this) {\n        return function(event, index) {\n          if (index === _this.selected) {\n            $scope.main.playSound('hover_menu');\n          }\n        };\n      })(this);\n      this.onItemClick = (function(_this) {\n        return function(index, dest, product) {\n          var params;\n          if (index === _this.selected) {\n            params = product != null ? {\n              producturl: product.url\n            } : null;\n            $state.go(dest, params);\n            return;\n          }\n          _this.selected = index;\n          _this.playSound();\n        };\n      })(this);\n      this.playSound = (function(_this) {\n        return function() {\n          if ($scope.main.config.products[_this.selected] != null) {\n            $scope.main.playSound($scope.main.config.products[_this.selected].sound);\n          } else if (_this.selected === $scope.main.config.products.length) {\n            $scope.main.playSound(\"pin_rollover_6\");\n          }\n        };\n      })(this);\n      this.getLabelStyle = (function(_this) {\n        return function(index) {\n          var diff, h, scale;\n          diff = _this.selected - index;\n          scale = Math.max(0.8, 1.7 / (Math.abs(diff * .5) + 1));\n          if (diff !== 0) {\n            if (diff < 0) {\n              h = 15 * (diff + 1);\n            }\n            if (diff > 0) {\n              h = 15 * (diff - 1);\n            }\n          } else {\n            h = 0;\n          }\n          if (Modernizr.cssanimations) {\n            return {\n              transform: \"translateY(\" + h + \"px) scale(\" + scale + \")\",\n              WebkitTransform: \"translateY(\" + h + \"px) scale(\" + scale + \")\",\n              MozTransform: \"translateY(\" + h + \"px) scale(\" + scale + \")\",\n              MsTransform: \"translateY(\" + h + \"px) scale(\" + scale + \")\"\n            };\n          }\n          return {\n            top: h + \"px\",\n            fontSize: (20 * scale) + \"px\"\n          };\n        };\n      })(this);\n      this.getLabelsTop = function() {\n        var h, multiplier;\n        multiplier = $scope.main.platform.phone ? 42 : 48;\n        h = ($window.innerHeight / 2) - (multiplier * this.selected);\n        h -= $scope.main.desktop ? 32 : 45;\n        if (Modernizr.cssanimations) {\n          return {\n            transform: \"translateY(\" + h + \"px)\",\n            WebkitTransform: \"translateY(\" + h + \"px)\",\n            MozTransform: \"translateY(\" + h + \"px)\",\n            MsTransform: \"translateY(\" + h + \"px)\"\n          };\n        }\n        return {\n          top: h + \"px\"\n        };\n      };\n      this.blockSmoothScrolling = true;\n      this.lastDeltaMagnitude = 0;\n      this.onMouseWheel = _.throttle((function(_this) {\n        return function(event, delta, deltaX, deltaY) {\n          var deltaMagnitude;\n          if (_this.blockSmoothScrolling) {\n            deltaMagnitude = Math.abs(event.deltaY);\n            if (deltaMagnitude + .001 <= _this.lastDeltaMagnitude || deltaMagnitude < .1) {\n              _this.lastDeltaMagnitude = deltaMagnitude;\n              return;\n            }\n            _this.lastDeltaMagnitude = deltaMagnitude;\n          }\n          if (deltaY < 0) {\n            _this.scrollDown();\n          } else if (deltaY > 0) {\n            _this.scrollUp();\n          }\n          $timeout(function() {\n            return $scope.$apply();\n          }, 0);\n        };\n      })(this), 250);\n      this.removeStateChangeListener = $rootScope.$on('$stateChangeSuccess', function(event, toState, toParams, fromState, fromParams) {\n        if (toState.name !== \"home\") {\n          $scope.main.menuOpen = false;\n        }\n      });\n      this.removeDestroyListener = $scope.$on('$destroy', (function(_this) {\n        return function() {\n          _this.destroyed = true;\n          _this.removeDestroyListener();\n          _this.removeStateChangeListener();\n        };\n      })(this));\n      this.preventDefault = function(e) {\n        if ($scope.main.platform.ios) {\n          return e.preventDefault();\n        }\n      };\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/site-menu/site-menu.html',\n      controller: SiteMenuController,\n      controllerAs: \"sitemenu\",\n      replace: true\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('shareVolumeMenu', function($state, $stateParams) {\n    'ngInject';\n    var ShareVolumeMenuController, directive;\n    ShareVolumeMenuController = function($scope) {\n      'ngInject';\n      this.locale = $stateParams.language;\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/share-volume-menu/share-volume-menu.html',\n      controller: ShareVolumeMenuController,\n      controllerAs: \"sharevolume\",\n      replace: true\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  angular.module('aquestCampoLeComete').factory('threeJsScene', function($log, $window, $rootScope, $state, $timeout, $q, $interval, $urlRouter, TweenMax, elasticNumber, elasticVector2, axisHelper, wavingShader, particleShader, pulseCircleStandalone) {\n    'ngInject';\n    var Scene3d;\n    return Scene3d = (function() {\n      Scene3d.STATE_IDLE = \"idle\";\n\n      Scene3d.STATE_TRANSITION = \"transition\";\n\n      Scene3d.STATE_FOCUSING = \"focusing\";\n\n      Scene3d.prototype.camera = null;\n\n      Scene3d.prototype.scene = null;\n\n      Scene3d.prototype.camerasScene = null;\n\n      Scene3d.prototype.renderer = null;\n\n      Scene3d.prototype.clock = null;\n\n      Scene3d.prototype.composer = null;\n\n      Scene3d.prototype.state = Scene3d.STATE_IDLE;\n\n      Scene3d.prototype.focusingObject = null;\n\n      Scene3d.prototype.idleRadius = 37;\n\n      Scene3d.prototype.idleRadiusIntro = 57;\n\n      Scene3d.prototype.idleFOV = 64;\n\n      Scene3d.prototype.minRadius = 30;\n\n      Scene3d.prototype.maxRadius = 60;\n\n      Scene3d.prototype.cameraRadius = null;\n\n      Scene3d.prototype.sceneMouseRotation = null;\n\n      Scene3d.prototype.mouseWheelSensitivity = 2;\n\n      Scene3d.prototype.pinSize = .07;\n\n      Scene3d.prototype.loadingSceneY = 60;\n\n      Scene3d.prototype.finalSceneY = -20;\n\n      Scene3d.prototype.skyboxLoaded = false;\n\n      Scene3d.prototype.introDone = false;\n\n      Scene3d.prototype.idleCameraZoomSpeed = .9;\n\n      Scene3d.prototype.idleCameraMovementSpeed = .9;\n\n      Scene3d.prototype.zoomOutCameraZoomSpeed = 2;\n\n      Scene3d.prototype.zoomOutCameraMovementSpeed = .5;\n\n      Scene3d.prototype.rotateCameraZoomSpeed = .1;\n\n      Scene3d.prototype.rotateCameraMovementSpeed = 2;\n\n      Scene3d.prototype.zoomInCameraZoomSpeed = 2;\n\n      Scene3d.prototype.zoomInCameraMovementSpeed = 2;\n\n      Scene3d.prototype.isMouseDown = false;\n\n      Scene3d.prototype.mousePosition = new THREE.Vector2();\n\n      Scene3d.prototype.mousePickingPosition = new THREE.Vector2();\n\n      Scene3d.prototype.mouseDownPosition = new THREE.Vector2();\n\n      Scene3d.prototype.phiThetaDownPosition = new THREE.Vector2();\n\n      Scene3d.prototype.phiTheta = null;\n\n      Scene3d.prototype.initialPhiTheta = null;\n\n      Scene3d.prototype.cameraLookAt = new THREE.Vector3();\n\n      Scene3d.prototype.mouseSensitivity = 10;\n\n      Scene3d.prototype.gui = null;\n\n      Scene3d.prototype.destroyed = false;\n\n      Scene3d.prototype.raycaster = null;\n\n      Scene3d.prototype.pinOpacity = null;\n\n      Scene3d.prototype.pinMaterial = null;\n\n      Scene3d.prototype.postponeFirstDrag = false;\n\n      Scene3d.prototype.tempVec3_1 = new THREE.Vector3();\n\n      Scene3d.prototype.tempVec3_2 = new THREE.Vector3();\n\n      Scene3d.prototype.tempVec2_1 = new THREE.Vector2();\n\n      Scene3d.prototype.tempVec2_2 = new THREE.Vector2();\n\n      Scene3d.prototype.idleCameraName = 'camera0';\n\n      Scene3d.prototype.productsToCameras = {\n        stupore: 'camera1',\n        vermentino: 'camera2',\n        \"rosato\": 'camera3',\n        \"cabernet-sauvignon\": 'camera4',\n        \"podere-277-syrah\": 'camera5',\n        \"campo-alle-comete-bolgheri-superiore\": 'camera6'\n      };\n\n      Scene3d.prototype.productsToPins = {\n        stupore: 'locator1',\n        vermentino: 'locator2',\n        \"rosato\": 'locator3',\n        \"cabernet-sauvignon\": 'locator4',\n        \"podere-277-syrah\": 'locator5',\n        \"campo-alle-comete-bolgheri-superiore\": 'locator6'\n      };\n\n      Scene3d.prototype.flappingStuff = [\n        {\n          parent: \"cavalluccio\",\n          sx: 'ala_sx4',\n          dx: 'ala_dx4',\n          axis: 'y',\n          extension: .1,\n          speed: .09\n        }, {\n          parent: \"cavalluccio_alato\",\n          sx: 'ala_dx3',\n          dx: 'ala_sx3',\n          axis: 'x',\n          extension: .1,\n          speed: .2\n        }, {\n          parent: \"farfalla\",\n          sx: 'ala_sx5',\n          dx: 'ala_dx5',\n          axis: 'y',\n          extension: .09,\n          speed: .2\n        }, {\n          parent: \"pesce\",\n          sx: 'ala_sx6',\n          dx: 'ala_dx6',\n          axis: 'x',\n          extension: .05,\n          speed: .1\n        }, {\n          parent: \"cavalluccio_rosso\",\n          sx: 'ala_sx2',\n          dx: 'ala_dx2',\n          axis: 'x',\n          extension: .04,\n          speed: .1\n        }, {\n          parent: \"pesce2\",\n          sx: 'ala_dx2.001',\n          dx: 'ala_dx7',\n          axis: 'x',\n          extension: .05,\n          speed: .1\n        }\n      ];\n\n      Scene3d.prototype.floatingStuff = ['cavalluccio', 'pesce', 'cavalluccio_rosso', 'pesce2', 'cavalluccio_alato', 'farfalla', 'pavone', 'tipa'];\n\n      Scene3d.prototype.wavingStuff = ['fiore1', 'fiore2', 'fiore3', 'fiore4', 'fiore5', 'fiore6', 'fiore7', 'fiore9', 'fiore10'];\n\n      Scene3d.prototype.doubleFacedObjects = ['tipa'];\n\n      function Scene3d($scope) {\n        this.$scope = $scope;\n        this.onTouchEnd = bind(this.onTouchEnd, this);\n        this.onTouchMove = bind(this.onTouchMove, this);\n        this.onTouchStart = bind(this.onTouchStart, this);\n        this.onMouseUp = bind(this.onMouseUp, this);\n        this.onMouseWheel = bind(this.onMouseWheel, this);\n        this.onMouseMove = bind(this.onMouseMove, this);\n        this.onMouseDown = bind(this.onMouseDown, this);\n        this.moveCamera = bind(this.moveCamera, this);\n        this.render = bind(this.render, this);\n        this.onResize = bind(this.onResize, this);\n        this.flapBack = bind(this.flapBack, this);\n        this.flap = bind(this.flap, this);\n        this.intro = bind(this.intro, this);\n        this.preRenderScene = bind(this.preRenderScene, this);\n        this.onLoadFinished = bind(this.onLoadFinished, this);\n        this.onLoadProgress = bind(this.onLoadProgress, this);\n        this.findCamera = bind(this.findCamera, this);\n        this.findObjectByName = bind(this.findObjectByName, this);\n        this.zoomIn = bind(this.zoomIn, this);\n        this.rotateToObj = bind(this.rotateToObj, this);\n        this.zoomOut = bind(this.zoomOut, this);\n        this.getCameraForURL = bind(this.getCameraForURL, this);\n        this.getIdleSpherical = bind(this.getIdleSpherical, this);\n        this.gotoIdleState = bind(this.gotoIdleState, this);\n        this.removeTransitionSubRoutines = bind(this.removeTransitionSubRoutines, this);\n        this.onStateChange = bind(this.onStateChange, this);\n        this.initPointsCloud = bind(this.initPointsCloud, this);\n        this.init3DPins = bind(this.init3DPins, this);\n        this.createPinTexture = bind(this.createPinTexture, this);\n        this.init2DPins = bind(this.init2DPins, this);\n        this.onMenuOpen = bind(this.onMenuOpen, this);\n        this.destroy = bind(this.destroy, this);\n        this.onSkyboxLoaded = bind(this.onSkyboxLoaded, this);\n        this.init = bind(this.init, this);\n        this.removeOnInitListener = this.$scope.$watch('element', this.init);\n        this.removeDestroyListener = this.$scope.$on('$destroy', this.destroy);\n        this.removeStateChangeListener = $rootScope.$on('$stateChangeStart', this.onStateChange);\n        this.removeMenuOpenListener = this.$scope.$watch('main.menuOpen', this.onMenuOpen);\n        return;\n      }\n\n      Scene3d.prototype.init = function(element) {\n        var format, path, urls;\n        if (element == null) {\n          return;\n        }\n        this.removeLoadingListener = this.$scope.$watch('main.loading', (function(_this) {\n          return function(value) {\n            if (!value) {\n              _this.removeLoadingListener();\n              _this.intro();\n            }\n          };\n        })(this));\n        this.removeOnInitListener();\n        this.raycaster = new THREE.Raycaster();\n        this.phiTheta = new elasticVector2(new THREE.Vector2(0, 0));\n        this.phiTheta.speed = .1;\n        this.cameraRadius = new elasticNumber(this.idleRadius);\n        this.cameraRadius.speed = this.idleCameraZoomSpeed;\n        this.pinOpacity = new elasticNumber(1);\n        this.sceneMouseRotation = new elasticNumber(Math.PI);\n        this.sceneMouseRotation.speed = 1;\n        this.$scope.main.addSubRoutine(\"sceneUpdate-3dMainScene\", this.render);\n        this.$scope.main.addSubRoutine(\"sceneUpdate-moveCamera\", this.moveCamera);\n        this.$scope.main.addSubRoutine('sceneUpdate-updatePhiTheta', this.phiTheta.update);\n        this.$scope.main.addSubRoutine('sceneUpdate-updateCameraRadius', this.cameraRadius.update);\n        this.$scope.main.addSubRoutine('sceneUpdate-updatePinOpacity', this.pinOpacity.update);\n        this.$scope.main.addSubRoutine('sceneUpdate-updatesceneMouseRotation', (function(_this) {\n          return function(delta) {\n            var ref, ref1;\n            _this.sceneMouseRotation.update(delta);\n            if ((ref = _this.scene) != null) {\n              ref.rotation.y = _this.sceneMouseRotation.value;\n            }\n            return (ref1 = _this.camerasScene) != null ? ref1.rotation.y = _this.sceneMouseRotation.value : void 0;\n          };\n        })(this));\n        this.camera = new THREE.PerspectiveCamera(this.idleFOV * 0.7, 800 / 600, .1, 1500);\n        this.cameraLookAt.set(0, 5, 0);\n        this.scene = new THREE.Scene();\n        this.scene.position.y = this.loadingSceneY;\n        this.scene.rotation.y = Math.PI;\n        this.camerasScene = new THREE.Scene();\n        this.camerasScene.position.y = this.finalSceneY;\n        this.camerasScene.rotation.y = Math.PI;\n        this.camerasScene.updateMatrix();\n        this.camerasScene.updateMatrixWorld(true);\n        this.renderer = new THREE.WebGLRenderer({\n          antialias: true,\n          alpha: true,\n          canvas: this.$scope.element\n        });\n        this.renderer.sortObjects = false;\n        this.clock = new THREE.Clock(true);\n        this.renderer.setClearColor(0xffffff);\n        this.renderer.setPixelRatio($window.devicePixelRatio);\n        this.renderer.setSize(800, 600);\n        this.composer = new THREE.EffectComposer(this.renderer);\n        this.renderPass = new THREE.RenderPass(this.scene, this.camera);\n        this.composer.addPass(this.renderPass);\n        this.colorCorrection = new THREE.ShaderPass(THREE.ColorCorrectionShader);\n        this.colorCorrection.uniforms.powRGB.value.x = 1;\n        this.colorCorrection.uniforms.powRGB.value.y = 1;\n        this.colorCorrection.uniforms.powRGB.value.z = 1;\n        this.composer.addPass(this.colorCorrection);\n        this.brightnessContrast = new THREE.ShaderPass(THREE.BrightnessContrastShader);\n        this.composer.addPass(this.brightnessContrast);\n        this.fxaa = new THREE.ShaderPass(THREE.FXAAShader);\n        this.fxaa.renderToScreen = true;\n        this.composer.addPass(this.fxaa);\n        THREE.Cache.enabled = false;\n        this.$scope.element.addEventListener('mousedown', this.onMouseDown);\n        $window.addEventListener('mousemove', this.onMouseMove);\n        $window.addEventListener('mouseup', this.onMouseUp);\n        this.$scope.element.addEventListener('touchstart', this.onTouchStart);\n        this.$scope.element.addEventListener('touchmove', this.onTouchMove);\n        $window.addEventListener('touchend', this.onTouchEnd);\n        path = \"assets/models/skybox_v2/\";\n        format = '.jpg';\n        urls = [path + 'px' + format, path + 'nx' + format, path + 'py' + format, path + 'ny' + format, path + 'pz' + format, path + 'nz' + format];\n        this.reflectionCube = new THREE.CubeTextureLoader().load(urls, this.onSkyboxLoaded);\n        this.reflectionCube.format = THREE.RGBFormat;\n        this.scene.background = this.reflectionCube;\n        this.onResize({\n          width: $window.innerWidth,\n          height: $window.innerHeight\n        });\n      };\n\n      Scene3d.prototype.onSkyboxLoaded = function() {\n        var loader;\n        this.skyboxLoaded = true;\n        this.initPointsCloud();\n        loader = new THREE.ObjectLoader();\n        if (!this.$scope.main.platform.desktop && this.$scope.main.platform.safari) {\n          return loader.load(\"assets/models/v4-mobile/scene.json\", this.onLoadFinished, this.onLoadProgress);\n        } else {\n          return loader.load(\"assets/models/v4/scene.json\", this.onLoadFinished, this.onLoadProgress);\n        }\n      };\n\n      Scene3d.prototype.destroy = function() {\n        var ref;\n        console.log('destroy');\n        this.destroyed = true;\n        this.removeDestroyListener();\n        this.removeOnInitListener();\n        this.removeStateChangeListener();\n        this.removeTransitionSubRoutines();\n        this.removeMenuOpenListener();\n        if ((ref = this.gui) != null) {\n          ref.destroy();\n        }\n        this.$scope.element.removeEventListener('mousedown', this.onMouseDown);\n        $window.removeEventListener('mousemove', this.onMouseMove);\n        $window.removeEventListener('mouseup', this.onMouseUp);\n        this.$scope.element.removeEventListener('touchstart', this.onTouchStart);\n        this.$scope.element.removeEventListener('touchmove', this.onTouchMove);\n        $window.removeEventListener('touchend', this.onTouchEnd);\n        this.renderer.dispose();\n        this.scene.traverse(function(object) {\n          var ref1, ref2, ref3, ref4, ref5, ref6, ref7, ref8, ref9;\n          if ((ref1 = object.material) != null) {\n            if ((ref2 = ref1.program) != null) {\n              ref2.destroy();\n            }\n          }\n          if ((ref3 = object.geometry) != null) {\n            ref3.dispose();\n          }\n          if ((ref4 = object.material) != null) {\n            if ((ref5 = ref4.uniforms) != null) {\n              if ((ref6 = ref5.map) != null) {\n                if ((ref7 = ref6.value) != null) {\n                  ref7.dispose();\n                }\n              }\n            }\n          }\n          if ((ref8 = object.material) != null) {\n            if ((ref9 = ref8.map) != null) {\n              ref9.dispose();\n            }\n          }\n        });\n        this.scene.background.dispose();\n      };\n\n      Scene3d.prototype.onMenuOpen = function(value) {\n        if (value) {\n          if (this.state === Scene3d.STATE_IDLE) {\n            this.cameraRadius.target = this.idleRadiusIntro;\n          }\n        } else {\n          if (this.$scope.main.firstDragged) {\n            if (this.state === Scene3d.STATE_IDLE) {\n              this.cameraRadius.target = this.idleRadius;\n            }\n          }\n        }\n        $timeout.cancel(this.sceneUpdateDeactivateTimeout);\n        if (value) {\n          this.sceneUpdateDeactivateTimeout = $timeout((function(_this) {\n            return function() {\n              return _this.$scope.main.sceneUpdate = false;\n            };\n          })(this), 1000);\n        } else {\n          this.$scope.main.sceneUpdate = true;\n        }\n      };\n\n      Scene3d.prototype.setupDebugGUI = function() {\n        var camera;\n        this.gui = new dat.GUI();\n        this.gui.add(this.$scope.main.css3dSettings, 'tx', 0, 50).step(1).name(\"CSS3D TX\");\n        this.gui.add(this.$scope.main.css3dSettings, 'rx', 0, 50).step(1).name(\"CSS3D RX\");\n        this.gui.add(this.$scope.main.css3dSettings, 'ry', 0, 50).step(1).name(\"CSS3D RY\");\n        this.gui.add(this, 'pinSize', 0, .2).step(.01).name(\"Pin Size\");\n        camera = this.gui.addFolder(\"Camera\");\n        camera.add(this, 'idleFOV', 0, 100).step(1).name(\"Idle FOV\").onChange((function(_this) {\n          return function() {\n            if (_this.state === Scene3d.STATE_IDLE) {\n              _this.camera.fov = _this.idleFOV;\n              return _this.camera.updateProjectionMatrix();\n            }\n          };\n        })(this));\n        camera.add(this, 'idleCameraZoomSpeed', 0, 3).step(.1).name(\"Idle Zoom Spd\");\n        camera.add(this, 'idleCameraMovementSpeed', 0, 3).step(.1).name(\"Idle Mv Spd\");\n        camera.add(this, 'zoomOutCameraZoomSpeed', 0, 3).step(.1).name(\"Out Zoom Spd\");\n        camera.add(this, 'zoomOutCameraMovementSpeed', 0, 3).step(.1).name(\"Out Mv Spd\");\n        camera.add(this, 'zoomInCameraZoomSpeed', 0, 3).step(.1).name(\"In Zoom Spd\");\n        camera.add(this, 'zoomInCameraMovementSpeed', 0, 3).step(.1).name(\"In Mv Spd\");\n      };\n\n      Scene3d.prototype.init2DPins = function() {\n        this.$scope.main.addSubRoutine(\"sceneUpdate-pinPositionUpdate\", (function(_this) {\n          return function(deltaTime) {\n            var index, locator, pinName, pos, prod;\n            index = 0;\n            for (prod in _this.productsToPins) {\n              pinName = _this.productsToPins[prod];\n              locator = _this.findObjectByName(pinName);\n              if (locator != null) {\n                locator.getWorldPosition(_this.tempVec3_1);\n                pos = _this.getScreenPos(_this.tempVec3_1);\n                pos.id = prod;\n                pos.visible = true;\n                if (_this.$scope.main.uiPins[index] == null) {\n                  _this.$scope.main.uiPins[index] = pos;\n                } else {\n                  _this.$scope.main.uiPins[index].x = Math.round(pos.x);\n                  _this.$scope.main.uiPins[index].y = Math.round(pos.y);\n                  _this.$scope.main.uiPins[index].id = pos.id;\n                  _this.$scope.main.uiPins[index].visible = true;\n                }\n                index++;\n              }\n            }\n            return !_this.destroyed;\n          };\n        })(this));\n      };\n\n      Scene3d.prototype.checkPinVisibility = function(marker) {\n        var L, cameraToMarker, cameraToScene, geometryRadius;\n        marker.getWorldPosition(this.tempVec3_1);\n        geometryRadius = this.tempVec3_1.length();\n        cameraToScene = this.cameraLookAt.clone().sub(this.camera.position);\n        L = Math.sqrt(Math.pow(cameraToScene.length(), 2) - Math.pow(geometryRadius, 2));\n        cameraToMarker = this.tempVec3_1.sub(this.camera.position);\n        return cameraToMarker.length() <= L + 5;\n      };\n\n      Scene3d.prototype.createPinTexture = function(id) {\n        var pin, sprite1;\n        pin = new pulseCircleStandalone({\n          size: 64\n        });\n        sprite1 = new THREE.Texture(pin.domElement);\n        sprite1.generateMipmaps = false;\n        sprite1.minFilter = THREE.LinearFilter;\n        sprite1.magFilter = THREE.LinearFilter;\n        this.$scope.main.addSubRoutine(\"sceneUpdate-pinTextureUpdate-\" + id, function(deltaTime) {\n          pin.render(deltaTime);\n          sprite1.needsUpdate = true;\n          return true;\n        });\n        return sprite1;\n      };\n\n      Scene3d.prototype.init3DPins = function() {\n        var geometry, parent, pinMaterial, pinName, plane, prod, texture;\n        texture = this.createPinTexture(\"all\");\n        geometry = new THREE.PlaneBufferGeometry(5, 5, 1, 1);\n        for (prod in this.productsToPins) {\n          pinName = this.productsToPins[prod];\n          parent = this.findObjectByName(pinName);\n          if (parent != null) {\n            pinMaterial = new THREE.SpriteMaterial({\n              map: texture,\n              transparent: false,\n              depthTest: true,\n              depthWrite: true\n            });\n            plane = new THREE.Sprite(pinMaterial);\n            plane.elasticScale = new elasticNumber(1);\n            plane.scale.set(1.5, 1.5, 1.5);\n            plane.productid = prod;\n            plane.name = \"pin-\" + prod;\n            plane.parentPosition = parent;\n            this.scene.add(plane);\n          }\n        }\n        this.$scope.main.addSubRoutine(\"sceneUpdate-pinManagement\", (function(_this) {\n          return function(deltaTime) {\n            var beforeOverPin, dist, intersections, loc, p, scale, threeDeePin;\n            _this.overPins = [];\n            for (prod in _this.productsToPins) {\n              p = _this.findObjectByName(\"pin-\" + prod);\n              p.elasticScale.update(deltaTime);\n              p.parentPosition.getWorldPosition(_this.tempVec3_1);\n              loc = _this.scene.worldToLocal(_this.tempVec3_1);\n              p.position.copy(loc);\n              p.getWorldPosition(_this.tempVec3_1);\n              _this.camera.getWorldPosition(_this.tempVec3_2);\n              dist = _this.scene.worldToLocal(_this.tempVec3_1).sub(_this.scene.worldToLocal(_this.tempVec3_2)).length();\n              scale = dist * _this.pinSize * p.elasticScale.value;\n              p.scale.set(scale, scale, scale);\n              if (_this.state === Scene3d.STATE_IDLE) {\n                intersections = _this.raycaster.intersectObject(p);\n                if (intersections.length > 0) {\n                  p.elasticScale.target = 1.5;\n                  _this.overPins.push({\n                    distance: intersections[0].distance,\n                    pin: p\n                  });\n                } else {\n                  p.elasticScale.target = 1;\n                }\n              }\n              p.material.opacity = _this.pinOpacity.value;\n            }\n            if (_this.state === Scene3d.STATE_IDLE) {\n              _this.pinOpacity.target = 1;\n            } else {\n              _this.pinOpacity.target = 0;\n            }\n            _this.overPins.sort(function(a, b) {\n              return a.distance < b.distance;\n            });\n            beforeOverPin = _this.$scope.main.overPin.over;\n            if (_this.overPins.length > 0) {\n              _this.$scope.main.overPin.over = true;\n              _this.$scope.main.overPin.productid = _this.overPins[0].pin.productid;\n              if (!beforeOverPin) {\n                _this.$scope.$apply();\n              }\n            } else {\n              _this.$scope.main.overPin.over = false;\n              if (beforeOverPin) {\n                _this.$scope.$apply();\n              }\n            }\n            threeDeePin = _this.findObjectByName(\"pin-\" + _this.$scope.main.overPin.productid);\n            if (threeDeePin != null) {\n              threeDeePin.getWorldPosition(_this.tempVec3_1);\n              _this.$scope.main.overPin.position = _this.getScreenPos(_this.tempVec3_1);\n            }\n            return true;\n          };\n        })(this));\n      };\n\n      Scene3d.prototype.getScreenPos = function(position) {\n        var h, mx, my, vector, w;\n        w = $window.innerWidth / 2;\n        h = $window.innerHeight / 2;\n        vector = position.project(this.camera);\n        mx = Math.round(((vector.x * w) + w) * 10) / 10;\n        my = Math.round(((-vector.y * h) + h) * 10) / 10;\n        return {\n          x: mx,\n          y: my\n        };\n      };\n\n      Scene3d.prototype.initPointsCloud = function() {\n        var geometry, i, j, material, numParticles, orbitSizes, orbitSpeeds, particles, posIndex, positions, pulseSpeeds, ref, sprite1, textureLoader;\n        textureLoader = new THREE.TextureLoader();\n        sprite1 = textureLoader.load(\"assets/models/particle1.jpg\");\n        numParticles = 1000;\n        geometry = new THREE.BufferGeometry();\n        positions = new Float32Array(numParticles * 3);\n        pulseSpeeds = new Float32Array(numParticles);\n        orbitSizes = new Float32Array(numParticles);\n        orbitSpeeds = new Float32Array(numParticles);\n        for (i = j = 0, ref = numParticles; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n          posIndex = i * 3;\n          positions[posIndex] = Math.random() * 200 - 100;\n          positions[posIndex + 1] = Math.random() * 200 - 100;\n          positions[posIndex + 2] = Math.random() * 200 - 100;\n          pulseSpeeds[i] = 1 + (Math.random() * 2);\n          orbitSizes[i] = 1 + (Math.random() * 2);\n          orbitSpeeds[i] = -2 + (Math.random() * 4);\n        }\n        geometry.addAttribute('position', new THREE.BufferAttribute(positions, 3));\n        geometry.addAttribute('pulseSpeed', new THREE.BufferAttribute(pulseSpeeds, 1));\n        geometry.addAttribute('orbitSize', new THREE.BufferAttribute(orbitSizes, 1));\n        geometry.addAttribute('orbitSpeed', new THREE.BufferAttribute(orbitSpeeds, 1));\n        material = new THREE.ShaderMaterial({\n          uniforms: THREE.UniformsUtils.clone(particleShader.uniforms),\n          vertexShader: particleShader.vertexShader,\n          fragmentShader: particleShader.fragmentShader,\n          blending: THREE.AdditiveBlending,\n          transparent: true\n        });\n        material.uniforms.map.value = sprite1;\n        material.uniforms.size.value = 0.4;\n        particles = new THREE.Points(geometry, material);\n        this.scene.add(particles);\n        this.scene.children.pop();\n        this.scene.children.unshift(particles);\n        this.$scope.main.addSubRoutine(\"sceneUpdate-animateParticles\", function(delta) {\n          material.uniforms.time.value += delta;\n          return !this.destroyed;\n        });\n      };\n\n      Scene3d.prototype.onStateChange = function(event, toState, toParams, fromState, fromParams) {\n        var cam;\n        console.log(\"threejsScene received\", toState.name);\n        if (this.$scope.main.loading) {\n          return;\n        }\n        switch (toState.name) {\n          case 'home.transition':\n            this.state = Scene3d.STATE_TRANSITION;\n            break;\n          case 'home.product':\n            cam = this.getCameraForURL(toParams.producturl);\n            if (this.focusingObject !== cam && (cam != null)) {\n              if (event != null) {\n                event.preventDefault();\n              }\n              $timeout.cancel(this.sceneUpdateDeactivateTimeout);\n              this.$scope.main.sceneUpdate = true;\n              $state.go('home.transition', toParams);\n              this.gotoFocusingState(toParams.producturl).then((function(_this) {\n                return function() {\n                  $state.go(toState, toParams);\n                  $timeout.cancel(_this.sceneUpdateDeactivateTimeout);\n                  _this.sceneUpdateDeactivateTimeout = $timeout(function() {\n                    return _this.$scope.main.sceneUpdate = false;\n                  }, 3000);\n                };\n              })(this));\n            }\n            break;\n          case 'home':\n            $timeout.cancel(this.sceneUpdateDeactivateTimeout);\n            this.$scope.main.sceneUpdate = true;\n            if (this.postponeFirstDrag) {\n              this.$scope.main.firstDragged = false;\n            }\n            this.gotoIdleState();\n            if (this.postponeFirstDrag) {\n              this.initialPhiTheta = new THREE.Vector2(this.phiTheta.x, this.phiTheta.y);\n              this.$scope.main.firstDragged = true;\n              this.postponeFirstDrag = false;\n              $timeout((function(_this) {\n                return function() {\n                  _this.$scope.main.firstDragged = false;\n                  return _this.$scope.$apply();\n                };\n              })(this), 10);\n            }\n            break;\n          default:\n            $timeout.cancel(this.sceneUpdateDeactivateTimeout);\n            this.sceneUpdateDeactivateTimeout = $timeout((function(_this) {\n              return function() {\n                return _this.$scope.main.sceneUpdate = false;\n              };\n            })(this), 3000);\n            this.gotoIdleState();\n            break;\n        }\n      };\n\n      Scene3d.prototype.removeTransitionSubRoutines = function() {\n        this.$scope.main.removeSubRoutine('transitionIdleState');\n        this.$scope.main.removeSubRoutine('transitionZoomOut');\n        this.$scope.main.removeSubRoutine('transitionRotate');\n        this.$scope.main.removeSubRoutine('transitionZoomIn');\n        TweenMax.killTweensOf(this.cameraRadius);\n        TweenMax.killTweensOf(this.phiTheta);\n      };\n\n      Scene3d.prototype.gotoIdleState = function() {\n        var defer, idleRadius, idleSpherical;\n        defer = $q.defer();\n        console.log('gotoIdleState');\n        this.removeTransitionSubRoutines();\n        this.focusingObject = null;\n        idleRadius = this.$scope.main.firstDragged && this.introDone ? this.idleRadius : this.idleRadiusIntro;\n        this.$scope.main.addSubRoutine('sceneUpdate-transitionIdleState', (function(_this) {\n          return function() {\n            idleRadius = _this.$scope.main.firstDragged ? _this.idleRadius : _this.idleRadiusIntro;\n            if (_this.cameraRadius.value >= idleRadius - (idleRadius * .001)) {\n              defer.resolve();\n              return false;\n            }\n            return true;\n          };\n        })(this));\n        this.state = Scene3d.STATE_IDLE;\n        idleSpherical = this.getIdleSpherical();\n        TweenMax.to(this.cameraRadius, 2, {\n          speed: this.idleCameraZoomSpeed,\n          target: idleRadius\n        });\n        this.phiTheta.x = idleSpherical.phi;\n        this.phiTheta.y = idleSpherical.theta;\n        TweenMax.to(this.phiTheta, 2, {\n          speed: this.idleCameraMovementSpeed\n        });\n        TweenMax.to(this.cameraLookAt, 2, {\n          x: 0,\n          y: 0,\n          z: 0\n        });\n        TweenMax.to(this.camera, 5, {\n          fov: this.idleFOV,\n          ease: Power2.easeInOut,\n          onUpdate: (function(_this) {\n            return function() {\n              return _this.camera.updateProjectionMatrix();\n            };\n          })(this)\n        });\n        return defer.promise;\n      };\n\n      Scene3d.prototype.getIdleSpherical = function() {\n        var cam;\n        cam = this.findCamera(this.idleCameraName);\n        cam.getWorldPosition(this.tempVec3_1);\n        return this.getSphericalCoordinates(this.tempVec3_1);\n      };\n\n      Scene3d.prototype.gotoFocusingState = function(productURL) {\n        var defer, obj;\n        defer = $q.defer();\n        obj = this.getCameraForURL(productURL);\n        if (obj == null) {\n          defer.resolve();\n          return defer.promise;\n        }\n        this.focusingObject = null;\n        switch (this.state) {\n          case Scene3d.STATE_FOCUSING:\n          case Scene3d.STATE_TRANSITION:\n            this.zoomIn(obj).then((function(_this) {\n              return function() {\n                _this.state = Scene3d.STATE_FOCUSING;\n                _this.focusingObject = obj;\n                return defer.resolve();\n              };\n            })(this));\n            break;\n          case Scene3d.STATE_IDLE:\n            this.cameraRadius.target = this.idleRadius;\n            this.cameraRadius.speed = this.idleCameraZoomSpeed;\n            this.zoomIn(obj).then((function(_this) {\n              return function() {\n                _this.state = Scene3d.STATE_FOCUSING;\n                _this.focusingObject = obj;\n                return defer.resolve();\n              };\n            })(this));\n            break;\n        }\n        return defer.promise;\n      };\n\n      Scene3d.prototype.getCameraForURL = function(productURL) {\n        var obj, objectName, pId;\n        pId = _.find(this.$scope.main.config.products, {\n          url: productURL\n        }).id;\n        if (pId) {\n          objectName = this.productsToCameras[pId];\n          if (objectName) {\n            obj = this.findCamera(objectName);\n            if (obj != null) {\n              return obj;\n            }\n          }\n        }\n        return null;\n      };\n\n      Scene3d.prototype.zoomOut = function(obj) {\n        var defer, sp;\n        defer = $q.defer();\n        this.removeTransitionSubRoutines();\n        this.$scope.main.addSubRoutine('sceneUpdate-transitionZoomOut', (function(_this) {\n          return function() {\n            if (_this.cameraRadius.value >= _this.idleRadius - (_this.idleRadius * .001) && _this.cameraRadius.value <= _this.idleRadius + (_this.idleRadius * .001)) {\n              defer.resolve();\n              return false;\n            }\n            return true;\n          };\n        })(this));\n        console.log('zoomOut');\n        obj.getWorldPosition(this.tempVec3_1);\n        sp = this.getSphericalCoordinates(this.tempVec3_1);\n        TweenMax.to(this.phiTheta, 2, {\n          x: sp.phi,\n          y: sp.theta,\n          speed: this.zoomOutCameraMovementSpeed,\n          ease: Power2.easeInOut\n        });\n        TweenMax.to(this.cameraRadius, 2, {\n          speed: this.zoomOutCameraZoomSpeed,\n          target: this.idleRadius,\n          ease: Power2.easeInOut\n        });\n        TweenMax.to(this.cameraLookAt, 1, {\n          x: 0,\n          y: 0,\n          z: 0,\n          ease: Power2.easeInOut\n        });\n        return defer.promise;\n      };\n\n      Scene3d.prototype.rotateToObj = function(obj) {\n        var defer, sp;\n        defer = $q.defer();\n        console.log('rotateToObj');\n        this.removeTransitionSubRoutines();\n        this.$scope.main.addSubRoutine('sceneUpdate-transitionRotate', (function(_this) {\n          return function() {\n            if (_this.phiTheta.value.x >= sp.phi - 1 && _this.phiTheta.value.x <= sp.phi + 1) {\n              defer.resolve();\n              return false;\n            }\n            return true;\n          };\n        })(this));\n        obj.getWorldPosition(this.tempVec3_1);\n        sp = this.getSphericalCoordinates(this.tempVec3_1);\n        TweenMax.to(this.phiTheta, 2, {\n          x: sp.phi,\n          y: sp.theta,\n          speed: this.rotateCameraMovementSpeed,\n          ease: Power2.easeInOut\n        });\n        TweenMax.to(this.cameraRadius, 2, {\n          speed: this.rotateCameraZoomSpeed,\n          target: this.idleRadius,\n          ease: Power2.easeInOut\n        });\n        TweenMax.to(this.cameraLookAt, 1, {\n          x: 0,\n          y: 0,\n          z: 0,\n          ease: Power2.easeInOut\n        });\n        return defer.promise;\n      };\n\n      Scene3d.prototype.zoomIn = function(obj) {\n        var defer, lookat, sp;\n        defer = $q.defer();\n        console.log('zoomIn');\n        this.removeTransitionSubRoutines();\n        obj.getWorldPosition(this.tempVec3_1);\n        sp = this.getSphericalCoordinates(this.tempVec3_1);\n        this.$scope.main.addSubRoutine('sceneUpdate-transitionZoomIn', (function(_this) {\n          return function() {\n            if (_this.cameraRadius.value <= sp.radius + (_this.idleRadius * .001) && _this.cameraRadius.value >= sp.radius - (_this.idleRadius * .001)) {\n              defer.resolve();\n              return false;\n            }\n            return true;\n          };\n        })(this));\n        if (obj instanceof THREE.PerspectiveCamera) {\n          TweenMax.killTweensOf(this.camera);\n          TweenMax.to(this.camera, 5, {\n            fov: obj.fov,\n            onUpdate: (function(_this) {\n              return function() {\n                return _this.camera.updateProjectionMatrix();\n              };\n            })(this),\n            ease: Power2.easeInOut\n          });\n        }\n        TweenMax.to(this.phiTheta, 2, {\n          x: sp.phi,\n          y: sp.theta,\n          speed: this.zoomInCameraMovementSpeed,\n          ease: Power2.easeInOut\n        });\n        TweenMax.to(this.cameraRadius, 2, {\n          speed: this.zoomInCameraZoomSpeed,\n          target: sp.radius,\n          ease: Power2.easeInOut\n        });\n        lookat = obj.getWorldDirection();\n        lookat.multiplyScalar(-sp.radius);\n        obj.getWorldPosition(this.tempVec3_1);\n        lookat.add(this.tempVec3_1);\n        TweenMax.to(this.cameraLookAt, 4, {\n          x: lookat.x,\n          y: lookat.y,\n          z: lookat.z,\n          ease: Power2.easeInOut\n        });\n        return defer.promise;\n      };\n\n      Scene3d.prototype.getCartesianCoordinates = function(vector, radius, phi, theta) {\n        vector.z = radius * Math.sin(theta + (Math.PI / 2)) * Math.cos(phi);\n        vector.x = radius * Math.sin(theta + (Math.PI / 2)) * Math.sin(phi);\n        vector.y = radius * Math.cos(theta + (Math.PI / 2));\n      };\n\n      Scene3d.prototype.getSphericalCoordinates = function(vector) {\n        var ang, cp1, phi, r, ta, theta, threesixty;\n        r = vector.length();\n        phi = Math.atan2(vector.x, vector.z);\n        theta = Math.acos(vector.y / r) - (Math.PI / 2);\n        threesixty = Math.PI * 2;\n        cp1 = Math.floor(this.phiTheta.value.x / threesixty) * threesixty;\n        ta = cp1 + phi;\n        ang = this.shortestAngle(ta, this.phiTheta.value.x);\n        phi = this.phiTheta.value.x + ang;\n        return {\n          radius: r,\n          theta: theta,\n          phi: phi\n        };\n      };\n\n      Scene3d.prototype.shortestAngle = function(targetA, sourceA) {\n        var a;\n        a = targetA - sourceA;\n        return this.absmod(a + Math.PI, Math.PI * 2) - Math.PI;\n      };\n\n      Scene3d.prototype.findObjectByName = function(name) {\n        var result;\n        result = null;\n        this.scene.traverse(function(object) {\n          if (object.name === name) {\n            return result = object;\n          }\n        });\n        return result;\n      };\n\n      Scene3d.prototype.findCamera = function(name) {\n        var cam, j, len, ref;\n        if (this.cameras == null) {\n          return;\n        }\n        ref = this.cameras;\n        for (j = 0, len = ref.length; j < len; j++) {\n          cam = ref[j];\n          if (cam.name === name) {\n            return cam;\n          }\n        }\n        return null;\n      };\n\n      Scene3d.prototype.onLoadProgress = function(request) {\n        var progressNormal;\n        progressNormal = (request.loaded !== 0 ? request.loaded : 1) / (request.total !== 0 ? request.total : 1);\n        progressNormal = Math.max(0, Math.min(1, progressNormal));\n        this.$scope.main.loadingProgress = progressNormal;\n        this.phiTheta.x = (Math.PI * 2) * progressNormal;\n      };\n\n      Scene3d.prototype.onLoadFinished = function(result) {\n        var cam, j, len, ref;\n        while (result.children.length > 0) {\n          this.scene.add(result.children[0]);\n        }\n        this.init3DPins();\n        this.init2DPins();\n        this.cameras = [];\n        this.scene.traverse((function(_this) {\n          return function(object) {\n            var map, scaleNegative, transparent, wMax, wMin;\n            if (object instanceof THREE.PerspectiveCamera) {\n              _this.cameras.push(object);\n            }\n            if (object instanceof THREE.Mesh) {\n              map = null;\n              transparent = object.material.transparent;\n              if (object.material.lightMap != null) {\n                map = object.material.lightMap;\n              }\n              object.material = new THREE.ShaderMaterial({\n                uniforms: THREE.UniformsUtils.clone(wavingShader.uniforms),\n                vertexShader: wavingShader.vertexShader,\n                fragmentShader: wavingShader.fragmentShader\n              });\n              object.material.uniforms.fresnelColor.value = new THREE.Color(0xFFFFFF);\n              object.material.uniforms.fresnelIntensity.value = 0;\n              object.material.uniforms.fresnelPow.value = 5;\n              object.material.transparent = transparent;\n              scaleNegative = object.scale.x < 0 || object.scale.y < 0 || object.scale.z < 0;\n              if (scaleNegative) {\n                object.material.side = THREE.BackSide;\n              }\n              if (_this.doubleFacedObjects.indexOf(object.name) !== -1) {\n                object.material.side = THREE.DoubleSide;\n              }\n              if (map != null) {\n                object.material.uniforms.map.value = map;\n              }\n              if (_this.wavingStuff.indexOf(object.name) !== -1) {\n                object.geometry.computeBoundingBox();\n                wMin = object.geometry.boundingBox.min.y;\n                wMax = object.geometry.boundingBox.max.y;\n                object.material.uniforms.wavingMax.value = wMax;\n                object.material.uniforms.wavingMin.value = wMin;\n                object.material.uniforms.wavingFactor.value = -5 + (Math.random() * 10);\n                object.material.uniforms.wavingAmplitude.value = Math.abs(wMax - wMin) * .033;\n                _this.wave(object, Math.random() * 10);\n              }\n            }\n          };\n        })(this));\n        ref = this.cameras;\n        for (j = 0, len = ref.length; j < len; j++) {\n          cam = ref[j];\n          this.camerasScene.add(cam);\n          cam.updateMatrix();\n          cam.updateMatrixWorld(true);\n        }\n        this.$scope.$apply();\n        this.setupFlappingStuff();\n        this.setupFloatingStuff();\n        if (this.$scope.main.platform.development) {\n          this.setupDebugGUI();\n        }\n        if (!this.$scope.main.platform.ios) {\n          this.preRenderScene();\n        }\n        $timeout((function(_this) {\n          return function() {\n            return _this.$scope.main.loadingProgress = 2;\n          };\n        })(this), 100);\n      };\n\n      Scene3d.prototype.preRenderScene = function() {\n        var startFOV, startLookAt, startPosition;\n        startPosition = this.scene.position.clone();\n        startFOV = this.camera.fov;\n        startLookAt = this.cameraLookAt.clone();\n        this.camera.fov = 100;\n        this.cameraLookAt.set(0, 0, 0);\n        this.camera.updateProjectionMatrix();\n        this.scene.position.y = this.finalSceneY;\n        this.scene.updateMatrix();\n        this.scene.updateMatrixWorld(true);\n        this.renderer.render(this.scene, this.camera);\n        this.camera.fov = startFOV;\n        this.cameraLookAt.copy(startLookAt);\n        this.camera.updateProjectionMatrix();\n        this.scene.position.copy(startPosition);\n        this.scene.updateMatrix();\n        this.scene.updateMatrixWorld(true);\n        this.renderer.render(this.scene, this.camera);\n      };\n\n      Scene3d.prototype.intro = function() {\n        var idleSpherical;\n        this.onStateChange(null, $state.current, $state.params);\n        idleSpherical = this.getIdleSpherical();\n        this.initialPhiTheta = new THREE.Vector2(idleSpherical.phi, idleSpherical.theta);\n        if (this.state === Scene3d.STATE_IDLE) {\n          this.$scope.main.firstDragged = false;\n          TweenMax.to(this.camera, 5, {\n            fov: this.idleFOV,\n            onUpdate: (function(_this) {\n              return function() {\n                return _this.camera.updateProjectionMatrix();\n              };\n            })(this)\n          });\n          TweenMax.to(this.cameraLookAt, 5, {\n            x: 0,\n            y: 0,\n            z: 0\n          });\n        } else {\n          this.$scope.main.firstDragged = true;\n          this.postponeFirstDrag = true;\n        }\n        TweenMax.to(this.scene.position, 5, {\n          y: this.finalSceneY\n        });\n        this.introDone = true;\n      };\n\n      Scene3d.prototype.wave = function(object, delay) {\n        if (delay == null) {\n          delay = 0;\n        }\n        TweenMax.to(object.material.uniforms.wavingFactor, 5 + Math.random() * 5, {\n          value: 2,\n          ease: Power2.easeInOut,\n          delay: delay,\n          onComplete: (function(_this) {\n            return function() {\n              if (!_this.destroyed) {\n                return _this.waveBack(object);\n              }\n            };\n          })(this)\n        });\n      };\n\n      Scene3d.prototype.waveBack = function(object) {\n        TweenMax.to(object.material.uniforms.wavingFactor, 5 + Math.random() * 5, {\n          value: -2,\n          ease: Power2.easeInOut,\n          onComplete: (function(_this) {\n            return function() {\n              if (!_this.destroyed) {\n                return _this.wave(object);\n              }\n            };\n          })(this)\n        });\n      };\n\n      Scene3d.prototype.setupFloatingStuff = function() {\n        var j, len, obj, ref;\n        ref = this.floatingStuff;\n        for (j = 0, len = ref.length; j < len; j++) {\n          obj = ref[j];\n          obj = this.findObjectByName(obj);\n          if (obj != null) {\n            obj.floated = obj.position.y + 1;\n            obj.unfloated = obj.position.y;\n            this.float(obj, Math.random() * 10);\n          }\n        }\n      };\n\n      Scene3d.prototype.float = function(obj, delay) {\n        if (delay == null) {\n          delay = 0;\n        }\n        TweenMax.to(obj.position, 5, {\n          y: obj.floated,\n          ease: Power2.easeInOut,\n          delay: delay,\n          onComplete: (function(_this) {\n            return function() {\n              if (!_this.destroyed) {\n                return _this.floatBack(obj);\n              }\n            };\n          })(this)\n        });\n      };\n\n      Scene3d.prototype.floatBack = function(obj) {\n        TweenMax.to(obj.position, 5, {\n          y: obj.unfloated,\n          ease: Power2.easeInOut,\n          onComplete: (function(_this) {\n            return function() {\n              if (!_this.destroyed) {\n                return _this.float(obj);\n              }\n            };\n          })(this)\n        });\n      };\n\n      Scene3d.prototype.setupFlappingStuff = function() {\n        var dx, j, len, obj, parent, ref, sx;\n        ref = this.flappingStuff;\n        for (j = 0, len = ref.length; j < len; j++) {\n          obj = ref[j];\n          parent = this.findObjectByName(obj.parent);\n          sx = _.find(parent.children, {\n            name: obj.sx\n          });\n          dx = _.find(parent.children, {\n            name: obj.dx\n          });\n          if ((sx != null) && (dx != null)) {\n            sx.flapped = sx.rotation[obj.axis] - obj.extension;\n            sx.unflapped = sx.rotation[obj.axis];\n            dx.flapped = dx.rotation[obj.axis] + obj.extension;\n            dx.unflapped = dx.rotation[obj.axis];\n            this.flap(sx, obj.axis, obj.speed);\n            this.flap(dx, obj.axis, obj.speed);\n          } else {\n            console.log(\"BO\");\n          }\n        }\n      };\n\n      Scene3d.prototype.flap = function(obj, flappingAxis, duration) {\n        if (flappingAxis == null) {\n          flappingAxis = 'y';\n        }\n        if (duration == null) {\n          duration = .1;\n        }\n        switch (flappingAxis) {\n          case 'x':\n            TweenMax.to(obj.rotation, duration, {\n              x: obj.flapped,\n              onComplete: (function(_this) {\n                return function() {\n                  if (!_this.destroyed) {\n                    return _this.flapBack(obj, flappingAxis, duration);\n                  }\n                };\n              })(this)\n            });\n            break;\n          case 'y':\n            TweenMax.to(obj.rotation, duration, {\n              y: obj.flapped,\n              onComplete: (function(_this) {\n                return function() {\n                  if (!_this.destroyed) {\n                    return _this.flapBack(obj, flappingAxis, duration);\n                  }\n                };\n              })(this)\n            });\n            break;\n          case 'z':\n            TweenMax.to(obj.rotation, duration, {\n              z: obj.flapped,\n              onComplete: (function(_this) {\n                return function() {\n                  if (!_this.destroyed) {\n                    return _this.flapBack(obj, flappingAxis, duration);\n                  }\n                };\n              })(this)\n            });\n            break;\n        }\n      };\n\n      Scene3d.prototype.flapBack = function(obj, flappingAxis, duration) {\n        if (flappingAxis == null) {\n          flappingAxis = 'y';\n        }\n        if (duration == null) {\n          duration = .1;\n        }\n        switch (flappingAxis) {\n          case 'x':\n            TweenMax.to(obj.rotation, duration, {\n              x: obj.unflapped,\n              onComplete: (function(_this) {\n                return function() {\n                  if (!_this.destroyed) {\n                    return _this.flap(obj, flappingAxis, duration);\n                  }\n                };\n              })(this)\n            });\n            break;\n          case 'y':\n            TweenMax.to(obj.rotation, duration, {\n              y: obj.unflapped,\n              onComplete: (function(_this) {\n                return function() {\n                  if (!_this.destroyed) {\n                    return _this.flap(obj, flappingAxis, duration);\n                  }\n                };\n              })(this)\n            });\n            break;\n          case 'z':\n            TweenMax.to(obj.rotation, duration, {\n              z: obj.unflapped,\n              onComplete: (function(_this) {\n                return function() {\n                  if (!_this.destroyed) {\n                    return _this.flap(obj, flappingAxis, duration);\n                  }\n                };\n              })(this)\n            });\n            break;\n        }\n      };\n\n      Scene3d.prototype.onResize = function(event) {\n        var ref, ref1, ref2, ref3;\n        this.camera.aspect = event.width / event.height;\n        this.camera.updateProjectionMatrix();\n        if ((ref = this.fxaa) != null) {\n          if ((ref1 = ref.uniforms.resolution) != null) {\n            ref1.value.x = 1 / (event.width * $window.devicePixelRatio);\n          }\n        }\n        if ((ref2 = this.fxaa) != null) {\n          if ((ref3 = ref2.uniforms.resolution) != null) {\n            ref3.value.y = 1 / (event.height * $window.devicePixelRatio);\n          }\n        }\n        this.renderer.setSize(event.width, event.height);\n        this.composer.setSize(event.width, event.height);\n      };\n\n      Scene3d.prototype.render = function(deltaTime) {\n        if (!this.skyboxLoaded) {\n          return !this.destroyed;\n        }\n        if (!this.destroyed) {\n          this.raycaster.setFromCamera(this.mousePickingPosition, this.camera);\n          this.camera.lookAt(this.cameraLookAt);\n          this.renderer.render(this.scene, this.camera);\n        }\n        return !this.destroyed;\n      };\n\n      Scene3d.prototype.moveCamera = function() {\n        var ref;\n        if (this.state === Scene3d.STATE_IDLE && this.isMouseDown) {\n          this.phiTheta.x = this.phiThetaDownPosition.x + (this.mouseDownPosition.x - this.mousePosition.x) / ($window.innerWidth / this.mouseSensitivity);\n          this.phiTheta.y = this.phiThetaDownPosition.y + (this.mouseDownPosition.y - this.mousePosition.y) / ($window.innerHeight / this.mouseSensitivity);\n          this.phiTheta.y = Math.max(-.8, Math.min(.8, this.phiTheta.y));\n        }\n        if (isNaN(this.phiTheta.x)) {\n          this.phiTheta.x = 0;\n        }\n        if (isNaN(this.phiTheta.y)) {\n          this.phiTheta.y = 0;\n        }\n        this.phiTheta.y = this.clamp(this.phiTheta.y, -Math.PI / 2 + 0.001, Math.PI / 2 - 0.001);\n        if (Math.abs((ref = this.initialPhiTheta) != null ? ref.distanceTo(this.phiTheta) : void 0) > .2 && !this.$scope.main.firstDragged) {\n          this.$scope.main.firstDragged = true;\n          this.$scope.$apply();\n          console.log(\"first dragged\");\n          this.$scope.main.playSound('generic_transition');\n          if (this.state === Scene3d.STATE_IDLE) {\n            this.gotoIdleState();\n          }\n        }\n        this.getCartesianCoordinates(this.camera.position, this.cameraRadius.value, this.phiTheta.value.x, this.phiTheta.value.y);\n        return !this.destroyed;\n      };\n\n      Scene3d.prototype.clamp = function(number, min, max) {\n        return Math.max(min, Math.min(max, number));\n      };\n\n      Scene3d.prototype.absmod = function(number, max) {\n        return ((number % max) + max) % max;\n      };\n\n      Scene3d.prototype.onMouseDown = function(event) {\n        this.isMouseDown = true;\n        this.mousePosition.x = event.clientX;\n        this.mousePosition.y = event.clientY;\n        this.mouseDownPosition.copy(this.mousePosition);\n        this.phiThetaDownPosition.copy(this.phiTheta);\n        this.mousePickingPosition.x = (event.clientX / $window.innerWidth) * 2 - 1;\n        this.mousePickingPosition.y = -(event.clientY / $window.innerHeight) * 2 + 1;\n      };\n\n      Scene3d.prototype.onMouseMove = function(event) {\n        this.mousePosition.x = event.clientX;\n        this.mousePosition.y = event.clientY;\n        this.mousePickingPosition.x = (event.clientX / $window.innerWidth) * 2 - 1;\n        this.mousePickingPosition.y = -(event.clientY / $window.innerHeight) * 2 + 1;\n        this.sceneMouseRotation.target = Math.PI + (this.mousePickingPosition.x * .05);\n      };\n\n      Scene3d.prototype.onMouseWheel = function(event, delta, deltaX, deltaY) {\n        if (this.state === Scene3d.STATE_IDLE) {\n          this.cameraRadius.target += Math.min(1, Math.max(-1, event.originalEvent.deltaY)) * this.mouseWheelSensitivity;\n          this.cameraRadius.target = Math.min(this.maxRadius, Math.max(this.minRadius, this.cameraRadius.target));\n        }\n      };\n\n      Scene3d.prototype.onMouseUp = function(event) {\n        this.isMouseDown = false;\n        this.mousePickingPosition.x = (event.clientX / $window.innerWidth) * 2 - 1;\n        this.mousePickingPosition.y = -(event.clientY / $window.innerHeight) * 2 + 1;\n      };\n\n      Scene3d.prototype.onTouchStart = function(event) {\n        if (event.touches[0] == null) {\n          return;\n        }\n        this.isMouseDown = true;\n        this.mousePosition.x = event.touches[0].clientX;\n        this.mousePosition.y = event.touches[0].clientY;\n        this.mouseDownPosition.copy(this.mousePosition);\n        this.phiThetaDownPosition.copy(this.phiTheta);\n        this.mousePickingPosition.x = (event.touches[0].clientX / $window.innerWidth) * 2 - 1;\n        this.mousePickingPosition.y = -(event.touches[0].clientY / $window.innerHeight) * 2 + 1;\n      };\n\n      Scene3d.prototype.onTouchMove = function(event) {\n        if (event.touches[0] == null) {\n          return;\n        }\n        this.mousePosition.x = event.touches[0].clientX;\n        this.mousePosition.y = event.touches[0].clientY;\n        if (!this.hasParentClass(event.target, \"allow-scroll\")) {\n          event.preventDefault();\n        }\n        this.mousePickingPosition.x = (event.touches[0].clientX / $window.innerWidth) * 2 - 1;\n        this.mousePickingPosition.y = -(event.touches[0].clientY / $window.innerHeight) * 2 + 1;\n      };\n\n      Scene3d.prototype.hasParentClass = function(element, className) {\n        if (element.className.indexOf(className) !== -1) {\n          return true;\n        }\n        if (element.parentElement != null) {\n          return this.hasParentClass(element.parentElement, className);\n        }\n        return false;\n      };\n\n      Scene3d.prototype.onTouchEnd = function(event) {\n        if (event.touches[0] == null) {\n          return;\n        }\n        this.isMouseDown = false;\n        this.mousePickingPosition.x = (event.touches[0].clientX / $window.innerWidth) * 2 - 1;\n        this.mousePickingPosition.y = -(event.touches[0].clientY / $window.innerHeight) * 2 + 1;\n      };\n\n      return Scene3d;\n\n    })();\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('scene3d', function() {\n    'ngInject';\n    var Scene3dController, directive;\n    Scene3dController = function(threeJsScene, $scope) {\n      'ngInject';\n      this.scene = new threeJsScene($scope);\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/scene-3d/scene-3d.html',\n      controller: Scene3dController,\n      controllerAs: \"scene3d\",\n      replace: true,\n      link: function(scope, element) {\n        return scope.element = element[0];\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('scene2d', function($window, $timeout, $state) {\n    'ngInject';\n    var Scene2dController, directive;\n    Scene2dController = function($scope, $rootScope) {\n      'ngInject';\n      var i, len, product, ref;\n      $scope.main.loadingProgress = 2;\n      $scope.main.uiPins = [];\n      this.focusingObject = null;\n      this.onStateChange = (function(_this) {\n        return function(event, toState, toParams, fromState, fromParams) {\n          console.log(\"threejsScene received\", toState.name);\n          switch (toState.name) {\n            case 'home.product':\n              if (_this.focusingObject !== toParams.producturl) {\n                if (event != null) {\n                  event.preventDefault();\n                }\n                $state.go('home.transition', toParams);\n                $timeout(function() {\n                  _this.focusingObject = toParams.producturl;\n                  return $state.go(toState, toParams);\n                }, 5000);\n              }\n              break;\n            default:\n              _this.focusingObject = null;\n              break;\n          }\n        };\n      })(this);\n      this.removeStateChangeListener = $rootScope.$on('$stateChangeStart', this.onStateChange);\n      ref = $scope.main.config.products;\n      for (i = 0, len = ref.length; i < len; i++) {\n        product = ref[i];\n        $scope.main.uiPins.push({\n          id: product.id,\n          visible: true,\n          x: $window.innerWidth * product.fallback_position[0],\n          y: $window.innerHeight * product.fallback_position[1]\n        });\n      }\n      this.onResize = function(w, h) {\n        var aspect, canvasHeight, canvasWidth, invAspect, j, len1, pin, prod, ref1, waspect, xOffset, yOffset;\n        w = 2280;\n        h = 2880;\n        aspect = w / h;\n        invAspect = h / w;\n        waspect = $window.innerWidth / $window.innerHeight;\n        canvasWidth = Math.min($window.innerWidth, $window.innerHeight * aspect);\n        canvasHeight = Math.min($window.innerHeight, $window.innerWidth * invAspect);\n        xOffset = ($window.innerWidth - canvasWidth) / 2;\n        yOffset = ($window.innerHeight - canvasHeight) / 2;\n        ref1 = $scope.main.uiPins;\n        for (j = 0, len1 = ref1.length; j < len1; j++) {\n          pin = ref1[j];\n          prod = _.find($scope.main.config.products, {\n            id: pin.id\n          });\n          pin.x = xOffset + (canvasWidth * prod.fallback_position[0]);\n          pin.y = yOffset + (canvasHeight * prod.fallback_position[1]);\n        }\n      };\n      this.removeLoadingListener = $scope.$watch('main.loading', (function(_this) {\n        return function(value) {\n          if (!value) {\n            return _this.removeLoadingListener();\n          }\n        };\n      })(this));\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/scene-2d/scene-2d.html',\n      controller: Scene2dController,\n      controllerAs: \"scene2d\",\n      replace: true\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  angular.module('aquestCampoLeComete').factory('pulseCircleStandalone', function() {\n    'ngInject';\n    var PulseCircle;\n    return PulseCircle = (function() {\n      PulseCircle.prototype.size = 64;\n\n      PulseCircle.prototype.domElement = null;\n\n      PulseCircle.prototype.circles = null;\n\n      PulseCircle.prototype.colors = null;\n\n      PulseCircle.prototype.ctx = null;\n\n      PulseCircle.prototype.speed = 1;\n\n      PulseCircle.prototype.destroyed = false;\n\n      function PulseCircle(params) {\n        var circle, i, j, numCircles, ref;\n        this.params = params;\n        this.render = bind(this.render, this);\n        this.tweenLoop = bind(this.tweenLoop, this);\n        this.size = this.params.size || 64;\n        this.domElement = this.params.canvas || document.createElement('canvas');\n        this.speed = this.params.speed || 12;\n        this.colors = this.params.colors || [\"rgba(1, 255, 156, 1)\", \"rgba(0, 147, 88, 0.0)\"];\n        this.ctx = this.domElement.getContext('2d');\n        numCircles = 10;\n        this.circles = [];\n        for (i = j = 0, ref = numCircles; j < ref; i = j += 1) {\n          circle = {\n            radius: 0,\n            alpha: 1,\n            color: this.colors[0]\n          };\n          this.circles.push(circle);\n          this.tweenLoop(circle, this.speed * i * .1);\n        }\n        return;\n      }\n\n      PulseCircle.prototype.tweenLoop = function(circle, delay) {\n        if (this.destroyed) {\n          return;\n        }\n        TweenMax.to(circle, this.speed, {\n          radius: 1,\n          delay: delay,\n          alpha: 0,\n          ease: Power4.easeOut,\n          colorProps: {\n            color: this.colors[1]\n          },\n          onComplete: (function(_this) {\n            return function() {\n              circle.radius = 0;\n              circle.alpha = 1;\n              circle.color = _this.colors[0];\n              return _this.tweenLoop(circle, 0);\n            };\n          })(this)\n        });\n      };\n\n      PulseCircle.prototype.render = function(delta) {\n        var center, circle, i, j, len, radius, ref, sizeScaled;\n        sizeScaled = this.size;\n        if (this.domElement.width !== sizeScaled) {\n          this.domElement.width = sizeScaled;\n          this.domElement.height = sizeScaled;\n        }\n        this.ctx.clearRect(0, 0, sizeScaled, sizeScaled);\n        center = sizeScaled / 2;\n        radius = sizeScaled * 0.5;\n        this.circles.sort(function(a, b) {\n          return a.alpha > b.alpha;\n        });\n        ref = this.circles;\n        for (i = j = 0, len = ref.length; j < len; i = ++j) {\n          circle = ref[i];\n          if (circle.radius > 0 && circle.alpha > 0.01) {\n            this.ctx.fillStyle = circle.color;\n            this.ctx.beginPath();\n            this.ctx.arc(center, center, radius * circle.radius, 0, 2 * Math.PI, false);\n            this.ctx.fill();\n            this.ctx.closePath();\n          }\n        }\n        return !this.destroyed;\n      };\n\n      return PulseCircle;\n\n    })();\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('pulseCircle', function(pulseCircleStandalone) {\n    'ngInject';\n    var PulseCircleController, directive;\n    PulseCircleController = function($scope) {\n      'ngInject';\n      this.destroyed = false;\n      $scope.$watch('element', (function(_this) {\n        return function() {\n          var name;\n          _this.circle = new pulseCircleStandalone({\n            canvas: $scope.element,\n            size: $scope.size,\n            colors: $scope.colors,\n            speed: $scope.speed\n          });\n          name = \"pulseCircleUpdate-\" + $scope.id;\n          if ($scope.sceneUpdate) {\n            name = \"sceneUpdate-\" + name;\n          }\n          $scope.main.addSubRoutine(name, function(delta) {\n            if ($scope.active) {\n              _this.circle.render(delta);\n            }\n            return !_this.destroyed;\n          });\n        };\n      })(this));\n      $scope.$watch('size', (function(_this) {\n        return function(value) {\n          if (value != null) {\n            _this.circle.size = value;\n          }\n        };\n      })(this));\n      $scope.$watch('speed', (function(_this) {\n        return function(value) {\n          if (value != null) {\n            _this.circle.speed = value;\n          }\n        };\n      })(this));\n      $scope.$watch('colors', (function(_this) {\n        return function(value) {\n          if (value != null) {\n            _this.circle.colors = value;\n          }\n        };\n      })(this));\n      $scope.$on('$destroy', (function(_this) {\n        return function(value) {\n          var ref;\n          _this.destroyed = true;\n          if ((ref = _this.circle) != null) {\n            ref.destroyed = true;\n          }\n        };\n      })(this));\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/pulse-circle/pulse-circle.html',\n      controller: PulseCircleController,\n      controllerAs: \"pulsecircle\",\n      replace: true,\n      scope: {\n        size: \"=\",\n        speed: \"=\",\n        colors: \"=\",\n        id: \"=\",\n        main: \"=\",\n        active: \"=\",\n        sceneUpdate: \"=\"\n      },\n      link: function(scope, element) {\n        return scope.element = element[0];\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('pulseCircleCss', function(TweenMax) {\n    'ngInject';\n    var PulseCircleCssController, directive;\n    PulseCircleCssController = function($scope) {\n      'ngInject';\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/pulse-circle/pulse-circle-css.html',\n      controller: PulseCircleCssController,\n      controllerAs: \"pulsecircle\",\n      replace: true,\n      link: function(scope, element) {\n        return scope.element = element[0];\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('productCircle', function() {\n    'ngInject';\n    var ProductCircleController, directive;\n    ProductCircleController = function($scope) {\n      'ngInject';\n      this.open = false;\n      this.close = false;\n      this.id = \"\";\n      $scope.$watch('isOpen', (function(_this) {\n        return function(value) {\n          return _this.open = value;\n        };\n      })(this));\n      $scope.$watch('isClose', (function(_this) {\n        return function(value) {\n          return _this.close = value;\n        };\n      })(this));\n      $scope.$watch('id', (function(_this) {\n        return function(value) {\n          return _this.id = \"product-circle-pulse-\" + value;\n        };\n      })(this));\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/product-circle/product-circle.html',\n      controller: ProductCircleController,\n      controllerAs: \"productcircle\",\n      replace: true,\n      scope: {\n        locale: \"=\",\n        isOpen: \"=\",\n        isClose: \"=\",\n        main: \"=\",\n        id: \"=\"\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('pinLabel', function() {\n    'ngInject';\n    var PinLabelController, directive;\n    PinLabelController = function($scope) {\n      'ngInject';\n      $scope.$watch(\"main.overPin.position\", (function(_this) {\n        return function() {\n          return _this.style = {\n            transform: \"translate(\" + $scope.main.overPin.position.x + \"px,\" + ($scope.main.overPin.position.y - 120) + \"px)\"\n          };\n        };\n      })(this));\n      $scope.$watch(\"main.overPin.productid\", (function(_this) {\n        return function() {\n          var ref;\n          return _this.label = (ref = $scope.main.locale[$scope.main.overPin.productid]) != null ? ref.label : void 0;\n        };\n      })(this));\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/pin-label/pin-label.html',\n      controller: PinLabelController,\n      controllerAs: \"pinlabel\",\n      replace: true\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('pin2d', function(TweenMax, $window, Modernizr, $timeout, $state) {\n    'ngInject';\n    var Pin2DController, directive;\n    Pin2DController = function($scope, $rootScope) {\n      'ngInject';\n      this.zoomX = 0;\n      this.zoomY = 0;\n      this.style = {};\n      this.info = {};\n      this.pinSize = 64;\n      this.pinSpeed = 9;\n      this.state = \"idle\";\n      this.labelopened = false;\n      this.visible = true;\n      this.destroyed = false;\n      this.loadingImageURL = $scope.main.locale[$scope.id].loading_image;\n      this.loadingInfo = $scope.main.locale[$scope.id].loading_info;\n      this.productURL = _.find($scope.main.config.products, {\n        id: $scope.id\n      }).url;\n      this.soundID = _.find($scope.main.config.products, {\n        id: $scope.id\n      }).sound;\n      this.onMouseOver = (function(_this) {\n        return function(event) {\n          if (_this.state === \"idle\") {\n            $scope.main.playSound(_this.soundID);\n            TweenMax.to(_this, .5, {\n              pinSize: 100\n            });\n          }\n        };\n      })(this);\n      this.onMouseOut = (function(_this) {\n        return function(event) {\n          if (_this.state === \"idle\") {\n            TweenMax.to(_this, .5, {\n              pinSize: 64\n            });\n          }\n        };\n      })(this);\n      this.getLink = function() {\n        var url;\n        url = _.find($scope.main.config.products, {\n          id: $scope.id\n        }).url;\n        return \"home.product({producturl:'\" + url + \"'})\";\n      };\n      this.updateInfo = (function(_this) {\n        return function(id) {\n          _this.info = $scope.main.locale[id];\n        };\n      })(this);\n      this.updateStyle = (function(_this) {\n        return function() {\n          switch (_this.state) {\n            case \"idle\":\n              if ($scope.alwaysVisible) {\n                if ($scope.main.loading) {\n                  _this.visible = false;\n                } else {\n                  if ($state.current.name === \"home\") {\n                    _this.visible = true;\n                  } else {\n                    _this.visible = _this.state === \"zoom\" || _this.state === \"showinfo\";\n                  }\n                }\n              } else {\n                _this.visible = $scope.main.overPin.over && $scope.main.overPin.productid === $scope.id;\n              }\n              _this.applyTransform($scope.x, $scope.y);\n              break;\n            case \"zoom\":\n              _this.visible = true;\n              _this.applyTransform(_this.zoomX, _this.zoomY);\n              break;\n          }\n        };\n      })(this);\n      this.applyTransform = (function(_this) {\n        return function(x, y) {\n          if (Modernizr.cssanimations) {\n            _this.style.transform = _this.style.MsTransform = _this.style.MozTransform = _this.style.WebkitTransform = \"translate3d(\" + x + \"px,\" + y + \"px,0)\";\n          } else {\n            _this.style.left = x + \"px\";\n            _this.style.top = y + \"px\";\n          }\n        };\n      })(this);\n      this.removeListener5 = $scope.$watch(\"id\", this.updateInfo);\n      this.removeListener6 = $scope.$on('$destroy', (function(_this) {\n        return function() {\n          _this.destroyed = true;\n          _this.removeStateChangeListener();\n          _this.removeListener5();\n          _this.removeListener6();\n        };\n      })(this));\n      $scope.main.addSubRoutine(\"sceneUpdate-pinScopeApply-\" + $scope.id, (function(_this) {\n        return function(delta) {\n          var wasvisible;\n          wasvisible = _this.visible;\n          _this.updateStyle();\n          if (wasvisible || _this.visible) {\n            $scope.$apply();\n          }\n          return !_this.destroyed;\n        };\n      })(this));\n      this.removeStateChangeListener = $rootScope.$on('$stateChangeSuccess', (function(_this) {\n        return function(event, toState, toParams, fromState, fromParams) {\n          var thisProduct, thisURL;\n          thisProduct = _.find($scope.main.config.products, {\n            id: $scope.id\n          });\n          thisURL = thisProduct.url;\n          if (toParams.producturl === thisURL) {\n            switch (toState.name) {\n              case \"home.transition\":\n                $scope.main.playSound(\"click\");\n                _this.state = \"zoom\";\n                $timeout(function() {\n                  var horizontalPosition, transitionLength;\n                  _this.labelopened = true;\n                  _this.zoomX = $scope.x;\n                  _this.zoomY = $scope.y;\n                  transitionLength = $scope.alwaysVisible ? 5 : 5;\n                  horizontalPosition = 0;\n                  if (!$scope.main.platform.desktop) {\n                    horizontalPosition = $window.innerWidth / 2;\n                  } else {\n                    switch (thisProduct.focus_position) {\n                      case \"left\":\n                        horizontalPosition = $window.innerWidth / 3;\n                        break;\n                      case \"center\":\n                        horizontalPosition = $window.innerWidth / 2;\n                        break;\n                      case \"right\":\n                        horizontalPosition = $window.innerWidth / 1.5;\n                        break;\n                    }\n                  }\n                  return TweenMax.to(_this, transitionLength, {\n                    zoomX: horizontalPosition,\n                    zoomY: $window.innerHeight / 2,\n                    pinSize: 402,\n                    delay: 0,\n                    ease: Power4.easeInOut\n                  });\n                }, 0);\n                break;\n              case \"home.product\":\n                _this.state = \"showinfo\";\n                TweenMax.to(_this, .5, {\n                  zoomX: $window.innerWidth / 3,\n                  zoomY: $window.innerHeight / 2,\n                  ease: Power4.easeInOut\n                });\n                break;\n            }\n          } else {\n            TweenMax.killTweensOf(_this);\n            _this.state = \"idle\";\n            _this.labelopened = false;\n            TweenMax.to(_this, .5, {\n              pinSize: 64\n            });\n          }\n        };\n      })(this));\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/pin-2d/pin-2d.html',\n      controller: Pin2DController,\n      controllerAs: \"pin2d\",\n      replace: true,\n      scope: {\n        x: \"=\",\n        y: \"=\",\n        id: \"=\",\n        isVisible: \"=\",\n        main: \"=\",\n        alwaysVisible: \"=\"\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('pageParticles', function($state, $window, Detector, particleShader, elasticNumber) {\n    'ngInject';\n    var PageParticlesController, directive;\n    PageParticlesController = function($scope) {\n      'ngInject';\n      var particles;\n      particles = 250;\n      this.initialScale = 10;\n      this.concentricsParticles = [];\n      this.webgl = Detector.webgl;\n      this.cameraX = new elasticNumber(0);\n      this.cameraX.speed = 1;\n      this.cameraAmplitude = 200;\n      this.particleProgram = function(context) {\n        context.beginPath();\n        context.arc(0, 0, 0.2, 0, Math.PI * 2);\n        context.fill();\n      };\n      $scope.onMouseMove = (function(_this) {\n        return function(event) {\n          var x, y;\n          x = (event.clientX / $window.innerWidth) * 2 - 1;\n          y = -(event.clientY / $window.innerHeight) * 2 + 1;\n          _this.cameraX.target = x * _this.cameraAmplitude;\n        };\n      })(this);\n      this.render = (function(_this) {\n        return function(deltaTime) {\n          var concentrics, index, j, len, ref;\n          if (_this.webgl) {\n            _this.material.uniforms.time.value += deltaTime;\n          } else {\n            ref = _this.concentricsParticles;\n            for (index = j = 0, len = ref.length; j < len; index = ++j) {\n              concentrics = ref[index];\n              concentrics.particle.position.x = concentrics.originX + Math.sin(index + concentrics.angle) * concentrics.orbit;\n              concentrics.particle.position.y = concentrics.originY + Math.cos(index + concentrics.angle) * concentrics.orbit;\n              concentrics.particle.scale.x = concentrics.particle.scale.y = 1 + Math.sin(concentrics.angle * .5) * _this.initialScale;\n              concentrics.angle += concentrics.speed * deltaTime;\n            }\n          }\n          if (!$scope.main.platform.desktop) {\n            _this.cameraX.target = Math.max(-1, Math.min(1, $scope.main.orientationY / 10)) * _this.cameraAmplitude;\n          }\n          _this.cameraX.update(deltaTime);\n          _this.camera.position.x = _this.cameraX.value;\n          _this.renderer.render(_this.scene, _this.camera);\n          return !_this.destroyed;\n        };\n      })(this);\n      this.setBackgroundColor = function(value) {};\n      this.onResize = (function(_this) {\n        return function(event) {\n          _this.camera.aspect = event.width / event.height;\n          _this.camera.updateProjectionMatrix();\n          _this.renderer.setSize(event.width, event.height);\n        };\n      })(this);\n      this.setParticlesColor = (function(_this) {\n        return function(value) {\n          if (_this.webgl) {\n            _this.material.uniforms.color.value.set(value);\n          } else {\n            _this.material.color.set(value);\n          }\n        };\n      })(this);\n      this.destroy = (function(_this) {\n        return function(value) {\n          _this.destroyed = true;\n          _this.removeBackgroundColorListener();\n          _this.removeColorListener();\n          _this.removeDestroyListener();\n          _this.removeOnInitListener();\n          if (_this.webgl) {\n            _this.renderer.dispose();\n            _this.material.program.destroy();\n            _this.material.uniforms.map.value.dispose();\n            _this.geometry.dispose();\n          }\n        };\n      })(this);\n      this.init = (function(_this) {\n        return function() {\n          var i, j, k, orbitSizes, orbitSpeeds, particle, posIndex, positions, pulseSpeeds, ref, ref1, sprite1, textureLoader;\n          _this.removeOnInitListener();\n          _this.camera = new THREE.PerspectiveCamera(50, $window.innerWidth / $window.innerHeight, 1, 5000);\n          _this.scene = new THREE.Scene();\n          _this.scene.add(_this.camera);\n          if (_this.webgl) {\n            _this.renderer = new THREE.WebGLRenderer({\n              canvas: $scope.element,\n              alpha: true\n            });\n          } else {\n            _this.renderer = new THREE.CanvasRenderer({\n              canvas: $scope.element,\n              alpha: true\n            });\n          }\n          _this.renderer.setClearColor(0x000000, 0);\n          _this.renderer.setPixelRatio($window.devicePixelRatio);\n          _this.renderer.setSize($window.innerWidth, $window.innerHeight);\n          _this.container = new THREE.Object3D();\n          _this.scene.add(_this.container);\n          if (_this.webgl) {\n            textureLoader = new THREE.TextureLoader();\n            sprite1 = textureLoader.load(\"assets/models/particle1.png\");\n            _this.material = new THREE.ShaderMaterial({\n              uniforms: THREE.UniformsUtils.clone(particleShader.uniforms),\n              vertexShader: particleShader.vertexShader,\n              fragmentShader: particleShader.fragmentShader,\n              transparent: true\n            });\n            _this.material.uniforms.map.value = sprite1;\n            _this.material.uniforms.size.value = _this.initialScale;\n            _this.geometry = new THREE.BufferGeometry();\n            positions = new Float32Array(particles * 3);\n            pulseSpeeds = new Float32Array(particles);\n            orbitSizes = new Float32Array(particles);\n            orbitSpeeds = new Float32Array(particles);\n            for (i = j = 0, ref = particles; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n              posIndex = i * 3;\n              positions[posIndex] = Math.random() * 4000 - 2000;\n              positions[posIndex + 1] = Math.random() * 4000 - 2000;\n              positions[posIndex + 2] = -1000 - (Math.random() * 3000);\n              pulseSpeeds[i] = 2 + Math.random() * 2;\n              orbitSizes[i] = 15 + (Math.random() * 25);\n              orbitSpeeds[i] = -4 + (Math.random() * 8);\n            }\n            _this.geometry.addAttribute('position', new THREE.BufferAttribute(positions, 3));\n            _this.geometry.addAttribute('pulseSpeed', new THREE.BufferAttribute(pulseSpeeds, 1));\n            _this.geometry.addAttribute('orbitSize', new THREE.BufferAttribute(orbitSizes, 1));\n            _this.geometry.addAttribute('orbitSpeed', new THREE.BufferAttribute(orbitSpeeds, 1));\n            particles = new THREE.Points(_this.geometry, _this.material);\n            _this.container.add(particles);\n          } else {\n            _this.material = new THREE.SpriteCanvasMaterial({\n              color: 0xb00ecd,\n              program: _this.particleProgram\n            });\n            for (i = k = 0, ref1 = particles; k < ref1; i = k += 1) {\n              particle = new THREE.Sprite(_this.material);\n              particle.position.x = Math.random() * 4000 - 2000;\n              particle.position.y = Math.random() * 4000 - 2000;\n              particle.position.z = -1000 - (Math.random() * 3000);\n              particle.scale.x = particle.scale.y = _this.initialScale;\n              _this.concentricsParticles.push({\n                originX: particle.position.x,\n                originY: particle.position.y,\n                angle: 0,\n                speed: 2 + Math.random() * 2,\n                particle: particle,\n                orbit: 15 + (Math.random() * 25)\n              });\n              _this.container.add(particle);\n            }\n          }\n          $scope.main.addSubRoutine(\"pageParticlesUpdate\", _this.render);\n        };\n      })(this);\n      this.removeOnInitListener = $scope.$watch('element', this.init);\n      this.removeBackgroundColorListener = $scope.$watch('backgroundColor', this.setBackgroundColor);\n      this.removeColorListener = $scope.$watch('color', this.setParticlesColor);\n      this.removeDestroyListener = $scope.$on('$destroy', this.destroy);\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/page-particles/page-particles.html',\n      controller: PageParticlesController,\n      controllerAs: \"pageparticles\",\n      replace: true,\n      scope: {\n        color: \"=\",\n        backgroundColor: \"=\",\n        main: \"=\",\n        onMouseMove: \"=\"\n      },\n      link: function(scope, element) {\n        return scope.element = element[0];\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('loadingIndicator', function($timeout, $interval) {\n    'ngInject';\n    var LoadingIndicatorController, directive;\n    LoadingIndicatorController = function($scope, $state) {\n      'ngInject';\n      var cancelCheck;\n      this.totalSteps = 3;\n      this.step = -1;\n      this.internalStep = 0;\n      this.loadingStep = 0;\n      this.stepTime = new Date().getTime();\n      this.minSecondsPerStep = 4000;\n      $timeout((function(_this) {\n        return function() {\n          _this.stepTime = new Date().getTime();\n          _this.step = _this.internalStep;\n          return $scope.main.loadingStarted = true;\n        };\n      })(this), 2000);\n      $scope.$watch(\"main.loadingProgress\", (function(_this) {\n        return function() {\n          return _this.loadingStep = Math.floor($scope.main.loadingProgress * _this.totalSteps);\n        };\n      })(this));\n      cancelCheck = $interval((function(_this) {\n        return function() {\n          var now;\n          now = new Date().getTime();\n          if (_this.loadingStep > _this.internalStep && now - _this.stepTime > _this.minSecondsPerStep && _this.internalStep < _this.totalSteps - 1) {\n            _this.stepTime = now;\n            _this.internalStep++;\n            _this.step = -1;\n            $timeout(function() {\n              return _this.step = _this.internalStep;\n            }, 500);\n          }\n          if (($scope.main.loadingProgress === 2) && (_this.internalStep === _this.totalSteps - 1) && (now - _this.stepTime > _this.minSecondsPerStep)) {\n            $interval.cancel(cancelCheck);\n            $scope.main.loading = false;\n            return $timeout(function() {\n              $scope.main.checkViewVisibility($state.current);\n            }, 1000);\n          }\n        };\n      })(this), 100);\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/loading-indicator/loading-indicator.html',\n      controller: LoadingIndicatorController,\n      controllerAs: \"loadingindicator\",\n      replace: true\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('languageSelector', function($state) {\n    'ngInject';\n    var LanguageSelectorController, directive;\n    LanguageSelectorController = function($scope) {\n      'ngInject';\n      this.currentState = $state.current;\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/language-selector/language-selector.html',\n      controller: LanguageSelectorController,\n      controllerAs: \"languageselector\",\n      replace: true\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('hamburgerMenu', function($state) {\n    'ngInject';\n    var HamburgerMenuController, directive;\n    HamburgerMenuController = function($scope, $state, $rootScope) {\n      'ngInject';\n      this.button_label = $scope.main.locale.menu;\n      this.open = false;\n      this.clicked = false;\n      $scope.$watch(\"main.menuOpen\", (function(_this) {\n        return function(value) {\n          if ($scope.main.loading) {\n            return;\n          }\n          console.log($state.current.name);\n          if ($state.current.name === \"home\" || $state.current.name === \"home.transition\") {\n            _this.button_label = value ? $scope.main.locale.close : $scope.main.locale.menu;\n            _this.open = value;\n            _this.clicked = value;\n          }\n        };\n      })(this));\n      this.onStateChange = (function(_this) {\n        return function(event, toState, toParams, fromState, fromParams) {\n          if (toState.name !== \"home\" && toState.name !== \"home.transition\") {\n            _this.open = true;\n            _this.clicked = false;\n            _this.button_label = $scope.main.locale.close;\n          } else {\n            _this.open = false;\n            _this.clicked = false;\n            _this.button_label = $scope.main.locale.menu;\n          }\n        };\n      })(this);\n      $rootScope.$on('$stateChangeSuccess', this.onStateChange);\n      this.onStateChange(null, $state.current);\n      this.toggleOpen = (function(_this) {\n        return function() {\n          if ($state.current.name === \"home\" || $state.current.name === \"home.transition\") {\n            $scope.main.menuOpen = !$scope.main.menuOpen;\n            if ($scope.main.menuOpen) {\n              $scope.main.playSound('generic_transition');\n            } else {\n              $scope.main.playSound('click');\n            }\n          } else {\n            $scope.main.playSound('click');\n            _this.open = false;\n            _this.clicked = false;\n            _this.button_label = $scope.main.locale.menu;\n            $state.go('home');\n          }\n        };\n      })(this);\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/hamburger-menu/hamburger-menu.html',\n      controller: HamburgerMenuController,\n      controllerAs: \"hamburgermenu\",\n      replace: true\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('footer', function() {\n    'ngInject';\n    var FooterController, directive;\n    FooterController = function($scope, $document, $window) {\n      'ngInject';\n      this.open = false;\n      this.button_label = $scope.main.locale.info;\n      this.onElementClick = (function(_this) {\n        return function() {\n          _this.toggleFooter();\n          $scope.main.menuOpen = false;\n        };\n      })(this);\n      this.toggleFooter = (function(_this) {\n        return function() {\n          _this.open = !_this.open;\n          _this.button_label = _this.open ? $scope.main.locale.close : $scope.main.locale.info;\n          $scope.main.playSound(\"click\");\n        };\n      })(this);\n      this.isFooter = (function(_this) {\n        return function(element) {\n          if ((element.className != null) && element.className.split(\" \").indexOf(\"footer\") !== -1) {\n            return true;\n          } else if (element.parentNode != null) {\n            return _this.isFooter(element.parentNode);\n          }\n          return false;\n        };\n      })(this);\n      this.closeFooter = (function(_this) {\n        return function(event) {\n          if (!_this.isFooter(event.target)) {\n            _this.open = false;\n            _this.button_label = $scope.main.locale.info;\n            return $scope.$apply();\n          }\n        };\n      })(this);\n      $window.addEventListener(\"mouseup\", this.closeFooter);\n      $window.addEventListener(\"touchend\", this.closeFooter);\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/footer/footer.html',\n      controller: FooterController,\n      controllerAs: \"footer\",\n      replace: true\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').directive('dragToDiscover', function() {\n    'ngInject';\n    var DragToDiscoverController, directive;\n    DragToDiscoverController = function($scope) {\n      'ngInject';\n    };\n    return directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/drag-to-discover/drag-to-discover.html',\n      controller: DragToDiscoverController,\n      controllerAs: \"dragtodiscover\",\n      replace: true\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').controller('WineExperienceController', function($scope, $timeout, md) {\n    'ngInject';\n    $scope.main.playSound(\"generic_transition\");\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').controller('ShareController', function($location, $window, $scope, $stateParams) {\n    'ngInject';\n    $scope.main.playSound(\"generic_transition\");\n    this.locale = $stateParams.language;\n    this.url = encodeURIComponent(($location.protocol()) + \"://\" + ($location.host()) + \"/share.\" + this.locale + \".html\");\n    this.twitterText = $scope.main.locale.share_page.twitter_text;\n    this.getFBLink = (function(_this) {\n      return function() {\n        return \"https://facebook.com/sharer.php?u=\" + _this.url;\n      };\n    })(this);\n    this.getTWLink = (function(_this) {\n      return function() {\n        return \"https://twitter.com/intent/tweet?url=\" + _this.url + \"&text=\" + _this.twitterText;\n      };\n    })(this);\n    this.getGLink = (function(_this) {\n      return function() {\n        return \"https://plus.google.com/share?url=\" + _this.url;\n      };\n    })(this);\n    this.openWindow = function(url) {\n      $window.open(url, \"_blank\", \"width=640,height=400,status=no,toolbar=no,titlebar=no\");\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').provider('language', function() {\n    'ngInject';\n    this.path = '/assets/locale/';\n    this.userLanguage = \"en\";\n    this.$get = (function(_this) {\n      return function($http, $state, $log, $cookies) {\n        'ngInject';\n        return function(code, config) {\n          var cookiesLanguage, requestedLanguage, userLanguage;\n          requestedLanguage = _.find(config.locales, {\n            code: code\n          });\n          if (requestedLanguage == null) {\n            cookiesLanguage = _.find(config.locales, {\n              code: $cookies['campo-le-comete-language']\n            });\n            if (cookiesLanguage != null) {\n              code = cookiesLanguage.code;\n            } else {\n              userLanguage = _.find(config.locales, {\n                code: _this.userLanguage\n              });\n              if (userLanguage != null) {\n                code = userLanguage.code;\n              } else {\n                code = _.find(config.locales, {\n                  \"default\": true\n                }).code;\n              }\n            }\n            $state.go('home', {\n              language: code\n            });\n            return;\n          }\n          return $http({\n            method: 'GET',\n            url: _this.path + code + '.json'\n          }).then(function(response) {\n            return response.data;\n          }, function(response) {\n            return $log.error(\"Language Load Error\");\n          });\n        };\n      };\n    })(this);\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').provider('config', function() {\n    'ngInject';\n    this.path = '/assets/config.json';\n    this.$get = (function(_this) {\n      return function($http, $state) {\n        'ngInject';\n        return $http({\n          method: 'GET',\n          url: _this.path\n        }).then(function(response) {\n          return response.data;\n        });\n      };\n    })(this);\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').controller('ProductController', function($timeout, $scope, $stateParams, md, language, config) {\n    'ngInject';\n    var product;\n    product = _.find(config.products, {\n      url: $stateParams.producturl\n    });\n    this.locale = language[product.id];\n    this.state = \"loading\";\n    this.destroyed = false;\n    this.page_style = {};\n    this.removeDestroyListener = $scope.$on('$destroy', (function(_this) {\n      return function() {\n        _this.destroyed = true;\n        _this.removeDestroyListener();\n      };\n    })(this));\n    $timeout((function(_this) {\n      return function() {\n        if (!_this.destroyed) {\n          _this.state = \"loaded\";\n          _this.page_style = {\n            \"background-color\": _this.locale.page_color\n          };\n          return $timeout(function() {\n            return $scope.main.playSound('generic_transition');\n          }, 800);\n        }\n      };\n    })(this), 2000);\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').controller('PrivacyController', function($scope, $timeout, md) {\n    'ngInject';\n    $scope.main.playSound(\"generic_transition\");\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').controller('MainController', function($log, $timeout, md, $stateParams, $state, language, config, $rootScope, $location, $scope, $document, Modernizr, $window, FULLTILT) {\n    'ngInject';\n    var hidden, ref, visibilityChange;\n    this.locale = language;\n    this.config = config;\n    this.loading = true;\n    this.showSubPage = false;\n    this.viewVisible = false;\n    this.loadingProgress = 0;\n    this.menuOpen = false;\n    this.uiPins = [];\n    this.sceneUpdate = true;\n    this.orientationX = 0;\n    this.orientationY = 0;\n    this.firstDragged = true;\n    this.css3dSettings = {\n      tx: 25,\n      rx: 5,\n      ry: 10\n    };\n    this.overPin = {\n      position: {\n        x: 0,\n        y: 0\n      },\n      productid: false,\n      over: false\n    };\n    $rootScope.site_title = this.locale.site_title;\n    $rootScope.site_description = this.locale.site_description;\n    $rootScope.site_keywords = this.locale.site_keywords;\n    $rootScope.site_share_image = this.locale.site_share_image;\n    this.info = {\n      version: \"1.0.2\",\n      date: moment(1529415613866).fromNow(),\n      ci_build: true,\n      ci_commit: '01f92b22ae4d3395b27e51d98ff54590c5fc6a55',\n      ci_author: 'neri@mono-grid.com',\n      ci_branch: 'production'\n    };\n    this.platform = {\n      development: false,\n      desktop: !md.mobile() && !md.phone() && !md.tablet(),\n      mobile: md.mobile() != null,\n      phone: md.phone() != null,\n      tablet: md.tablet() != null,\n      edge: !!/Edge\\/\\d+/i.test(navigator.userAgent),\n      safari: md.is(\"Safari\"),\n      osx: ((ref = navigator.platform) != null ? ref.toUpperCase().indexOf('MAC') : void 0) >= 0,\n      ios: md.os() === \"iOS\"\n    };\n    this.muted = this.platform.desktop ? false : true;\n    this.subRoutines = [];\n    this.subRoutinesNames = [];\n    this.lastTime = new Date().getTime();\n    this.sounds = {};\n    this.onAllSoundsLoaded = function(event) {\n      this.playSound(\"theme\", -1, .06);\n    };\n    this.playSound = (function(_this) {\n      return function(id, numLoops, volume) {\n        if (numLoops == null) {\n          numLoops = 0;\n        }\n        if (volume == null) {\n          volume = 1;\n        }\n        if (_this.sounds[id] != null) {\n          _this.sounds[id].stop();\n          delete _this.sounds[id];\n        }\n        _this.sounds[id] = createjs.Sound.play(id, null, 0, 0, numLoops, _this.muted ? 0 : volume);\n        _this.sounds[id].soundID = id;\n        _this.sounds[id].defaultVolume = volume;\n        _this.sounds[id].on(\"complete\", _this.onSoundfinished, _this);\n      };\n    })(this);\n    this.onSoundfinished = (function(_this) {\n      return function(event) {\n        var id;\n        id = event.target.soundID;\n        if (_this.sounds[id] != null) {\n          _this.sounds[id].stop();\n          delete _this.sounds[id];\n        }\n      };\n    })(this);\n    $scope.$watch(\"main.muted\", (function(_this) {\n      return function(value) {\n        var soundID;\n        if (value) {\n          for (soundID in _this.sounds) {\n            TweenMax.to(_this.sounds[soundID], 1, {\n              volume: 0\n            });\n          }\n        } else {\n          for (soundID in _this.sounds) {\n            TweenMax.to(_this.sounds[soundID], 1, {\n              volume: _this.sounds[soundID].defaultVolume\n            });\n          }\n        }\n      };\n    })(this));\n    createjs.Sound.alternateExtensions = [\"mp3\"];\n    createjs.Sound.on(\"fileload\", this.onAllSoundsLoaded, this);\n    createjs.Sound.registerSound(\"assets/sounds/theme.ogg\", \"theme\");\n    createjs.Sound.registerSound(\"assets/sounds/click.ogg\", \"click\");\n    createjs.Sound.registerSound(\"assets/sounds/generic_transition.ogg\", \"generic_transition\");\n    createjs.Sound.registerSound(\"assets/sounds/hover_menu.ogg\", \"hover_menu\");\n    createjs.Sound.registerSound(\"assets/sounds/pin_rollover_1.ogg\", \"pin_rollover_1\");\n    createjs.Sound.registerSound(\"assets/sounds/pin_rollover_2.ogg\", \"pin_rollover_2\");\n    createjs.Sound.registerSound(\"assets/sounds/pin_rollover_3.ogg\", \"pin_rollover_3\");\n    createjs.Sound.registerSound(\"assets/sounds/pin_rollover_4.ogg\", \"pin_rollover_4\");\n    createjs.Sound.registerSound(\"assets/sounds/pin_rollover_5.ogg\", \"pin_rollover_5\");\n    createjs.Sound.registerSound(\"assets/sounds/pin_rollover_6.ogg\", \"pin_rollover_6\");\n    createjs.Sound.registerSound(\"assets/sounds/sfx_syrah.mp3\", \"sfx_syrah\");\n    createjs.Sound.registerSound(\"assets/sounds/sfx_bolgheri.mp3\", \"sfx_bolgheri\");\n    if (this.platform.development && Modernizr.cssanimations) {\n      this.stats = new Stats();\n      $document[0].body.appendChild(this.stats.dom);\n    }\n    this.addSubRoutine = (function(_this) {\n      return function(name, func) {\n        _this.removeSubRoutine(name);\n        _this.subRoutines.push(func);\n        _this.subRoutinesNames.push(name);\n      };\n    })(this);\n    this.removeSubRoutine = (function(_this) {\n      return function(name) {\n        var index;\n        index = _this.subRoutinesNames.indexOf(name);\n        if (index !== -1) {\n          _this.subRoutines.splice(index, 1);\n          _this.subRoutinesNames.splice(index, 1);\n        }\n      };\n    })(this);\n    this.render = (function(_this) {\n      return function() {\n        var i, j, k, len, len1, now, promise, ref1, ref2, rm, subRoutine, toremove;\n        now = new Date().getTime();\n        _this.deltaTime = (now - _this.lastTime) / 1000;\n        toremove = [];\n        ref1 = _this.subRoutines;\n        for (i = j = 0, len = ref1.length; j < len; i = ++j) {\n          subRoutine = ref1[i];\n          if (_this.subRoutinesNames[i].indexOf(\"sceneUpdate\") !== -1 && !_this.sceneUpdate) {\n            continue;\n          }\n          if (!subRoutine(_this.deltaTime)) {\n            toremove.push(subRoutine);\n          }\n        }\n        for (k = 0, len1 = toremove.length; k < len1; k++) {\n          rm = toremove[k];\n          _this.removeSubRoutine(_this.subRoutinesNames[_this.subRoutines.indexOf(rm)]);\n        }\n        if (!_this.platform.desktop) {\n          promise = new FULLTILT.getDeviceOrientation({\n            'type': 'game'\n          });\n          promise.then(function(deviceOrientation) {\n            var euler;\n            euler = deviceOrientation.getScreenAdjustedEuler();\n            _this.orientationX = euler.beta;\n            _this.orientationY = euler.gamma;\n          })[\"catch\"](function(message) {});\n        }\n        _this.lastTime = now;\n        if ((ref2 = _this.stats) != null) {\n          ref2.update();\n        }\n        requestAnimationFrame(_this.render);\n      };\n    })(this);\n    this.render();\n    this.checkViewVisibility = (function(_this) {\n      return function(toState) {\n        _this.viewVisible = toState.name !== \"home\" && toState.name !== \"home.transition\" && !_this.loading;\n      };\n    })(this);\n    $rootScope.$on('$stateChangeSuccess', (function(_this) {\n      return function(event, toState, toParams, fromState, fromParams) {\n        _this.checkViewVisibility(toState);\n      };\n    })(this));\n    if (typeof $document[0].hidden !== \"undefined\") {\n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    } else if (typeof $document[0].msHidden !== \"undefined\") {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    } else if (typeof $document[0].webkitHidden !== \"undefined\") {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n    this.handleVisibilityChange = (function(_this) {\n      return function() {\n        var id;\n        if (document[hidden]) {\n          for (id in _this.sounds) {\n            _this.sounds[id].stop();\n          }\n          console.log(\"mute\");\n        } else {\n          console.log(\"un-mute\");\n          _this.onAllSoundsLoaded();\n        }\n        return $timeout(function() {\n          return $scope.$apply();\n        }, 0);\n      };\n    })(this);\n    if (typeof $document[0].addEventListener === \"undefined\" || typeof document[hidden] === \"undefined\") {\n      console.log(\"This feature requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API.\");\n    } else {\n      $document[0].addEventListener(visibilityChange, this.handleVisibilityChange, false);\n    }\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').controller('GalleryController', function($window, $scope, $timeout, md, $document) {\n    'ngInject';\n    $scope.main.playSound(\"generic_transition\");\n    this.images = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18];\n    this.split = Math.round(this.images.length / 2);\n    this.currentimage = 1;\n    this.currentimageW = 0;\n    this.imageW = 1200;\n    this.imageH = 800;\n    this.animated = false;\n    this.scrolling = false;\n    this.isMouseDown = false;\n    this.mouseX = -1;\n    this.posX = 0;\n    this.containerstyle = {\n      transform: \"translate3D(50%,0,0)\",\n      WebkitTransform: \"translate3D(50%,0,0)\",\n      MozTransform: \"translate3D(50%,0,0)\",\n      MsTransform: \"translate3D(50%,0,0)\"\n    };\n    $timeout((function(_this) {\n      return function() {\n        return _this.animated = true;\n      };\n    })(this), 10);\n    this.holdTimeout = null;\n    this.onMouseMove = (function(_this) {\n      return function($event) {\n        var offsetX, px;\n        if (typeof $event.stopPropagation === \"function\") {\n          $event.stopPropagation();\n        }\n        if (typeof $event.preventDefault === \"function\") {\n          $event.preventDefault();\n        }\n        if (_this.isMouseDown && _this.mouseX !== -1) {\n          px = $event.clientX || event.touches[0].clientX;\n          offsetX = (px - _this.mouseX) / 2;\n          if (offsetX > _this.currentimageW) {\n            offsetX = _this.currentimageW;\n          }\n          if (offsetX < -_this.currentimageW) {\n            offsetX = -_this.currentimageW;\n          }\n          return _this.posX = offsetX;\n        }\n      };\n    })(this);\n    this.onScroll = (function(_this) {\n      return function(event) {\n        return console.log('scroll', event);\n      };\n    })(this);\n    this.onMouseDown = (function(_this) {\n      return function(event) {\n        return _this.holdTimeout = $timeout(function() {\n          if (!_this.isMouseDown && !_this.scrolling) {\n            _this.isMouseDown = true;\n            _this.mouseX = event.clientX || event.touches[0].clientX;\n            return console.log(event);\n          }\n        }, 1);\n      };\n    })(this);\n    this.onMouseUp = (function(_this) {\n      return function(event) {\n        $timeout.cancel(_this.holdTimeout);\n        if (_this.isMouseDown) {\n          $timeout(function() {\n            if (_this.posX > 0) {\n              _this.previousImage(true);\n            } else if (_this.posX < 0) {\n              _this.nextImage(true);\n            }\n            return _this.posX = 0;\n          }, 1);\n          return _this.isMouseDown = false;\n        }\n      };\n    })(this);\n    $window.addEventListener('mouseup', (function(_this) {\n      return function() {\n        return _this.onMouseUp();\n      };\n    })(this));\n    this.onMouseWheel = (function(_this) {\n      return function(event) {\n        var evdeltaY;\n        evdeltaY = event.deltaY || event.originalEvent.deltaY;\n        if (evdeltaY && evdeltaY < 0) {\n          return _this.previousImage();\n        } else if (evdeltaY && evdeltaY > 0) {\n          return _this.nextImage();\n        }\n      };\n    })(this);\n    this.nextImage = (function(_this) {\n      return function(shortdelay) {\n        if (_this.currentimage < _this.images[_this.images.length - 1]) {\n          return _this.imageClick(_this.currentimage + 1, shortdelay);\n        } else if (_this.currentimage === _this.images[_this.images.length - 1]) {\n          return _this.imageClick(_this.images[0], shortdelay);\n        }\n      };\n    })(this);\n    this.previousImage = (function(_this) {\n      return function(shortdelay) {\n        if (_this.currentimage > _this.images[0]) {\n          return _this.imageClick(_this.currentimage - 1, shortdelay);\n        } else if (_this.currentimage === 1) {\n          return _this.imageClick(_this.images[_this.images.length - 1], shortdelay);\n        }\n      };\n    })(this);\n    this.imageClick = (function(_this) {\n      return function(id, shortdelay) {\n        var delay;\n        if (id !== _this.currentimage && !_this.scrolling) {\n          _this.currentimage = id;\n          _this.scrolling = true;\n          delay = 1100;\n          if (shortdelay) {\n            delay = 500;\n          }\n          return $timeout(function() {\n            return _this.scrolling = false;\n          }, delay);\n        }\n      };\n    })(this);\n    this.getItemPosition = (function(_this) {\n      return function(id) {};\n    })(this);\n    this.getSize = (function(_this) {\n      return function(id) {\n        var elscale, isFirefox, isSafari, latestPost, left, num, opac, pevent, reducedh, reducedw, scale, size;\n        size = {\n          w: 0,\n          h: 0\n        };\n        left = -$window.innerWidth * 2;\n        opac = 1;\n        elscale = 1;\n        if ($window.innerWidth < 600) {\n          reducedw = $window.innerWidth * 0.87;\n          reducedh = $window.innerHeight * 0.87;\n          if ($window.innerWidth < $window.innerHeight) {\n            reducedw = $window.innerWidth * 0.78;\n            reducedh = $window.innerHeight * 0.78;\n          }\n        } else {\n          reducedw = $window.innerWidth * 0.8;\n          reducedh = $window.innerHeight * 0.8;\n        }\n        scale = Math.min(reducedw / _this.imageW, reducedh / _this.imageH);\n        size.w = _this.imageW * scale;\n        size.h = _this.imageH * scale;\n        _this.currentimageW = size.w;\n        pevent = 'auto';\n        isSafari = !!navigator.userAgent.match(/Version\\/[\\d\\.]+.*Safari/);\n        isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n        if (isSafari || isFirefox) {\n          pevent = 'none';\n        }\n        if (id === _this.currentimage) {\n          pevent = 'none';\n          left = ($window.innerWidth - size.w) / 2;\n        } else {\n          elscale = 0.8;\n          if (id < _this.currentimage) {\n            num = _this.currentimage - id;\n            left = ($window.innerWidth * 0.15) - (size.w * num);\n            if (num >= _this.split) {\n              latestPost = _this.images.length - _this.currentimage;\n              num = latestPost + id;\n              left = ($window.innerWidth * 0.85) + (size.w * (num - 1));\n            }\n          } else if (id > _this.currentimage) {\n            num = id - _this.currentimage;\n            left = ($window.innerWidth * 0.85) + (size.w * (num - 1));\n            if (num >= _this.split) {\n              latestPost = _this.currentimage;\n              num = latestPost + ((_this.images.length - num) - 1);\n              left = ($window.innerWidth * 0.15) - (size.w * num);\n            }\n          }\n          if (num > 3) {\n            opac = 0;\n          }\n        }\n        left += _this.posX;\n        left = Math.round(left);\n        return {\n          pointerEvents: pevent,\n          width: size.w + 'px',\n          height: size.h + 'px',\n          opacity: opac,\n          transform: \"translate3D(\" + left + \"px,-50%,0) scale(\" + elscale + \")\",\n          WebkitTransform: \"translate3D(\" + left + \"px,-50%,0) scale(\" + elscale + \")\",\n          MozTransform: \"translate3D(\" + left + \"px,-50%,0) scale(\" + elscale + \")\",\n          MsTransform: \"translate3D(\" + left + \"px,-50%,0) scale(\" + elscale + \")\"\n        };\n      };\n    })(this);\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').controller('ContactsController', function($scope, $timeout, md) {\n    'ngInject';\n    $scope.main.playSound(\"generic_transition\");\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').controller('AboutController', function($scope, $timeout, $window, Modernizr) {\n    'ngInject';\n    this.selectedChapter = 0;\n    this.slideshowImageWidth = 320;\n    $scope.main.playSound(\"generic_transition\");\n    this.onScroll = _.throttle((function(_this) {\n      return function(event) {\n        var bounds, chapter, chapters, i, index, len;\n        chapters = event.target.getElementsByClassName(\"chapter\");\n        for (index = i = 0, len = chapters.length; i < len; index = ++i) {\n          chapter = chapters[index];\n          bounds = chapter.getBoundingClientRect();\n          if (bounds.top < $window.innerHeight / 2) {\n            _this.selectedChapter = index;\n          }\n        }\n      };\n    })(this), 250);\n    this.getImageStyle = (function(_this) {\n      return function(imageIndex) {\n        var left;\n        left = ($window.innerWidth / 2) - (_this.slideshowImageWidth / 2);\n        left -= _this.slideshowImageWidth * (_this.selectedChapter - imageIndex);\n        if (Modernizr.cssanimations) {\n          return {\n            transform: \"translateX(\" + left + \"px)\",\n            WebkitTransform: \"translateX(\" + left + \"px)\",\n            MozTransform: \"translateX(\" + left + \"px)\",\n            MsTransform: \"translateX(\" + left + \"px)\",\n            opacity: imageIndex === _this.selectedChapter ? .6 : .1\n          };\n        }\n        return {\n          left: left + \"px\",\n          opacity: imageIndex === _this.selectedChapter ? .6 : .1\n        };\n      };\n    })(this);\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').run(function($log, Modernizr, md, $rootScope, $state, $location, $cookies) {\n    'ngInject';\n    Modernizr.addTest({\n      mobile: !!md.mobile(),\n      phone: !!md.phone(),\n      tablet: !!md.tablet(),\n      android: !!md.is('AndroidOS'),\n      ios: !!md.is('iOS'),\n      ipad: !!md.is('iPad'),\n      iphone: !!md.is('iPhone'),\n      wphone: !!md.is('WindowsPhoneOS'),\n      mobilegradea: md.mobileGrade() === 'A',\n      edge: !!/Edge\\/\\d+/i.test(navigator.userAgent),\n      firefox: md.version('Gecko') > 1,\n      ie: md.version(\"IE\") > 1\n    });\n    Modernizr.addTest('volume', function() {\n      var test;\n      test = document.createElement('audio');\n      test.volume = 0.5;\n      return Modernizr.audio && test.volume === 0.5;\n    });\n    $rootScope.$on('$stateChangeSuccess', function(event, toState, toParams, fromState, fromParams) {\n      $rootScope.site_url = $location.absUrl();\n      return $cookies['campo-le-comete-language'] = toParams.language;\n    });\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').config(function($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider.state('home', {\n      url: '/{language}',\n      templateUrl: 'app/main/main.html',\n      controller: 'MainController',\n      controllerAs: 'main',\n      resolve: {\n        config: function($stateParams, config) {\n          return config;\n        },\n        language: function($state, $stateParams, language, config) {\n          'ngInject';\n          return language($stateParams.language, config);\n        }\n      }\n    }).state('home.about', {\n      url: '/about',\n      templateUrl: 'app/about/about.html',\n      controller: 'AboutController',\n      controllerAs: 'about'\n    }).state('home.privacy', {\n      url: '/privacy-policy',\n      templateUrl: 'app/privacy/privacy.html',\n      controller: 'PrivacyController',\n      controllerAs: 'privacy'\n    }).state('home.contacts', {\n      url: '/contacts',\n      templateUrl: 'app/contacts/contacts.html',\n      controller: 'ContactsController',\n      controllerAs: 'contacts'\n    }).state('home.gallery', {\n      url: '/gallery',\n      templateUrl: 'app/gallery/gallery.html',\n      controller: 'GalleryController',\n      controllerAs: 'gallery'\n    }).state('home.wine', {\n      url: '/wine-experience',\n      templateUrl: 'app/wine/wine.html',\n      controller: 'WineExperienceController',\n      controllerAs: 'wine'\n    }).state('home.share', {\n      templateUrl: 'app/share/share.html',\n      controller: 'ShareController',\n      controllerAs: 'share'\n    }).state('home.product', {\n      url: '/{producturl}',\n      templateUrl: 'app/product/product.html',\n      controller: 'ProductController',\n      controllerAs: 'product',\n      resolve: {\n        config: function($stateParams, config, $state) {\n          var product;\n          product = _.find(config.products, {\n            url: $stateParams.producturl\n          });\n          if (product == null) {\n            _.defer($state.go('home', {\n              language: $stateParams.language\n            }));\n          }\n          return config;\n        }\n      }\n    }).state('home.transition', {\n      url: '/{producturl}'\n    });\n    return $urlRouterProvider.otherwise('/');\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').constant('moment', moment).constant('Modernizr', Modernizr).constant('Detector', Detector).constant('md', new MobileDetect(navigator.userAgent)).constant('TweenLite', TweenLite).constant('TweenMax', TweenMax).constant('FULLTILT', FULLTILT);\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('aquestCampoLeComete').config(function($logProvider, $locationProvider, $animateProvider, $cookiesProvider, languageProvider, configProvider, Modernizr) {\n    'ngInject';\n    var userLang;\n    $logProvider.debugEnabled(true);\n    $locationProvider.hashPrefix('!');\n    $locationProvider.html5Mode(false);\n    userLang = navigator.language || navigator.userLanguage;\n    if (userLang.indexOf(\"-\") !== -1) {\n      userLang = userLang.split(\"-\")[0];\n    }\n    languageProvider.userLanguage = userLang;\n    $animateProvider.classNameFilter(/^(?:(?!ng-animate-disabled).)*$/);\n  });\n\n}).call(this);\n\n\n\nangular.module(\"aquestCampoLeComete\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/about/about.html\",\"<div class=about-page ng-mousemove=about.pageParticleMouseMove($event)><page-particles on-mouse-move=about.pageParticleMouseMove color=\\\"\\'#aeb53e\\'\\\" background-color=\\\"\\'#2a323e\\'\\\" main=main></page-particles><div class=slideshow><img class=image ng-repeat=\\\"chapter in main.locale.about_page.chapters\\\" ng-style=about.getImageStyle($index) ng-src={{chapter.image}}></div><div class=page-content ng-scroll=about.onScroll($event) msd-wheel=autoscroller.onMouseWheel($event) auto-scroller><h1 css3d-rotation-effect class=title>{{main.locale.about_page.title}}</h1><div class=chapter ng-repeat=\\\"chapter in main.locale.about_page.chapters\\\"><h2 class=chapter-title ng-bind-html=\\\"chapter.title | wordseparation\\\"></h2><p class=chapter-subtitle ng-bind-html=\\\"chapter.subtitle | wordseparation\\\"></p><p class=chapter-text ng-bind-html=\\\"chapter.text | wordseparation\\\"></p></div><p id=end></p></div><div class=\\\"fader top\\\"></div><div class=\\\"fader bottom\\\"></div></div>\");\n$templateCache.put(\"app/contacts/contacts.html\",\"<div class=contacts-page ng-mousemove=contacts.pageParticleMouseMove($event)><page-particles on-mouse-move=contacts.pageParticleMouseMove color=\\\"\\'#aeb53e\\'\\\" background-color=\\\"\\'#2a323e\\'\\\" main=main></page-particles><div class=page-content><h1 css3d-rotation-effect class=title>{{main.locale.contacts_page.title}}</h1><h2 class=subtitle>{{main.locale.contacts_page.subtitle}}</h2><a ng-href=\\\"{{\\'mailto:\\'+main.locale.contacts_page.email}}\\\" class=email>{{main.locale.contacts_page.email}}</a><p class=address>{{main.locale.contacts_page.address}}</p><div class=numbers><span>{{main.locale.contacts_page.number1}}</span> <span>{{main.locale.contacts_page.number2}}</span></div><a href=\\\"https://www.google.it/maps/place/Campo+alle+Comete+-+Feudi+Toscana+Soc.+Agricola+a+r.+l./@43.173044,10.604627,15z/data=!4m5!3m4!1s0x0:0x21d5f0e2cbd38300!8m2!3d43.173044!4d10.604627\\\" target=_blank class=maps-button>{{main.locale.contacts_page.maps_label}}</a><p class=gps>GPS. N 43.173044 &nbsp; &nbsp; &nbsp; &nbsp; E 10.604627</p></div></div>\");\n$templateCache.put(\"app/gallery/gallery.html\",\"<div class=gallery-page ng-mousemove=gallery.pageParticleMouseMove($event);gallery.onMouseMove($event) ng-mousedown=gallery.onMouseDown($event) ng-touchstart=gallery.onMouseDown($event) ng-touchend=gallery.onMouseUp($event) ng-touchmove=gallery.onMouseMove($event) ng-scroll=gallery.onScroll($event) msd-wheel=\\\"gallery.onMouseWheel($event, $delta, $deltaX, $deltaY)\\\"><page-particles on-mouse-move=gallery.pageParticleMouseMove color=\\\"\\'#aeb53e\\'\\\" background-color=\\\"\\'#2a323e\\'\\\" main=main></page-particles><div class=\\\"page-content ng-animate-disabled\\\" ng-class=\\\"{\\'animated\\':gallery.animated, \\'scrolling\\':gallery.isMouseDown}\\\"><div class=gallery-background></div><div ng-repeat=\\\"i in gallery.images track by $index\\\" ng-class=\\\"{\\'selected\\': (i) == gallery.currentimage,\\n          \\'next\\': (i) == gallery.currentimage + 1,\\n          \\'next-next\\': (i) == gallery.currentimage + 2,\\n          \\'previous\\': (i) == gallery.currentimage - 1,\\n          \\'previous-previous\\': (i) == gallery.currentimage - 2 }\\\" class=\\\"gallery-item ng-animate-disabled\\\" id=gallery-image-{{i}} ng-style=gallery.getSize(i) ng-click=gallery.imageClick(i)><img draggable=false ng-src=assets/images/gallery/{{i}}.jpg></div></div></div>\");\n$templateCache.put(\"app/main/main.html\",\"<div class=main-container ng-class={cursorpointer:main.overPin.over}><webgl-detector><scene-2d ng-if=!webgldetector.supportsWebGL></scene-2d><div ng-if=webgldetector.supportsWebGL><scene-3d></scene-3d></div><drag-to-discover css3d-rotation-effect ng-if=\\\"webgldetector.supportsWebGL && !main.loading && !main.firstDragged\\\"></drag-to-discover><pin-2d always-visible=!webgldetector.supportsWebGL ng-repeat=\\\"item in main.uiPins\\\" is-visible=item.visible x=item.x y=item.y id=item.id main=main></pin-2d></webgl-detector><a class=logo ng-if=main.loadingStarted></a><div ui-view class=view-container ng-if=main.viewVisible ng-animate-children></div><site-menu></site-menu><hamburger-menu></hamburger-menu><footer ng-if=!main.loading></footer><share-volume-menu ng-if=!main.loading></share-volume-menu><loading-indicator ng-if=main.loading></loading-indicator><version-info ng-if=main.platform.development info=main.info></version-info></div>\");\n$templateCache.put(\"app/privacy/privacy.html\",\"<div class=privacy-policy-page ng-mousemove=privacy.pageParticleMouseMove($event)><page-particles on-mouse-move=privacy.pageParticleMouseMove color=\\\"\\'#aeb53e\\'\\\" background-color=\\\"\\'#2a323e\\'\\\" main=main></page-particles><div class=page-content><h1 css3d-rotation-effect class=title>{{main.locale.privacy_page.title}}</h1><div class=chapter ng-repeat=\\\"chapter in main.locale.privacy_page.chapters\\\"><h2 class=chapter-title ng-bind-html=chapter.title></h2><p class=chapter-text ng-bind-html=chapter.text></p></div></div><div class=\\\"fader top\\\"></div><div class=\\\"fader bottom\\\"></div></div>\");\n$templateCache.put(\"app/product/product.html\",\"<div class=product-page ng-mousemove=product.onParticlesMouseMove($event) ng-style=product.page_style><page-particles ng-show=\\\"product.state == \\'loaded\\'\\\" color=product.locale.particles_color background-color=product.locale.page_color on-mouse-move=product.onParticlesMouseMove main=main></page-particles><div class=product-description ng-show=\\\"product.state == \\'loaded\\'\\\" scroll-controller ng-scroll=scrollcontroller.onScroll($event)><div class=right-side><h1 css3d-rotation-effect class=ng-animate-disabled ng-class=\\\"{\\'intro\\': !scrollcontroller.hasScrolled}\\\">{{product.locale.label}}</h1><p class=description ng-show=!scrollcontroller.hasScrolled ng-bind-html=\\\"product.locale.description | truncate:15 | wordseparation:true:1.5:.06\\\"></p><p class=description ng-show=scrollcontroller.hasScrolled ng-bind-html=\\\"product.locale.description | wordseparation\\\"></p><div class=scroll-to-discover ng-click=scrollcontroller.gotoParagraph(0) ng-show=!scrollcontroller.hasScrolled><span>{{main.locale.scroll_to_discover}}</span><div class=\\\"curved-line curved-line1\\\"></div><div class=\\\"curved-line curved-line2\\\"></div><div class=\\\"curved-line curved-line3\\\"></div></div><div class=scroll-placeholder ng-show=!scrollcontroller.hasScrolled></div><div ng-show=scrollcontroller.hasScrolled ng-repeat=\\\"paragraph in product.locale.paragraphs\\\" class=paragraph><h2>{{paragraph.title}}</h2><p>{{paragraph.text}}</p></div><div class=\\\"download download-mobile\\\"><a target=_blank ng-href={{product.locale.filedownload}}>{{main.locale.download}}</a></div><div class=scroll-up ng-click=scrollcontroller.gotoTop()><span>{{main.locale.scroll_up}}</span><div class=\\\"curved-line curved-line1\\\"></div><div class=\\\"curved-line curved-line2\\\"></div><div class=\\\"curved-line curved-line3\\\"></div></div></div><div class=left-side><img class=\\\"wine-big ng-animate-disabled\\\" ng-class=\\\"{\\'intro\\': !scrollcontroller.hasScrolled}\\\" ng-src={{product.locale.image}}><div class=download ng-mouseenter=\\\"main.playSound(\\'hover_menu\\')\\\"><a ng-href={{product.locale.filedownload}} target=_blank>{{main.locale.download}}</a></div><ul class=chapter-selector><li ng-class=\\\"{selected: $index == scrollcontroller.selectedChapter, first: $index == 0, last: $index == (product.locale.paragraphs.length - 1)}\\\" ng-repeat=\\\"paragraph in product.locale.paragraphs\\\" ng-click=scrollcontroller.gotoParagraph($index) class=chapter-selector-item><span>{{paragraph.title}}</span></li></ul></div></div></div>\");\n$templateCache.put(\"app/share/share.html\",\"<div class=share-page ng-mousemove=share.pageParticleMouseMove($event)><page-particles on-mouse-move=share.pageParticleMouseMove color=\\\"\\'#aeb53e\\'\\\" background-color=\\\"\\'#2a323e\\'\\\" main=main></page-particles><div class=page-content><h1 class=title>{{main.locale.share_page.title}}</h1><div class=buttons><div class=\\\"button facebook\\\" ng-mouseenter=\\\"main.playSound(\\'hover_menu\\')\\\" ng-click=share.openWindow(share.getFBLink())>{{main.locale.share_page.facebook}}</div><div class=\\\"button twitter\\\" ng-mouseenter=\\\"main.playSound(\\'hover_menu\\')\\\" ng-click=share.openWindow(share.getTWLink())>{{main.locale.share_page.twitter}}</div><div class=\\\"button google\\\" ng-mouseenter=\\\"main.playSound(\\'hover_menu\\')\\\" ng-click=share.openWindow(share.getGLink())>{{main.locale.share_page.google}}</div></div></div></div>\");\n$templateCache.put(\"app/wine/wine.html\",\"<div class=wine-experience-page ng-mousemove=wine.pageParticleMouseMove($event)><page-particles on-mouse-move=wine.pageParticleMouseMove color=\\\"\\'#aeb53e\\'\\\" background-color=\\\"\\'#2a323e\\'\\\" main=main></page-particles><div class=page-content><h1 css3d-rotation-effect class=title ng-bind-html=main.locale.wine_page.title></h1><p css3d-rotation-effect class=chapter-text ng-bind-html=main.locale.wine_page.intro></p><br><br><div class=chapter ng-repeat=\\\"chapter in main.locale.wine_page.chapters\\\"><h2 class=chapter-title ng-bind-html=chapter.title></h2><p class=chapter-text ng-bind-html=chapter.text></p></div><p css3d-rotation-effect class=chapter-text ng-bind-html=main.locale.wine_page.ending></p></div><div class=\\\"fader top\\\"></div><div class=\\\"fader bottom\\\"></div></div>\");\n$templateCache.put(\"app/components/drag-to-discover/drag-to-discover.html\",\"<div class=drag-to-discover><div class=arrowleft></div><div class=points><div class=point></div><div class=point></div><div class=point></div><div class=point></div><div class=point></div><div class=point></div><div class=point></div><div class=point></div><div class=point></div><div class=point></div><div class=point></div><div class=point></div><div class=point></div></div><div class=arrowright></div><div class=cursor></div><div class=label>{{main.locale.drag_to_discover}}</div></div>\");\n$templateCache.put(\"app/components/footer/footer.html\",\"<div class=footer><div ng-show=footer.open class=footer-content ng-animate-children><ul class=footer-menu ng-if=footer.open><li><a ui-sref=home.gallery ng-click=footer.onElementClick()>{{main.locale.footer_gallery}}</a></li><li><a ui-sref=home.contacts ng-click=footer.onElementClick()>{{main.locale.footer_contatti}}</a></li><li><a href=\\\"https://www.google.it/maps/place/Campo+alle+Comete+-+Feudi+Toscana+Soc.+Agricola+a+r.+l./@43.173044,10.604627,15z/data=!4m5!3m4!1s0x0:0x21d5f0e2cbd38300!8m2!3d43.173044!4d10.604627\\\" target=_blank>{{main.locale.footer_where}}</a></li><li><a ui-sref=home.privacy ng-click=footer.onElementClick()>{{main.locale.footer_privacy}}</a></li><li><a ui-sref=home.wine ng-click=footer.onElementClick()>{{main.locale.footer_wine}}</a></li><li><a href=https://www.aquest.it/ target=_blank>{{main.locale.footer_credits}}</a></li></ul><div class=bottom ng-if=footer.open><p class=footer-piva>{{main.locale.footer_piva}}</p><p class=footer-copyright>{{main.locale.footer_copyright}}</p></div></div><div class=open-close-button ng-click=footer.toggleFooter($event) ng-mouseenter=\\\"main.playSound(\\'hover_menu\\')\\\"><div class=plusbutton><div class=plus-horizontal></div><div class=plus-vertical ng-if=!footer.open></div></div><span class=button-label ng-class=\\\"{\\'close\\': footer.open}\\\">{{footer.button_label}}</span></div></div>\");\n$templateCache.put(\"app/components/hamburger-menu/hamburger-menu.html\",\"<div class=hamburger-menu ng-if=!main.loading ng-click=hamburgermenu.toggleOpen($event) ng-class=\\\"{\\'open\\': hamburgermenu.open}\\\" ng-mouseenter=\\\"main.playSound(\\'hover_menu\\')\\\"><div class=hamburger ng-class=\\\"{\\'clicked\\': hamburgermenu.clicked}\\\"><div class=lines-container ng-if=!hamburgermenu.open><div class=hamburger-line></div><div class=hamburger-line></div><div class=hamburger-line></div></div><div class=x-container ng-if=hamburgermenu.open><div class=hamburger-x>&#10005;</div></div></div><span class=button-label ng-class=\\\"{\\'open\\': hamburgermenu.open}\\\">{{hamburgermenu.button_label}}</span></div>\");\n$templateCache.put(\"app/components/language-selector/language-selector.html\",\"<ul class=language-selector><li ng-repeat=\\\"item in main.config.locales\\\"><a ui-sref-active=active ui-sref={language:item.code}>{{item.label}}</a></li></ul>\");\n$templateCache.put(\"app/components/loading-indicator/loading-indicator.html\",\"<div class=loading-indicator><div class=centered-container ng-switch=loadingindicator.step><div class=text-container ng-switch-when=0><p ng-bind-html=\\\"main.locale.loading_line1 | wordseparation:true:.5:.1\\\"></p></div><div class=text-container ng-switch-when=1><p ng-bind-html=\\\"main.locale.loading_line2 | wordseparation:true:.5:.1\\\"></p></div><div class=text-container ng-switch-when=2><p ng-bind-html=\\\"main.locale.loading_line3 | wordseparation:true:.5:.1\\\"></p></div></div></div>\");\n$templateCache.put(\"app/components/page-particles/page-particles.html\",\"<canvas class=page-particles ng-resize=pageparticles.onResize($event)></canvas>\");\n$templateCache.put(\"app/components/pin-2d/pin-2d.html\",\"<div class=pin-2d ng-style=pin2d.style ng-if=pin2d.visible ng-animate-children><a ui-sref={{pin2d.getLink()}} ng-mouseover=pin2d.onMouseOver($event) ng-mouseout=pin2d.onMouseOut($event) ng-style=\\\"{\\'margin-left\\': -pin2d.pinSize/2+\\'px\\', \\'margin-top\\': -pin2d.pinSize/2+\\'px\\', \\'width\\': pin2d.pinSize+\\'px\\', \\'height\\': pin2d.pinSize+\\'px\\'}\\\"><!-- <pulse-circle-css ng-class=\\\"{\\'closed\\':pin2d.state == \\'idle\\', \\'opened\\':pin2d.state == \\'zoom\\', \\'expanded\\': pin2d.state == \\'showinfo\\'}\\\"></pulse-circle-css> --><pulse-circle main=main id=id size=pin2d.pinSize speed=pin2d.pinSpeed active=\\\"alwaysVisible || pin2d.state == \\'zoom\\' || pin2d.state == \\'showinfo\\'\\\" ng-if=\\\"alwaysVisible || pin2d.state == \\'zoom\\' || pin2d.state == \\'showinfo\\'\\\" scene-update=true></pulse-circle><div class=product-info ng-if=\\\"pin2d.state == \\'showinfo\\'\\\"><div class=\\\"circle circle2\\\"></div><div class=\\\"circle circle1\\\"></div><img ng-src={{pin2d.loadingImageURL}}><p class=loading-info>{{pin2d.loadingInfo}}</p><p class=loading-copy>{{main.locale.loading}}</p></div></a><span class=label ng-class=\\\"{\\'opened\\':pin2d.labelopened}\\\">{{pin2d.info.label}}</span></div>\");\n$templateCache.put(\"app/components/pin-label/pin-label.html\",\"<div class=pin-label ng-style=pinlabel.style><span class=label>{{pinlabel.label}}</span><div class=white-dots><div class=white-dot></div><div class=white-dot></div><div class=white-dot></div><div class=white-dot></div><div class=white-dot></div><div class=white-dot></div><div class=white-dot></div><div class=white-dot></div><div class=white-dot></div><div class=white-dot></div><div class=white-dot></div><div class=white-dot></div><div class=white-dot></div></div></div>\");\n$templateCache.put(\"app/components/product-circle/product-circle.html\",\"<div class=product-circle ng-class={open:productcircle.open,close:productcircle.close}><pulse-circle main=main ng-show=!productcircle.close size=402 speed=12 active=!productcircle.close id=productcircle.id></pulse-circle><div class=\\\"circle circle2\\\"></div><div class=\\\"circle circle1\\\"></div><div class=product-image><img ng-if=main.platform.desktop ng-src={{locale.loading_image}}><img ng-if=!main.platform.desktop ng-src={{locale.loading_image_mobile}}></div></div>\");\n$templateCache.put(\"app/components/pulse-circle/pulse-circle-css.html\",\"<div class=pulse-circle-css><div class=pulse-circle-element></div><div class=pulse-circle-element></div><div class=pulse-circle-element></div><div class=pulse-circle-element></div><div class=pulse-circle-element></div><div class=pulse-circle-element></div><div class=pulse-circle-element></div><div class=pulse-circle-element></div><div class=pulse-circle-element></div><div class=pulse-circle-element></div></div>\");\n$templateCache.put(\"app/components/pulse-circle/pulse-circle.html\",\"<canvas class=pulse-circle ng-style=\\\"{\\'width\\': size+\\'px\\', \\'height\\': size+\\'px\\'}\\\"></canvas>\");\n$templateCache.put(\"app/components/scene-2d/scene-2d.html\",\"<div class=\\\"scene-2d scene\\\" ng-resize=scene2d.onResize()><div class=loading-screen ng-if=main.loading></div><div class=main-screen ng-if=!main.loading><div class=main-screen-world></div></div></div>\");\n$templateCache.put(\"app/components/scene-3d/scene-3d.html\",\"<canvas ng-show=scene3d.scene.skyboxLoaded class=\\\"scene-3d scene\\\" msd-wheel=scene3d.scene.onMouseWheel($event) ng-resize=scene3d.scene.onResize($event)></canvas>\");\n$templateCache.put(\"app/components/share-volume-menu/share-volume-menu.html\",\"<div class=share-volume-menu><object ng-if=\\\"sharevolume.locale == \\'en\\' || sharevolume.locale == \\'de\\'\\\" class=logo-ce data=assets/images/logo-comunita-europea.svg type=image/svg+xml></object><a class=share ui-sref=home.share ng-mouseenter=\\\"main.playSound(\\'hover_menu\\')\\\"></a> <button class=volume ng-mouseenter=\\\"main.playSound(\\'hover_menu\\')\\\" ng-class=\\\"{\\'disabled\\': main.muted}\\\" ng-click=\\\"main.muted = !main.muted\\\"><div class=line></div><div class=line></div><div class=line></div><div class=line></div></button></div>\");\n$templateCache.put(\"app/components/site-menu/site-menu.html\",\"<div class=site-menu ng-if=main.menuOpen msd-wheel=\\\"sitemenu.onMouseWheel($event, $delta, $deltaX, $deltaY)\\\" ng-style=\\\"{\\'background-color\\': main.locale[main.config.products[sitemenu.selected].id].page_color}\\\" ng-swipe-up=sitemenu.scrollDown() ng-swipe-down=sitemenu.scrollUp() ng-mousemove=sitemenu.onParticlesMouseMove($event) ng-animate-children><page-particles color=sitemenu.getParticlesColor() background-color=main.locale[main.config.products[sitemenu.selected].id].page_color on-mouse-move=sitemenu.onParticlesMouseMove main=main></page-particles><ul class=labels ng-style=sitemenu.getLabelsTop() ng-if=main.menuOpen><li class=element ng-repeat=\\\"product in main.config.products\\\" ng-style=sitemenu.getLabelStyle($index) ng-class=\\\"{selected: $index == sitemenu.selected, upper: $index == sitemenu.selected - 1, lower: $index == sitemenu.selected + 1, \\'upper-hidden\\': $index < sitemenu.selected - 1, \\'lower-hidden\\': $index > sitemenu.selected + 1}\\\"><a ng-click=\\\"sitemenu.onItemClick($index,\\'home.product\\',product)\\\" class=\\\"label noPreventDefault\\\" ng-touchmove=sitemenu.preventDefault($event)>{{main.locale[product.id].label}}</a></li><!-- about item --><li class=element ng-style=sitemenu.getLabelStyle(main.config.products.length) ng-class=\\\"{selected: sitemenu.selected == main.config.products.length, lower: sitemenu.selected == main.config.products.length - 1, \\'lower-hidden\\': sitemenu.selected < main.config.products.length - 1}\\\"><a ng-click=\\\"sitemenu.onItemClick(main.config.products.length,\\'home.about\\')\\\" class=\\\"label noPreventDefault\\\" ng-touchmove=sitemenu.preventDefault($event)>{{main.locale.about}}</a></li></ul><ul class=images ng-if=main.menuOpen><li class=element ng-repeat=\\\"product in main.config.products\\\" ng-class=\\\"{selected: $index == sitemenu.selected, upper: $index == sitemenu.selected - 1, lower: $index == sitemenu.selected + 1, \\'upper-hidden\\': $index < sitemenu.selected - 1, \\'lower-hidden\\': $index > sitemenu.selected + 1}\\\"><a class=noPreventDefault ng-touchmove=sitemenu.preventDefault($event) ng-click=\\\"sitemenu.onItemClick($index,\\'home.product\\',product)\\\" ng-mouseenter=sitemenu.onImageHover($event,$index)><product-circle id=product.id main=main locale=main.locale[product.id] is-close=\\\"$index != sitemenu.selected\\\"></product-circle><div class=enter-label><p>{{main.locale.enter}}</p><div class=\\\"curved-line curved-line1\\\"></div><div class=\\\"curved-line curved-line2\\\"></div><div class=\\\"curved-line curved-line3\\\"></div></div></a></li><!-- about item --><li class=element ng-class=\\\"{selected: sitemenu.selected == main.config.products.length, lower: sitemenu.selected == main.config.products.length - 1, \\'lower-hidden\\': sitemenu.selected < main.config.products.length - 1}\\\"><a class=noPreventDefault ng-touchmove=sitemenu.preventDefault($event) ng-click=\\\"sitemenu.onItemClick(main.config.products.length,\\'home.about\\')\\\" ng-mouseenter=sitemenu.onImageHover($event,main.config.products.length)><product-circle id=product.id main=main locale=\\\"{\\'loading_image\\':\\'assets/images/product_about.png\\',\\'loading_image_mobile\\':\\'assets/images/product_about-low.png\\'}\\\" is-close=\\\"sitemenu.selected != main.config.products.length\\\"></product-circle><div class=enter-label><p>{{main.locale.enter}}</p><div class=\\\"curved-line curved-line1\\\"></div><div class=\\\"curved-line curved-line2\\\"></div><div class=\\\"curved-line curved-line3\\\"></div></div></a></li></ul><language-selector class=noPreventDefault></language-selector></div>\");\n$templateCache.put(\"app/components/version-info/version-info.html\",\"<div class=version-info><span ng-if=!info.ci_build>v{{info.version}}+local built {{info.date}}</span> <span ng-if=info.ci_build>v{{info.version}}+git{{info.ci_commit}} built {{info.date}} by {{info.ci_author}} on {{info.ci_branch}}</span></div>\");\n$templateCache.put(\"app/components/webgl-detector/webgl-detector.html\",\"<div class=webgl-detector ng-transclude></div>\");}]);"],"sourceRoot":"/source/"}