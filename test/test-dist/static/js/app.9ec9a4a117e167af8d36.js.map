{"version":3,"sources":["webpack:///./src/js/views/AbstractVRApplication.js","webpack:///./src/app.js","webpack:///./src/js/mainVR.js"],"names":["webvr_polyfill","Main","classCallCheck_default","this","_this","possibleConstructorReturn_default","__proto__","get_prototype_of_default","call","clock","three_module","isMouseDown","INTERSECTED","crosshair","color","opacity","transparent","position","z","camera","add","room","wireframe","scene","light","set","normalize","geometry","i","object","Math","random","x","y","rotation","PI","scale","userData","velocity","raycaster","renderer","setClearColor","sortObjects","domElement","addEventListener","onMouseDown","bind","onMouseUp","animate","get_default","prototype","effect","setSize","window","innerWidth","innerHeight","requestAnimationFrame","render","delta","getDelta","cube","children","remove","applyQuaternion","quaternion","setFromCamera","intersects","intersectObjects","length","material","emissive","setHex","currentHex","getHex","undefined","multiplyScalar","clamp","controls","update","AbstractVRApplication","_camera","_controls","_scene","_renderer","setPixelRatio","devicePixelRatio","document","body","appendChild","insertAdjacentHTML","uiVR","_vrButton","src","background","corners","on","userHeight","getElementById","style","display","requestEnterFullscreen","_effect","onWindowResize","aspect","updateProjectionMatrix","timestamp"],"mappings":"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","file":"static/js/app.9ec9a4a117e167af8d36.js","sourcesContent":["import * as THREE from 'three'\nimport 'three/examples/js/controls/VRControls'\nimport 'three/examples/js/effects/VREffect'\nimport * as WebVRPolyfill from 'webvr-polyfill'\nimport * as webvrui from 'webvr-ui'\n\n// eslint-disable-next-line\nnew WebVRPolyfill()\n\nclass AbstractVRApplication {\n  constructor () {\n    this._camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 1, 10)\n\n    this._controls = new THREE.VRControls(this._camera)\n\n    this._scene = new THREE.Scene()\n    this._scene.add(this._camera)\n\n    this._renderer = new THREE.WebGLRenderer()\n    this._renderer.setPixelRatio(window.devicePixelRatio)\n    this._renderer.setSize(window.innerWidth, window.innerHeight)\n    document.body.appendChild(this._renderer.domElement)\n\n    const uiVR = `<div id=\"ui\">\n                        <div id=\"vr-button\"></div>\n                        <a id=\"magic-window\" href=\"#\">Try it without a headset</a>\n                      </div>`\n    document.body.insertAdjacentHTML('beforeend', uiVR)\n\n    const uiOptions = {\n      color: 'black',\n      background: 'white',\n      corners: 'square'\n    }\n\n    this._vrButton = new webvrui.EnterVRButton(this._renderer.domElement, uiOptions)\n    this._vrButton.on('exit', () => {\n      this._camera.quaternion.set(0, 0, 0, 1)\n      this._camera.position.set(0, this._controls.userHeight, 0)\n    })\n    this._vrButton.on('hide', function () {\n      document.getElementById('ui').style.display = 'none'\n    })\n    this._vrButton.on('show', function () {\n      document.getElementById('ui').style.display = 'inherit'\n    })\n    document.getElementById('vr-button').appendChild(this._vrButton.domElement)\n    document.getElementById('magic-window').addEventListener('click', () => {\n      this._vrButton.requestEnterFullscreen()\n    })\n\n    this._effect = new THREE.VREffect(this._renderer)\n    this._effect.setSize(window.innerWidth, window.innerHeight)\n\n    window.addEventListener('resize', this.onWindowResize.bind(this), false)\n  }\n\n  get renderer () {\n    return this._renderer\n  }\n\n  get camera () {\n    return this._camera\n  }\n\n  get scene () {\n    return this._scene\n  }\n\n  get effect () {\n    return this._effect\n  }\n\n  get controls () {\n    return this._controls\n  }\n\n  onWindowResize () {\n    this._camera.aspect = window.innerWidth / window.innerHeight\n    this._camera.updateProjectionMatrix()\n\n    this._renderer.setSize(window.innerWidth, window.innerHeight)\n  }\n\n  animate (timestamp) {\n    this._effect.requestAnimationFrame(this.animate.bind(this))\n    this._controls.update()\n    this._effect.render(this._scene, this._camera)\n  }\n}\nexport default AbstractVRApplication\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/views/AbstractVRApplication.js","import './css/style.css'\n// import Main from './js/main'\n// import Main from './js/mainWagner'\nimport Main from './js/mainVR'\n\n// eslint-disable-next-line\nnew Main()\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","// forked from https://threejs.org/examples/?q=vr#webvr_cubes\n\nimport * as THREE from 'three'\nimport AbstractVRApplication from 'views/AbstractVRApplication'\n\nclass Main extends AbstractVRApplication {\n  constructor () {\n    super()\n\n    this.clock = new THREE.Clock()\n    this.isMouseDown = false\n    this.INTERSECTED = null\n\n    this.crosshair = new THREE.Mesh(\n      new THREE.RingGeometry(0.02, 0.04, 32),\n      new THREE.MeshBasicMaterial({\n        color: 0xffffff,\n        opacity: 0.5,\n        transparent: true\n      })\n    )\n    this.crosshair.position.z = -2\n    this.camera.add(this.crosshair)\n\n    this.room = new THREE.Mesh(\n      new THREE.BoxGeometry(6, 6, 6, 8, 8, 8),\n      new THREE.MeshBasicMaterial({ color: 0x404040, wireframe: true })\n    )\n\n    this.scene.add(this.room)\n\n    this.scene.add(new THREE.HemisphereLight(0x606060, 0x404040))\n\n    const light = new THREE.DirectionalLight(0xffffff)\n    light.position.set(1, 1, 1).normalize()\n    this.scene.add(light)\n\n    const geometry = new THREE.BoxGeometry(0.15, 0.15, 0.15)\n\n    for (let i = 0; i < 200; i++) {\n      const object = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({ color: Math.random() * 0xffffff }))\n\n      object.position.x = Math.random() * 4 - 2\n      object.position.y = Math.random() * 4 - 2\n      object.position.z = Math.random() * 4 - 2\n\n      object.rotation.x = Math.random() * 2 * Math.PI\n      object.rotation.y = Math.random() * 2 * Math.PI\n      object.rotation.z = Math.random() * 2 * Math.PI\n\n      object.scale.x = Math.random() + 0.5\n      object.scale.y = Math.random() + 0.5\n      object.scale.z = Math.random() + 0.5\n\n      object.userData.velocity = new THREE.Vector3()\n      object.userData.velocity.x = Math.random() * 0.01 - 0.005\n      object.userData.velocity.y = Math.random() * 0.01 - 0.005\n      object.userData.velocity.z = Math.random() * 0.01 - 0.005\n\n      this.room.add(object)\n    }\n\n    this.raycaster = new THREE.Raycaster()\n\n    this.renderer.setClearColor(0x505050)\n    this.renderer.sortObjects = false\n\n    this.renderer.domElement.addEventListener('mousedown', this.onMouseDown.bind(this), false)\n    this.renderer.domElement.addEventListener('mouseup', this.onMouseUp.bind(this), false)\n    this.renderer.domElement.addEventListener('touchstart', this.onMouseDown.bind(this), false)\n    this.renderer.domElement.addEventListener('touchend', this.onMouseUp.bind(this), false)\n\n    this.animate()\n  }\n\n  onMouseDown () {\n    this.isMouseDown = true\n  }\n\n  onMouseUp () {\n    this.isMouseDown = false\n  }\n\n  onWindowResize () {\n    super.onWindowResize()\n    this.effect.setSize(window.innerWidth, window.innerHeight)\n  }\n\n  animate () {\n    this.effect.requestAnimationFrame(this.animate.bind(this))\n    this.render()\n  }\n\n  render () {\n    const delta = this.clock.getDelta() * 60\n\n    if (this.isMouseDown === true) {\n      const cube = this.room.children[ 0 ]\n      this.room.remove(cube)\n\n      cube.position.set(0, 0, -0.75)\n      cube.position.applyQuaternion(this.camera.quaternion)\n      cube.userData.velocity.x = (Math.random() - 0.5) * 0.02 * delta\n      cube.userData.velocity.y = (Math.random() - 0.5) * 0.02 * delta\n      cube.userData.velocity.z = (Math.random() * 0.01 - 0.05) * delta\n      cube.userData.velocity.applyQuaternion(this.camera.quaternion)\n      this.room.add(cube)\n    }\n\n    this.raycaster.setFromCamera({ x: 0, y: 0 }, this.camera)\n\n    const intersects = this.raycaster.intersectObjects(this.room.children)\n\n    if (intersects.length > 0) {\n      if (this.INTERSECTED !== intersects[ 0 ].object) {\n        if (this.INTERSECTED) this.INTERSECTED.material.emissive.setHex(this.INTERSECTED.currentHex)\n\n        this.INTERSECTED = intersects[ 0 ].object\n        this.INTERSECTED.currentHex = this.INTERSECTED.material.emissive.getHex()\n        this.INTERSECTED.material.emissive.setHex(0xff0000)\n      }\n    } else {\n      if (this.INTERSECTED) this.INTERSECTED.material.emissive.setHex(this.INTERSECTED.currentHex)\n\n      this.INTERSECTED = undefined\n    }\n\n    // Keep cubes inside room\n\n    for (let i = 0; i < this.room.children.length; i++) {\n      const cube = this.room.children[ i ]\n\n      cube.userData.velocity.multiplyScalar(1 - (0.001 * delta))\n\n      cube.position.add(cube.userData.velocity)\n\n      if (cube.position.x < -3 || cube.position.x > 3) {\n        cube.position.x = THREE.Math.clamp(cube.position.x, -3, 3)\n        cube.userData.velocity.x = -cube.userData.velocity.x\n      }\n\n      if (cube.position.y < -3 || cube.position.y > 3) {\n        cube.position.y = THREE.Math.clamp(cube.position.y, -3, 3)\n        cube.userData.velocity.y = -cube.userData.velocity.y\n      }\n\n      if (cube.position.z < -3 || cube.position.z > 3) {\n        cube.position.z = THREE.Math.clamp(cube.position.z, -3, 3)\n        cube.userData.velocity.z = -cube.userData.velocity.z\n      }\n\n      cube.rotation.x += cube.userData.velocity.x * 2 * delta\n      cube.rotation.y += cube.userData.velocity.y * 2 * delta\n      cube.rotation.z += cube.userData.velocity.z * 2 * delta\n    }\n\n    this.controls.update()\n    this.effect.render(this.scene, this.camera)\n  }\n}\nexport default Main\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/mainVR.js"],"sourceRoot":""}